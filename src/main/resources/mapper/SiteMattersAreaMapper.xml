<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wangxinenpu.springbootdemo.dao.mapper.selfmachine.SiteMattersAreaMapper">



    <select id="getSiteAreaMattersList" resultType="com.wangxinenpu.springbootdemo.dataobject.dto.sitematters.MattersDto">
        select a.id as id,a.name as name,c.name as businessTypeName from site_matters a,site_matters_area b,site_business_type c
        <where>
            a.id=b.matters_id and a.business_type_id=c.id
            and b.account_type_id= #{accountTypeId}
            and b.area_id = #{areaId}
            and b.is_delete = 0
            and a.buss_type= #{bussType}
            <if test="name != null and name!=''" >
                and a.name like concat('%',#{name},'%')
            </if>
            <if test="businessTypeId != null and businessTypeId!=0" >
                and a.business_type_id=#{businessTypeId}
            </if>
        </where>
    </select>

<!--    <select id="selectByAreaId" resultType="com.insigma.facade.vo.SiteHomeConfig.SiteHomeConfigResponseList">-->
<!--        select distinct c.matters_id AS mattersId,-->
<!--         c.matters_id AS id,-->
<!--		c.block_app_id AS blockAppId,-->
<!--		c.area_id as areaId,-->
<!--		m.name as mattersName,-->
<!--		 m.name as name,b.pic_url as picUrl-->
<!-- FROM (select * from site_matters_area where area_id = #{areaId} and is_delete = 0) as c-->
<!--		  	left join site_matters as m on m.id = c.matters_id  left join site_block as b on b.id = c.block_app_id order BY b.sort_number DESC-->

<!--    </select>-->
</mapper>
