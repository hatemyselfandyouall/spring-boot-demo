webpackJsonp([1],{"+VJj":function(e,t){},"+cgv":function(e,t){},"/2w4":function(e,t){},"/gxP":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Wc9H"),i=a.n(s),r=a("IaZV"),n=a.n(r),o=new i.a({id:"icon-plusPhoto",use:"icon-plusPhoto-usage",viewBox:"0 0 150 150",content:'<symbol viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-plusPhoto">\n    \x3c!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Group 12</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="icon-plusPhoto_Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="icon-plusPhoto_08零星报销02" transform="translate(-39.000000, -2883.000000)">\n            <g id="icon-plusPhoto_Group-11-Copy" transform="translate(0.000000, 2531.000000)">\n                <g id="icon-plusPhoto_上传图片" transform="translate(39.000000, 352.000000)">\n                    <g id="icon-plusPhoto_Group-12">\n                        <rect id="icon-plusPhoto_Rectangle-3" fill="#EFEFEF" x="0" y="0" width="150" height="150" />\n                        <polygon id="icon-plusPhoto_+" fill-opacity="0.45" fill="#000000" points="74.1 60 76.26 60 76.26 74.04 90.3 74.04 90.3 76.2 76.26 76.2 76.26 90.3 74.1 90.3 74.1 76.2 60 76.2 60 74.04 74.1 74.04" />\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</symbol>'});n.a.add(o);t.default=o},0:function(e,t){},"09+H":function(e,t){},1:function(e,t){},2:function(e,t){},"2JQl":function(e,t){e.exports=[{value:"330000",label:"浙江省"},{value:"330100",label:"杭州市"},{value:"330200",label:"宁波市"},{value:"330300",label:"温州市"},{value:"330400",label:"嘉兴市"},{value:"330500",label:"湖州市"},{value:"330600",label:"绍兴市"},{value:"330700",label:"金华市"},{value:"330800",label:"衢州市"},{value:"330900",label:"舟山市"},{value:"331000",label:"台州市"},{value:"331100",label:"丽水市"}]},"2gZA":function(e,t){e.exports=[{value:"330000",label:"浙江省",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330100",label:"杭州市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330200",label:"宁波市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330300",label:"温州市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330400",label:"嘉兴市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330500",label:"湖州市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330600",label:"绍兴市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330700",label:"金华市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330800",label:"衢州市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"330900",label:"舟山市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"331000",label:"台州市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]},{value:"331100",label:"丽水市",children:[{value:"1",label:"单位"},{value:"2",label:"个人"}]}]},"3f40":function(e,t){},"4qOc":function(e,t){},"6Cmp":function(e,t){},"7XgH":function(e,t){},"7buz":function(e,t){},"8tKP":function(e,t){},"90Fk":function(e,t,a){var s={"./delete.svg":"Imjp","./more.svg":"gZ6Q","./plusPhoto.svg":"/gxP","./search.svg":"Bx0U"};function i(e){return a(r(e))}function r(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id="90Fk"},AQKe:function(e,t){},BjtM:function(e,t){},Bx0U:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Wc9H"),i=a.n(s),r=a("IaZV"),n=a.n(r),o=new i.a({id:"icon-search",use:"icon-search-usage",viewBox:"0 0 60 60",content:'<symbol viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-search">\n    \x3c!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>搜索</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="icon-search_搜索" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M28.3359166,13.2044117 C30.3832075,13.2044117 32.3724566,13.6103038 34.2403456,14.4114067 C36.0449164,15.1858062 37.6700854,16.2913282 39.0630874,17.7012693 C40.4560894,19.1112105 41.5536062,20.7561418 42.3134255,22.5826564 C43.1049039,24.4732593 43.5059196,26.486698 43.5059196,28.5588842 C43.5059196,30.6310704 43.1049039,32.644509 42.3134255,34.5351119 C41.5483297,36.3616265 40.4560894,38.0065579 39.0630874,39.416499 C37.6700854,40.8264401 36.0449164,41.9373028 34.2403456,42.7063616 C32.3724566,43.5074645 30.3832075,43.9133567 28.3359166,43.9133567 C26.2886258,43.9133567 24.2993767,43.5074645 22.4314876,42.7063616 C20.6269169,41.9319621 19.0017478,40.8264401 17.6087458,39.416499 C16.2157438,38.0065579 15.1182271,36.3616265 14.3584078,34.5351119 C13.5669294,32.644509 13.1659137,30.6310704 13.1659137,28.5588842 C13.1659137,26.486698 13.5669294,24.4732593 14.3584078,22.5826564 C15.1235036,20.7561418 16.2157438,19.1112105 17.6087458,17.7012693 C19.0017478,16.2913282 20.6269169,15.1804655 22.4314876,14.4114067 C24.2993767,13.6103038 26.2833493,13.2044117 28.3359166,13.2044117 Z M28.3359166,10 C18.2102694,10 10,18.3101076 10,28.5588842 C10,38.8076608 18.2049929,47.123109 28.3359166,47.123109 C38.4668404,47.123109 46.6718333,38.8130015 46.6718333,28.5642249 C46.6718333,18.3154482 38.4615638,10 28.3359166,10 Z M40.9573591,40.1962392 C40.5510668,40.1962392 40.1447746,40.3511191 39.8387363,40.6662195 C39.2213831,41.2910798 39.2213831,42.3058102 39.8387363,42.9306704 L47.2997395,50.4824006 C47.6110543,50.7975011 48.01207,50.952381 48.4183623,50.952381 C48.8246546,50.952381 49.2309468,50.7975011 49.5369851,50.4824006 C50.1543383,49.8575403 50.1543383,48.8428099 49.5369851,48.2179497 L42.0759819,40.6662195 C41.7699436,40.3564597 41.3636514,40.1962392 40.9573591,40.1962392 Z" id="icon-search_Shape" fill="#1492FF" fill-rule="nonzero" />\n    </g>\n</symbol>'});n.a.add(o);t.default=o},"DJ+y":function(e,t){},DJf4:function(e,t){},F1wO:function(e,t){},G4ct:function(e,t){},GnmL:function(e,t){},HFqs:function(e,t){},Imjp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Wc9H"),i=a.n(s),r=a("IaZV"),n=a.n(r),o=new i.a({id:"icon-delete",use:"icon-delete-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-delete"><defs><style type="text/css"></style></defs><path d="M512 0c-283.105882 0-512 228.894118-512 512s228.894118 512 512 512 512-228.894118 512-512S795.105882 0 512 0z m222.870588 644.517647c24.094118 24.094118 24.094118 66.258824 0 90.352941-24.094118 24.094118-66.258824 24.094118-90.352941 0l-132.517647-132.517647-132.517647 138.541177c-24.094118 24.094118-66.258824 24.094118-90.352941 0-12.047059-18.070588-18.070588-30.117647-18.070588-48.188236s6.023529-36.141176 18.070588-48.188235l132.517647-132.517647-132.517647-126.494118c-12.047059-18.070588-18.070588-30.117647-18.070588-48.188235 0-18.070588 6.023529-36.141176 18.070588-48.188235 24.094118-24.094118 66.258824-24.094118 90.352941 0l132.517647 132.517647 132.517647-132.517647c24.094118-24.094118 66.258824-24.094118 90.352941 0 24.094118 24.094118 24.094118 66.258824 0 90.352941l-132.517647 132.517647 132.517647 132.517647z" p-id="1139" fill="#dbdbdb" data-spm-anchor-id="a313x.7781069.0.i0" class="" /></symbol>'});n.a.add(o);t.default=o},Ko2B:function(e,t){},LIXR:function(e,t){},Lnvs:function(e,t){},N2Zw:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={};a.d(s,"userState",function(){return ia}),a.d(s,"userType",function(){return ra}),a.d(s,"dispatchRule",function(){return na}),a.d(s,"funType",function(){return oa}),a.d(s,"businessType",function(){return la}),a.d(s,"ruleStruts",function(){return ca}),a.d(s,"auFlag",function(){return ua}),a.d(s,"isLeading",function(){return da}),a.d(s,"getLocalTime",function(){return pa}),a.d(s,"cardType",function(){return ma}),a.d(s,"systemType",function(){return ha}),a.d(s,"systemType1",function(){return fa}),a.d(s,"maintainSign",function(){return ga}),a.d(s,"effectiveSign",function(){return va}),a.d(s,"menuType",function(){return ya}),a.d(s,"isBus",function(){return ba}),a.d(s,"isPrint",function(){return _a}),a.d(s,"isNum",function(){return wa}),a.d(s,"businessTypeOne",function(){return Ca}),a.d(s,"businessTypeTwo",function(){return ka}),a.d(s,"businessTypeThree",function(){return xa}),a.d(s,"taskStatus",function(){return Ia}),a.d(s,"checkResult",function(){return Fa}),a.d(s,"funLevel",function(){return Ta});var i=a("fZjL"),r=a.n(i),n=a("7+uW"),o=a("zL8q"),l=a.n(o),c=(a("m0iu"),a("BjtM"),a("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.isRouterAlive?t("router-view"):this._e()],1)},staticRenderFns:[]});var u=a("VU/8")({name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}},mounted:function(){}},c,!1,function(e){a("sr8W")},null,null).exports,d=a("/ocq"),p={data:function(){return{formLabelAlign:{userName:"",passWord:"",yzm:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"}],yzm:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},created:function(){var e=this;document.onkeydown=function(t){t.keyCode;13==(void 0==window.event?t.keyCode:window.event.keyCode)&&e.submitForm("formLabelAlign")}},mounted:function(){},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.$crypto.enc.Utf8.parse("epsoftep400-8671"),s=t.$crypto.enc.Utf8.parse("epsoftep400-8671"),i=t.$crypto.AES.encrypt(t.formLabelAlign.passWord,a,{iv:s,mode:t.$crypto.mode.CBC,padding:t.$crypto.pad.ZeroPadding}).toString();t.$get("/doLogin",{loginName:t.formLabelAlign.userName,passWord:i}).then(function(e){if(e.data.success){t.$router.push({path:"/home"});var a=t.$Base64.encode(e.data.result.logonName),s=t.$Base64.encode(e.data.result.userType);localStorage.setItem("uesr",a),localStorage.setItem("userType",s),document.onkeydown=void 0}t.$mess(e.data),t.formLabelAlign.zym=""})})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"wrap"},[a("h1",{staticClass:"title"},[e._v("经办管理系统")]),e._v(" "),a("el-form",{ref:"formLabelAlign",attrs:{rules:e.rules,"label-position":"top","label-width":"200px",model:e.formLabelAlign}},[a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户名"},model:{value:e.formLabelAlign.userName,callback:function(t){e.$set(e.formLabelAlign,"userName",t)},expression:"formLabelAlign.userName"}},[a("i",{staticClass:"iconfont icon-yonghu",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{attrs:{prop:"passWord"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:e.formLabelAlign.passWord,callback:function(t){e.$set(e.formLabelAlign,"passWord",t)},expression:"formLabelAlign.passWord"}},[a("i",{staticClass:"iconfont icon-ziyuanxhdpi",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("a",{staticClass:"resetPass",attrs:{href:"#"}},[e._v("重置密码")]),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"loginButton",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formLabelAlign")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("formLabelAlign")}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var h=a("VU/8")(p,m,!1,function(e){a("/2w4")},"data-v-440de817",null).exports,f={name:"SidebarItem",props:{item:{type:Object,required:!0}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.item.children?a("div",[0==e.item.children.length?[a("el-menu-item",{attrs:{index:"/home"+e.item.location,route:"/home"+e.item.location}},[e._v("\n      "+e._s(e.item.title)+"\n    ")])]:a("el-submenu",{attrs:{index:"/home"+e.item.location}},[a("template",{slot:"title"},[e._v("\n      "+e._s(e.item.title)+"\n    ")]),e._v(" "),e._l(e.item.children,function(t){return[t.children&&t.children.length>0?a("sidebar-item",{key:t.id,attrs:{item:t}}):a("el-menu-item",{key:t.id,attrs:{index:"/home"+t.location,route:"/home"+t.location}},[e._v("\n        "+e._s(t.title)+"\n      ")])]})],2)],2):e._e()},staticRenderFns:[]},v={name:"Sidebar",components:{SidebarItem:a("VU/8")(f,g,!1,null,null,null).exports},props:{menuList:{type:Array,required:!0}},computed:{defaultActive:function(){return this.$route.path}},methods:{isQuery:function(e){return 1==e?"a0b923820dcc509a":2==e?"9d4c2f636f067f89":3==e?"4b5ce2fe28308fd9":4==e?"a2f3e71d9181a67b":5==e?"bbce2345d7772b06":6==e?"5a880faf6fb5e608":7==e?"ceea167a5a36dedd":8==e?"fb98ab9159f51fd0":9==e?"2e2d7fbdea1afc51":10==e?"02a44259755d38e6":11==e?"d9caa6e02c990b0a":void 0},menuSelect:function(e){this.$router.push({path:e})}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-container"},[a("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[a("el-menu",{attrs:{mode:"vertical","default-active":e.defaultActive},on:{select:e.menuSelect}},e._l(e.menuList,function(t,s){return a("div",{key:s},[1==t.nodeType?a("el-submenu",{attrs:{index:String(t.id)}},[a("template",{slot:"title"},[a("span",[e._v(e._s(t.title))])]),e._v(" "),e._l(t.children,function(t,s){return a("el-menu-item",{key:s,attrs:{index:"/home"+t.location+"?is="+e.isQuery(t.systemType)}},[e._v(e._s(t.title))])})],2):a("el-menu-item",{attrs:{index:"/home"+t.location}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])],1)}),0)],1)],1)},staticRenderFns:[]};var b={components:{Sidebar:a("VU/8")(v,y,!1,function(e){a("nMyW")},"data-v-626d57b2",null).exports},data:function(){return{menuData:[],defaultProps:{children:"children",label:"title"}}},created:function(){this.init()},methods:{init:function(){var e=this;this.menuData=[],this.$get("/sys/function/queryFunctionList",{funType:"1"}).then(function(t){e.menuData=t.data.result})},handleOpen:function(e,t){},handleClose:function(e,t){}}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("Sidebar",{attrs:{menuList:this.menuData}})],1)],1)],1)},staticRenderFns:[]};var w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var C={data:function(){var e=this,t=function(e,t,a){var s=!0;t.length>=6&&(/^(?:\d+|[a-zA-Z]+|[!@#$%^&*]+)$/.test(t)||/^(?![a-zA-z]+$)(?!\d+$)(?![!@#$%^&*]+$)[a-zA-Z\d!@#$%^&*]+$/.test(t)||/^(?![a-zA-z]+$)(?!\d+$)(?![!@#$%^&*]+$)(?![a-zA-z\d]+$)(?![a-zA-z!@#$%^&*]+$)(?![\d!@#$%^&*]+$)[a-zA-Z\d!@#$%^&*]+$/.test(t))&&(s=!1),s?a(new Error("请输入6位以上数字、字母、符号或组合")):a()};return{dialogFormVisible:!1,ruleForm:{oldPasswd:"",newPasswd:"",confirmNewPasswd:"",showPasswd:"",inputType:"password",showPoints:!0,incorrectPasswd:!1},rules:{oldPasswd:[{required:!0,message:"请输入6位以上数字、字母、符号或组合",trigger:"blur"},{validator:t,trigger:"blur"}],newPasswd:[{required:!0,message:"请输入6位以上数字、字母、符号或组合",trigger:"blur"},{validator:t,trigger:"blur"},{validator:function(t,a,s){var i=!1;a.length>=6&&e.ruleForm.oldPasswd.length>=6&&a==e.ruleForm.oldPasswd&&(i=!0),i?s(new Error("新密码不能设置为原始密码！")):s()},trigger:"blur"}],confirmNewPasswd:[{required:!0,message:"请输入6位以上数字、字母、符号或组合",trigger:"blur"},{validator:t,trigger:"blur"},{validator:function(t,a,s){var i=!0;a.length>=6&&e.ruleForm.newPasswd.length>=6&&a==e.ruleForm.newPasswd&&(i=!1),i?s(new Error("两次密码输入不一致！")):s()},trigger:"blur"}]}}},components:{MenuBar:a("VU/8")(b,_,!1,function(e){a("NOdP")},"data-v-46c046b2",null).exports,Main:a("VU/8")({components:{}},w,!1,function(e){a("Ko2B")},"data-v-3041a3bd",null).exports},computed:{loginName:function(){return this.$Base64.decode(localStorage.getItem("uesr"))||""}},methods:{setCookie:function(e,t,a){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);var i="expires="+s.toGMTString();document.cookie=e+"="+t+"; "+i},userOut:function(e){var t=this;"loginOut"==e&&this.$get("/login",{cmd:"logout"}).then(function(e){e.data.success&&(t.setCookie("l","",-1),t.setCookie("JSESSIONID","",-1),t.setCookie("cat","",-1),t.setCookie("ol","",-1),localStorage.removeItem("uesr"),localStorage.removeItem("userType"),t.$router.push("/login")),t.$mess(e.data)}),"changePassword"==e&&(this.dialogFormVisible=!0)},upload:function(e){},handleClose:function(){this.ruleForm={oldPasswd:"",newPasswd:"",confirmNewPasswd:"",showPasswd:"",inputType:"password",showPoints:!0,incorrectPasswd:!1},this.$refs.ruleForm.resetFields()},updatePasswd:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;e.$get("/sys/user/updatePasswd",{oldPasswd:e.ruleForm.oldPasswd,newPasswd:e.ruleForm.newPasswd}).then(function(t){t.data.result.success?(e.$router.push("/login"),e.$message({type:"success",message:t.data.result.resultDes})):(e.ruleForm.incorrectPasswd=!0,setTimeout(function(){e.ruleForm.incorrectPasswd=!1},2e3))})})},newPasswd:function(){this.ruleForm.showPoints=!1},getValue:function(e){this.ruleForm.showPasswd&&(this.ruleForm.inputType="text")}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticClass:"title"},[a("h1",[e._v("经办管理系统")]),e._v(" "),a("div",[a("el-dropdown",{staticClass:"login",on:{command:e.userOut}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n            "+e._s(e.loginName)+"\n            "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticStyle:{padding:"0 20px"},attrs:{command:"loginOut"}},[e._v("退出")]),e._v(" "),a("el-dropdown-item",{staticStyle:{padding:"0 20px"},attrs:{command:"changePassword"}},[e._v("修改密码")])],1)],1),e._v(" "),a("el-dropdown",{staticClass:"upload"},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n            导入\n            "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("ep-upload",{attrs:{text:"用户导入",upLoadUrl:"/test/importUser"}})],1),e._v(" "),a("el-dropdown-item",[a("ep-upload",{attrs:{text:"角色导入",upLoadUrl:"/test/importRole"}})],1),e._v(" "),a("el-dropdown-item",[a("ep-upload",{attrs:{text:"机构导入",upLoadUrl:"/test/importorg"}})],1),e._v(" "),a("el-dropdown-item",[a("ep-upload",{attrs:{text:"审核导入",upLoadUrl:"/test/importCheck"}})],1)],1)],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.handleClose}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"原始密码",prop:"oldPasswd"}},[a("el-input",{attrs:{type:e.ruleForm.inputType,placeholder:"请输入"},model:{value:e.ruleForm.oldPasswd,callback:function(t){e.$set(e.ruleForm,"oldPasswd",t)},expression:"ruleForm.oldPasswd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPasswd"}},[a("el-input",{attrs:{type:e.ruleForm.inputType,placeholder:"请输入"},on:{blur:function(t){return e.newPasswd()}},model:{value:e.ruleForm.newPasswd,callback:function(t){e.$set(e.ruleForm,"newPasswd",t)},expression:"ruleForm.newPasswd"}}),e._v(" "),e.ruleForm.showPoints?a("span",{staticClass:"points"},[e._v("请输入6位以上数字、字母、符号或组合")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"确认新密码",prop:"confirmNewPasswd"}},[a("el-input",{attrs:{type:e.ruleForm.inputType,placeholder:"请输入"},model:{value:e.ruleForm.confirmNewPasswd,callback:function(t){e.$set(e.ruleForm,"confirmNewPasswd",t)},expression:"ruleForm.confirmNewPasswd"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"showPasswd"}},[a("el-radio",{staticClass:"show-passwd",attrs:{label:"1"},on:{change:e.getValue},model:{value:e.ruleForm.showPasswd,callback:function(t){e.$set(e.ruleForm,"showPasswd",t)},expression:"ruleForm.showPasswd"}},[e._v("显示密码")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updatePasswd}},[e._v("确 定")])],1),e._v(" "),e.ruleForm.incorrectPasswd?a("div",{staticClass:"input-again"},[e._v("当前密码输入错误请重新输入!")]):e._e()],1),e._v(" "),a("el-container",[a("el-aside",{staticStyle:{height:"100%"},attrs:{width:"200px"}},[a("menu-bar",{staticStyle:{height:"100%","overflow-y":"auto"}})],1),e._v(" "),a("el-main",{staticClass:"main"},[a("Main")],1)],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(C,k,!1,function(e){a("7XgH")},"data-v-68290164",null).exports,I=a("woOf"),F=a.n(I),T=a("BO1k"),S=a.n(T),N=a("mvHQ"),D=a.n(N),L={data:function(){return{departIndex:0,isRowClick:!0,departShow:!1,downloadUrl:"/api/test/exportorg",isTypeZore:!0,sideTree:[],isEdit:!1,isView:!1,isTable:!0,fourShow:!1,mainLoading:!1,orgDisabled:!1,foundDate:"",filterText:"",citiesData:[],isMainShow:!1,addOrEdit:"保存",orgOptions:[],defaultTreeKey:["1"],areaDisabled:!1,mechanismForm:{orgName:"",orgenterCode:"",shortName:"",regionCode:"",linkman:"",leader:"",orgOrder:"",zip:"",superdept:"",orgAddr:"",orgDesc:""},rulesOrg:{orgName:[{required:!0,message:"请输入机构名称",trigger:"blur"}],shortName:[{required:!0,message:"请输入机构简称",trigger:"blur"}],regionCode:[{required:!0,message:"请输入行政区划",trigger:"blur"}]},cityForm:{orgName:"",orgenterCode:"",shortName:"",linkman:"",tel:"",orgOrder:"",superdept:"",orgDesc:""},rulesOrg1:{orgName:[{required:!0,message:"请输入科室名称",trigger:"blur"}],regionCode:[{required:!0,message:"请输入所属机构",trigger:"blur"}]},diaTitle1:"新增科室",rowOrgName:"",addDia1:!1,departFrom:{id:"",orgName:"",orgenterCode:"",shortName:"",regionCode:"",linkman:"",leader:"",orgDesc:""},cityNameOptions:[],checkAll:!1,checkedCities:[],cities:[],isIndeterminate:!0,cityName:{one:"省份名称",two:"省份代码",three:"省份简称",four:""},parentId:"",orgId:"",id:"",treeData:[],defaultProps:{children:"children",label:"orgName"},tableDatas:[],tableData:[],viewFrom:{},row:{},orgData:{}}},created:function(){var e=this;this.initTree(),this.$get("/sys/org/getInsTypeList").then(function(t){if(t.data.success){var a=JSON.parse(D()(t.data.result));e.cities=t.data.result;var s=!0,i=!1,r=void 0;try{for(var n,o=S()(a);!(s=(n=o.next()).done);s=!0){var l=n.value;e.citiesData.push(l.id)}}catch(e){i=!0,r=e}finally{try{!s&&o.return&&o.return()}finally{if(i)throw r}}}})},watch:{isEdit:function(){!0===this.isEdit&&(this.isView=!1,this.isMainShow=!1,this.isTable=!1)},isMainShow:function(){!0===this.isMainShow&&(this.isView=!1,this.isEdit=!1,this.isTable=!1)},isView:function(){!0===this.isView&&(this.isEdit=!1,this.isMainShow=!1,this.isTable=!1)},isTable:function(){!0===this.isTable&&(this.isView=!1,this.isEdit=!1,this.isMainShow=!1)}},computed:{tableHeight:function(){return window.innerHeight-260}},methods:{inputChange:function(e){this.$refs.tree2.filter(e)},filterNode:function(e,t){return!e||-1!==t.orgName.indexOf(e)},handleTongbu:function(e){var t=this;this.mainLoading=!0,this.$post("sys/org/batchSaveCheckConfig?orgIds="+e.id.toString()).then(function(e){e.success?t.initTree():t.$message({type:"error",message:"同步失败,"+e.resultDes})})},editDepart:function(e,t,a){var s=this;this.departIndex=a,this.row=t,this.diaTitle1="编辑科室",this.departId=e,this.$post("/sysOrgDepartment/detail",{id:Number(e)}).then(function(e){e.success?(s.addDia1=!0,s.departFrom=F()(s.departFrom,e.result),s.departFrom.regionCode=t.id,s.departFrom.rowOrgName=t.orgName,s.departFrom.orgName=e.result.name,s.departFrom.id=e.result.id,s.departFrom.orgenterCode=e.result.code,s.departFrom.orgDesc=e.result.departDescribe):s.$mess(e.msg)})},deleteDepart:function(e,t,a){var s=this;this.isRowClick=!1;var i={id:Number(e),orgId:t.id};this.$confirm("此操作将永久删除ID为"+e+"的科室, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$delete("/sysOrgDepartment/delete",i).then(function(e){e.data.success?(s.$message({type:"success",message:"删除成功!"}),t.departList.splice(a,1)):s.$message({type:"error",message:e.data.resultDes})}).catch(function(e){})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},departAddEdit:function(e){var t=this,a={code:this.departFrom.orgenterCode,departDescribe:this.departFrom.orgDesc,id:this.departFrom.id?this.departFrom.id:"",leader:this.departFrom.leader,linkman:this.departFrom.linkman,name:this.departFrom.orgName,orgId:Number(this.departFrom.regionCode),shortName:this.departFrom.shortName};this.$refs[e].validate(function(e){t.$post("/sysOrgDepartment/save",a).then(function(e){e.success?(t.addDia1=!1,t.departFrom.id?t.row.departList[t.departIndex].name=t.departFrom.orgName:t.rowExpand(t.row)):t.$message({type:"error",message:e.resultDes})})})},rowClick:function(e){this.isRowClick=!0},rowExpand:function(e){var t=this;this.orgId=e.id,this.departShow=!1,this.rowOrgName=e.orgName;var a={orgId:Number(this.orgId)};this.isRowClick&&this.$refs.refTable.toggleRowExpansion(e),this.$post("/sysOrgDepartment/list",a).then(function(a){a.success?(e.isShow=!0,e.departList=a.result):t.$mess(a.data.msg),t.isRowClick=!0})},addDepart:function(e){for(var t in this.departFrom)this.departFrom[t]="";this.isRowClick=!1,this.diaTitle1="新增科室",this.addDia1=!0,this.orgId=e.id,this.departFrom.regionCode=e.id,this.row=e},logout:function(e){var t=this;this.$confirm("此操作将永久删除ID为"+e.id+"的机构, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$get("/sys/org/deleteOrg",{orgId:e.id}).then(function(e){e.data.success?(t.$message({type:"success",message:"删除成功!"}),t.tableData=[],t.defaultTreeKey=[],t.defaultTreeKey.push(t.parentId),t.initTree()):t.$message({type:"error",message:e.data.resultDes})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},initTree:function(){var e=this;this.$get("/sys/org/queryTree").then(function(t){t.data.success&&(e.treeData=t.data.result,e.mainLoading=!1)})},regionCodeChange:function(e){},addCreate:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$post("/sys/org/saveOrg",{sysOrgDTO:{id:t.orgId,parentId:Number(t.parentId),orgName:t.mechanismForm.orgName,orgenterCode:t.mechanismForm.orgenterCode,shortName:t.mechanismForm.shortName,regionCode:t.mechanismForm.regionCode,linkman:t.mechanismForm.linkman,leader:t.mechanismForm.leader,orgOrder:t.mechanismForm.orgOrder,zip:t.mechanismForm.zip,superdept:t.mechanismForm.superdept,orgAddr:t.mechanismForm.orgAddr,orgDesc:t.mechanismForm.orgDesc},insList:t.checkedCities}).then(function(e){e.success&&(t.$mess(e),t.isMainShow=!1,t.isTable=!0,t.tableData=[],t.defaultTreeKey=[],t.defaultTreeKey.push(t.parentId),t.initTree())})})},addOrg:function(e,t){for(var a in this.isMainShow=!0,this.addOrEdit="立即创建",this.mechanismForm)"regionCode"!=a&&(this.mechanismForm[a]="");this.checkedCities=[],this.orgId="",t&&(this.parentId=this.id)},addDownOrg:function(){this.isMainShow=!0,this.addOrg("num",this.mechanismForm.regionCode)},addCity:function(){for(var e in this.cityForm)this.cityForm[e]=""},saveCity:function(){var e=this;this.$post("/sys/org/saveOrg",{sysOrgDTO:{id:Number(this.orgId),parentId:Number(this.parentId),orgName:this.cityForm.orgName,orgenterCode:this.cityForm.orgenterCode,shortName:this.cityForm.shortName,regionCode:this.cityForm.regionCode,linkman:this.cityForm.linkman,leader:this.cityForm.leader,orgOrder:this.cityForm.orgOrder,zip:this.cityForm.zip,superdept:this.cityForm.superdept,orgAddr:this.cityForm.orgAddr,orgDesc:this.cityForm.orgDesc},insList:[]}).then(function(t){e.$mess(t),t.success&&(e.defaultTreeKey=[],e.defaultTreeKey.push(e.orgId),e.initTree())})},handleCheckAllChange:function(e){this.checkedCities=e?this.citiesData:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.citiesData.length,this.isIndeterminate=t>0&&t<this.citiesData.length},handleView:function(e){var t=this;this.$get("/sys/org/findOrgById",{orgId:e.id}).then(function(e){e.data.success?(t.isView=!0,t.mechanismForm=e.data.result.sysOrg):t.$mess(e.data.msg)})},handleEdit:function(e){var t=this;this.$get("/sys/org/findOrgById",{orgId:e.id}).then(function(a){a.data.success?(t.isEdit=!0,t.orgId=e.id,t.mechanismForm=a.data.result.sysOrg):t.$mess(a.data.msg)})},handleCurrentChange:function(e){this.tableData=this.tableDatas.slice(10*(e-1),10*e)},format:function(e){var t=function(e){return e<10?"0"+e.toString():e},a=e.getFullYear(),s=e.getMonth()+1;s=t(s);var i=e.getDate();i=t(i);var r=e.getHours();r=t(r);var n=e.getMinutes();n=t(n);var o=e.getSeconds();return a+"-"+s+"-"+i+" "+r+":"+n+":"+(o=t(o))},getAllAgency:function(e){if(e.children)for(var t=0;t<e.children.length;t++)e.children[t].children||1!=e.children[t].type||this.tableDatas.push({id:e.children[t].id,orgName:e.children[t].orgName,createTime:this.format(new Date(Number(e.children[t].createTime))),isSynchronization:e.children[t].isSynchronization,linkman:e.children[t].linkman});else this.tableDatas.push({id:e.id,orgName:e.orgName,createTime:this.format(new Date(Number(e.createTime))),isSynchronization:e.isSynchronization,linkman:e.linkman})},handleNodeClick:function(e,t){var a=this;this.tableDatas=[],1==e.type?this.isTypeZore=!1:this.isTypeZore=!0,this.getAllAgency(e),this.tableData=this.tableDatas.slice(0,10),this.tableData.forEach(function(e){e.isShow=!1,a.$set(e,"departList",[])}),this.isTable=!0;var s;s=e.idpath.split("/").length,1==e.type?this.parentId=t.parent.data.id:this.parentId=e.id,this.orgId=e.id,this.id=e.id,this.addOrEdit="保存";var i=F()({},e);this.mechanismForm=i,this.cityNameOptions=t.parent.childNodes,this.cityForm=i,1==s&&(this.cityName={one:"省份名称",two:"省份代码",three:"省份简称"}),2==s&&(this.cityName={one:"地市名称",two:"地市代码",three:"地市简称",four:"新建地市"}),3==s||2==s&&271==e.id?(this.orgOptions=t.parent.childNodes,this.cityName={one:"行政区划名称",two:"行政区划代码",three:"行政区划简称",four:"新建行政区划"},this.fourShow=!0):this.fourShow=!1,271==t.parent.data.id||271==e.id?this.areaDisabled=!0:this.areaDisabled=!1,this.orgDisabled=!0,4!=s&&271!=t.parent.data.id||(this.orgDisabled=!1,this.cityName.four="新建机构",this.orgOptions=t.parent.parent.childNodes,this.$get("/sys/org/findOrgById",{orgId:e.id}).then(function(e){e.data.success&&(a.checkedCities=e.data.result.insList)}))}}},$={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("el-container",{attrs:{height:e.tableHeight}},[s("el-aside",{staticStyle:{"border-right":"solid 1px #ccc"},attrs:{width:"200px"}},[s("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入省/市/行政区划机构名称"},on:{input:e.inputChange},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),s("div",{staticClass:"scroll"},[s("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","default-expanded-keys":e.defaultTreeKey,"filter-node-method":e.filterNode,"highlight-current":!0,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),s("el-main",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isMainShow,expression:"isMainShow"}]},[s("el-form",{ref:"ruleForm",staticStyle:{"margin-top":"20px"},attrs:{model:e.mechanismForm,"label-width":"100px",rules:e.rulesOrg}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构名称",prop:"orgName"}},[s("el-input",{model:{value:e.mechanismForm.orgName,callback:function(t){e.$set(e.mechanismForm,"orgName",t)},expression:"mechanismForm.orgName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构代码",prop:"orgenterCode"}},[s("el-input",{model:{value:e.mechanismForm.orgenterCode,callback:function(t){e.$set(e.mechanismForm,"orgenterCode",t)},expression:"mechanismForm.orgenterCode"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构简称",prop:"shortName"}},[s("el-input",{model:{value:e.mechanismForm.shortName,callback:function(t){e.$set(e.mechanismForm,"shortName",t)},expression:"mechanismForm.shortName"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"行政区划",prop:"regionCode"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择行政区划",disabled:e.areaDisabled},on:{change:e.regionCodeChange},model:{value:e.mechanismForm.regionCode,callback:function(t){e.$set(e.mechanismForm,"regionCode",t)},expression:"mechanismForm.regionCode"}},e._l(e.orgOptions,function(e){return s("el-option",{key:e.data.orgenterCode,attrs:{label:e.data.orgName,value:e.data.regionCode}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系人"}},[s("el-input",{model:{value:e.mechanismForm.linkman,callback:function(t){e.$set(e.mechanismForm,"linkman",t)},expression:"mechanismForm.linkman"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构负责人"}},[s("el-input",{model:{value:e.mechanismForm.leader,callback:function(t){e.$set(e.mechanismForm,"leader",t)},expression:"mechanismForm.leader"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"同级序号"}},[s("el-input",{model:{value:e.mechanismForm.orgOrder,callback:function(t){e.$set(e.mechanismForm,"orgOrder",t)},expression:"mechanismForm.orgOrder"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"邮政编码"}},[s("el-input",{model:{value:e.mechanismForm.zip,callback:function(t){e.$set(e.mechanismForm,"zip",t)},expression:"mechanismForm.zip"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"主管部门"}},[s("el-input",{model:{value:e.mechanismForm.superdept,callback:function(t){e.$set(e.mechanismForm,"superdept",t)},expression:"mechanismForm.superdept"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"机构地址"}},[s("el-input",{model:{value:e.mechanismForm.orgAddr,callback:function(t){e.$set(e.mechanismForm,"orgAddr",t)},expression:"mechanismForm.orgAddr"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"机构描述"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.mechanismForm.orgDesc,callback:function(t){e.$set(e.mechanismForm,"orgDesc",t)},expression:"mechanismForm.orgDesc"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"请选择险种"}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")])],1),e._v(" "),s("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),s("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return s("el-checkbox",{key:t.id,staticStyle:{width:"100px"},attrs:{label:t.id}},[e._v(e._s(t.codeName))])}),1)],1)],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCreate("ruleForm")}}},[e._v(e._s(e.addOrEdit))]),e._v(" "),s("el-button",{on:{click:function(t){e.isTable=!0}}},[e._v("取消")])],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isTable,expression:"isTable"}]},[s("el-row",[s("div",{staticStyle:{"text-align":"right"}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isTypeZore,expression:"isTypeZore"}],attrs:{type:"primary"},on:{click:e.addOrg}},[e._v("新建机构")])],1)]),e._v(" "),s("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"row-click":e.rowExpand}},[e._e(),e._v(" "),s("el-table-column",{attrs:{prop:"orgName",label:"机构名称",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"linkman",label:"创建人员",width:"80"}}),e._v(" "),s("el-table-column"),e._v(" "),s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticStyle:{"border-bottom":"1px #ccc solid","padding-left":"20px"}},[s("el-button",{attrs:{type:"text"},on:{click:function(a){return e.addDepart(t.row)}}},[e._v("新增科室")]),e._v(" "),s("span",[e._v("丨")]),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("详情")]),e._v(" "),s("span",[e._v("丨")]),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(a){return e.logout(t.row)}}},[e._v("注销")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.row.isShow&&!t.row.departList.length,expression:"scope.row.isShow && !scope.row.departList.length"}],staticStyle:{"text-align":"center",margin:"10px 0"}},[s("img",{staticStyle:{widht:"60px",height:"60px"},attrs:{src:a("VbHD"),alt:""}}),e._v(" "),s("div",[e._v("暂无数据")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.row.isShow&&t.row.departList.length,expression:"scope.row.isShow && scope.row.departList.length"}],staticStyle:{display:"flex","flex-wrap":"wrap",margin:"20px 30px"}},e._l(t.row.departList,function(a,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.row.isShow,expression:"scope.row.isShow"}],key:a.id},[s("div",{staticStyle:{display:"flex","align-items":"center","padding-left":"20px",border:"1px solid","margin-top":"10px","margin-right":"30px","border-radius":"5px"}},[s("div",{staticStyle:{cursor:"pointer","margin-right":"20px"},on:{click:function(s){return e.editDepart(a.id,t.row,i)}}},[e._v(e._s(a.name))]),e._v(" "),s("div",{staticStyle:{cursor:"pointer",height:"100%",padding:"10px 20px","border-left":"1px solid"},on:{click:function(s){return s.stopPropagation(),e.deleteDepart(a.id,t.row,i)}}},[s("i",{staticClass:"el-icon-delete"})])])])}),0)]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"page-size":10,layout:"prev, pager, next",total:e.tableDatas.length},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),e.isView?s("div",[s("el-form",[s("div",{staticClass:"topPart"},[s("div",{staticClass:"topPart1"},[s("span",{staticClass:"viewName"},[e._v("机构名称：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.orgName))])]),e._v(" "),s("div",{staticClass:"topPart2"},[s("span",{staticClass:"viewName"},[e._v("机构代码：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.orgenterCode))])])]),e._v(" "),s("div",{staticClass:"topPart"},[s("div",{staticClass:"topPart1"},[s("span",{staticClass:"viewName"},[e._v("机构简称：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.shortName))])]),e._v(" "),s("div",{staticClass:"topPart2"},[s("span",{staticClass:"viewName"},[e._v("联系人：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.linkman))])])]),e._v(" "),s("div",{staticClass:"topPart"},[s("div",{staticClass:"topPart1"},[s("span",{staticClass:"viewName"},[e._v("机构负责人：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.leader))])]),e._v(" "),s("div",{staticClass:"topPart2"},[s("span",{staticClass:"viewName"},[e._v("邮政编码：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.zip))])])]),e._v(" "),s("div",{staticClass:"bottomPart"},[s("span",{staticClass:"viewName"},[e._v("主管部门：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.superdept))])]),e._v(" "),s("div",{staticClass:"bottomPart"},[s("span",{staticClass:"viewName"},[e._v("机构地址：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.orgAddr))])]),e._v(" "),s("div",{staticClass:"bottomPart"},[s("span",{staticClass:"viewName"},[e._v("机构描述：")]),e._v(" "),s("span",{staticClass:"viewValue"},[e._v(e._s(e.mechanismForm.orgDesc))])]),e._v(" "),s("div",{staticStyle:{"margin-top":"200px"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isEdit=!0}}},[e._v("编辑")]),e._v(" "),s("el-button",{on:{click:function(t){e.isTable=!0}}},[e._v("返回")])],1)])],1):e._e(),e._v(" "),e.isEdit?s("el-form",{ref:"ruleForm",staticStyle:{"margin-top":"20px"},attrs:{model:e.mechanismForm,"label-width":"100px",rules:e.rulesOrg}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构名称",prop:"orgName"}},[s("el-input",{model:{value:e.mechanismForm.orgName,callback:function(t){e.$set(e.mechanismForm,"orgName",t)},expression:"mechanismForm.orgName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构代码",prop:"orgenterCode"}},[s("el-input",{model:{value:e.mechanismForm.orgenterCode,callback:function(t){e.$set(e.mechanismForm,"orgenterCode",t)},expression:"mechanismForm.orgenterCode"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构简称",prop:"shortName"}},[s("el-input",{model:{value:e.mechanismForm.shortName,callback:function(t){e.$set(e.mechanismForm,"shortName",t)},expression:"mechanismForm.shortName"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"行政区划",prop:"regionCode"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择行政区划",disabled:e.areaDisabled},on:{change:e.regionCodeChange},model:{value:e.mechanismForm.regionCode,callback:function(t){e.$set(e.mechanismForm,"regionCode",t)},expression:"mechanismForm.regionCode"}},e._l(e.orgOptions,function(e){return s("el-option",{key:e.data.regionCode,attrs:{label:e.data.orgName,value:e.data.regionCode}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系人"}},[s("el-input",{model:{value:e.mechanismForm.linkman,callback:function(t){e.$set(e.mechanismForm,"linkman",t)},expression:"mechanismForm.linkman"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构负责人"}},[s("el-input",{model:{value:e.mechanismForm.leader,callback:function(t){e.$set(e.mechanismForm,"leader",t)},expression:"mechanismForm.leader"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"同级序号"}},[s("el-input",{model:{value:e.mechanismForm.orgOrder,callback:function(t){e.$set(e.mechanismForm,"orgOrder",t)},expression:"mechanismForm.orgOrder"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"邮政编码"}},[s("el-input",{model:{value:e.mechanismForm.zip,callback:function(t){e.$set(e.mechanismForm,"zip",t)},expression:"mechanismForm.zip"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"主管部门"}},[s("el-input",{model:{value:e.mechanismForm.superdept,callback:function(t){e.$set(e.mechanismForm,"superdept",t)},expression:"mechanismForm.superdept"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"机构地址"}},[s("el-input",{model:{value:e.mechanismForm.orgAddr,callback:function(t){e.$set(e.mechanismForm,"orgAddr",t)},expression:"mechanismForm.orgAddr"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"机构描述"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.mechanismForm.orgDesc,callback:function(t){e.$set(e.mechanismForm,"orgDesc",t)},expression:"mechanismForm.orgDesc"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"请选择险种"}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")])],1),e._v(" "),s("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),s("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return s("el-checkbox",{key:t.id,staticStyle:{width:"100px"},attrs:{label:t.id}},[e._v(e._s(t.codeName))])}),1)],1)],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCreate("ruleForm")}}},[e._v(e._s(e.addOrEdit))]),e._v(" "),s("el-button",{on:{click:function(t){e.isTable=!0}}},[e._v("取消")])],1)],1):e._e()],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.diaTitle1,visible:e.addDia1,width:"60%"},on:{"update:visible":function(t){e.addDia1=t}}},[s("el-form",{ref:"ruleForm1",staticStyle:{"margin-top":"20px"},attrs:{model:e.departFrom,"label-width":"100px",rules:e.rulesOrg1}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"科室名称",prop:"orgName"}},[s("el-input",{model:{value:e.departFrom.orgName,callback:function(t){e.$set(e.departFrom,"orgName",t)},expression:"departFrom.orgName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"科室代码",prop:"orgenterCode"}},[s("el-input",{model:{value:e.departFrom.orgenterCode,callback:function(t){e.$set(e.departFrom,"orgenterCode",t)},expression:"departFrom.orgenterCode"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"所属机构",prop:"regionCode"}},[s("el-input",{attrs:{disabled:""},model:{value:e.rowOrgName,callback:function(t){e.rowOrgName=t},expression:"rowOrgName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"联系人",prop:"linkman"}},[s("el-input",{model:{value:e.departFrom.linkman,callback:function(t){e.$set(e.departFrom,"linkman",t)},expression:"departFrom.linkman"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"科室负责人"}},[s("el-input",{model:{value:e.departFrom.leader,callback:function(t){e.$set(e.departFrom,"leader",t)},expression:"departFrom.leader"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"科室简称"}},[s("el-input",{model:{value:e.departFrom.shortName,callback:function(t){e.$set(e.departFrom,"shortName",t)},expression:"departFrom.shortName"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"科室描述"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.departFrom.orgDesc,callback:function(t){e.$set(e.departFrom,"orgDesc",t)},expression:"departFrom.orgDesc"}})],1)],1)],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.addDia1=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.departAddEdit("ruleForm1")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{staticClass:"loadingDialog",attrs:{visible:e.mainLoading,width:"30%","show-close":!1,"close-on-click-modal":!1,top:"30vh"},on:{"update:visible":function(t){e.mainLoading=t}}},[s("div",{staticClass:"loadingContent"},[s("i",{staticClass:"el-icon-loading"}),e._v(" "),s("div",[e._v("正在同步审核层级，请稍等……")])])])],1)},staticRenderFns:[]};var A=a("VU/8")(L,$,!1,function(e){a("TDFD")},"data-v-5b8bf008",null).exports,P=a("Dd8w"),M=a.n(P),z={nodeType:[{id:"1",title:"父菜单",disabled:!1},{id:"2",title:"子菜单",disabled:!1},{id:"3",title:"按钮",disabled:!1}],funType:[{id:"0",title:"通用"},{id:"1",title:"系统菜单"},{id:"2",title:"业务菜单"}],isUse:[{id:"1",title:"生效"},{id:"0",title:"失效"}],effectiveSign:[{id:"1",title:"有效"},{id:"0",title:"无效"}],maintainSign:[{id:"1",title:"可维护"},{id:"0",title:"不可维护"}],rollbackFlag:[{id:"0",title:"正常"},{id:"1",title:"已退"}],auditHierarchy:[{id:"0",title:"自动审核"},{id:"1",title:"一级审核"},{id:"2",title:"二级审核"},{id:"3",title:"三级审核"}],funLevel:[{id:"1",title:"省级"},{id:"2",title:"市级"}],dict_userType:[{id:"1",title:"超级管理员"},{id:"2",title:"系统管理员"},{id:"3",title:"机构管理员"},{id:"4",title:"业务操作员"}]},U={inject:["reload"],data:function(){return{ls_userType:"",dict_userType:[],treePopor:{children:"children",label:function(e,t){return e.orgName?e.orgName:e.displayName?e.displayName:void 0}},upDataOrgId:"",upDataRoleId:"",upLoadUserList:[],roleSelected_userCode:[],userAndRoleData:[],formInline:{roleName:"",roleDesc:"",roleType:"",orgId:[]},KYCXarr:[],KYCXsavearr:[],KYCXprop:{label:"orgName",children:"children"},KYCXloading:!0,KYCXallarr:[],KYCXallsavearr:[],muToKYCXFlag:!1,getTreeData:[],localSearchFlag:!1,selectItemType:[],localSearchInfo:{itemType:null,row:null},showAreaName:null,localSearchitemTypeaRR:[],options:[],roleTitle:"创建角色",tableData:[],multipleSelection:[],defaultSysData:[],defaultTreeData:[],treeData:[],sysData1:[],sysData2:[],sysData3:[],sysData4:[],sysData5:[],sysData6:[],sysData7:[],sysData8:[],sysData9:[],sysData10:[],defaultProps:{children:"children",label:"label"},orgProps:{children:"children",label:"orgName",value:"id",checkStrictly:!0},props:{label:"name",children:"zones"},roleForm:{roleName:"",roleDesc:"",roleType:"",orgModel:[],position:""},currentSysList:[],roleTotal:1,dialogRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{max:20,message:"最多20个字符",trigger:"blur"}],orgModel:[{required:!0,message:"请输入所属机构",trigger:"blur"}]},dialogFormVisible:!1,count:1,activeName:"2",currentPage:1,dialogTableVisible:!1,dialogTableAdd:!1,systemName:!0,page:1,size:10,treeId:"",roleIdList:[],editId:"",positionEdit:!1}},created:function(){var e=this;this.initTable(),this.initTree(),this.ls_userType=this.$Base64.decode(localStorage.getItem("userType"));var t=[];switch(this.ls_userType){case"1":z.dict_userType.forEach(function(e){var a=JSON.parse(D()(e));a.queryVisible=!0,"2"===e.id&&(a.addVisible=!0),"3"===e.id&&(a.addVisible=!0),t.push(a)}),this.dict_userType=t;break;case"2":z.dict_userType.forEach(function(e){var a=JSON.parse(D()(e));"3"===e.id&&(a.queryVisible=!0,a.addVisible=!0),"4"===e.id&&(a.queryVisible=!0),t.push(a)}),this.dict_userType=t;break;case"3":this.roleForm.roleType="4",z.dict_userType.forEach(function(e){var a=JSON.parse(D()(e));"4"===e.id&&(a.queryVisible=!0,a.addVisible=!0),t.push(a)}),this.dict_userType=t}this.$post("/sysTranScopeManage/tranList").then(function(t){t.success&&(e.localSearchitemTypeaRR=t.result.map(function(e){return{label:e.title+(e.groupName&&""!==e.groupName?"（"+e.groupName+"）":""),value:e.id}}),e.selectItemType.push(e.localSearchitemTypeaRR[0].value))}),this.$get("/sys/user/getMyUserInfo").then(function(t){t.data.success&&(e.showAreaName=t.data.result.areaNameWithParent)})},watch:{roleTitle:function(e){this.positionEdit="修改角色"==e},localSearchFlag:function(e){!1===e&&(this.selectItemType=[],this.localSearchInfo.row=null,this.KYCXsavearr=[],this.KYCXallarr=[],this.KYCXallsavearr=[],this.muToKYCXFlag=!1)}},computed:{downloadUrl:function(){var e="/api/test/exportrole?";for(var t in this.formInline)"orgId"===t?this.formInline[t].length>0&&(e=e+"orgId="+this.formInline[t][this.formInline[t].length-1]+"&"):""!==this.formInline[t]&&(e=e+t+"="+this.formInline[t]+"&");return e.substring(0,e.length-1)},tableHeight:function(){return window.innerHeight-240}},methods:{CheckKYCXChange:function(){var e=this;this.$nextTick(function(){e.KYCXallsavearr=e.$refs.KYCXtree.getCheckedKeys()})},localSearch:function(e){var t=this,a={};e?(this.localSearchInfo.row=e,a.belongRoleId=e.id):this.localSearchInfo.row&&(a.belongRoleId=this.localSearchInfo.row.id),a.functionIds=this.selectItemType.join(),this.KYCXloading=!0,this.$get("/sysTranScopeManage/sysFunctionScopeTreeForOrgs",a).then(function(e){e.data.success?(t.KYCXallarr=e.data.result.orgTree,t.KYCXallsavearr=e.data.result.hasPermissionList,t.$nextTick(function(){t.$refs.KYCXtree.setCheckedKeys(t.KYCXallsavearr)}),t.KYCXloading=!1):t.$message({type:"error",message:e.data.resultDes})}),this.localSearchFlag=!0},muToLocalSearch:function(){var e=this;0===this.multipleSelection.length?this.$message({type:"warning",message:"请先选择角色！"}):(this.muToKYCXFlag=!0,this.localSearchInfo.itemType=this.localSearchitemTypeaRR[0].value,this.KYCXloading=!0,this.$get("/sysTranScopeManage/sysFunctionScopeTreeForOrgs",{functionIds:this.selectItemType.join()}).then(function(t){t.data.success?(e.KYCXallarr=t.data.result.orgTree,e.KYCXallsavearr=t.data.result.hasPermissionList,e.$nextTick(function(){e.$refs.KYCXtree.setCheckedKeys(e.KYCXallsavearr),e.KYCXloading=!1})):e.$message({type:"error",message:t.data.resultDes})}),this.localSearchFlag=!0)},changeKYCXxz:function(e){this.localSearch()},saveLocalSearch:function(){var e=this,t=void 0;t=this.selectItemType.length?this.selectItemType.join().split(","):this.selectItemType,this.muToKYCXFlag?this.$post("/sysTranScopeManage/batchSaveSysFunctionScopeForOrgs",{belongRoleIds:this.multipleSelection.map(function(e){return e.id}),funcIds:t,orgIds:this.KYCXallsavearr}).then(function(t){t.success?(e.localSearchFlag=!1,e.$message({type:"success",message:"事项保存成功！"})):e.$message({type:"error",message:"事项保存失败！"})}):this.$post("/sysTranScopeManage/saveSysFunctionScopeForOrgs",{belongRoleId:this.localSearchInfo.row.id,funcIds:t,orgIds:this.KYCXallsavearr}).then(function(t){t.success?(e.localSearchFlag=!1,e.$message({type:"success",message:"事项保存成功！"})):e.$message({type:"error",message:"事项保存失败！"})})},selectableFilterFn:function(e,t){return!!("admin"!==this.$Base64.decode(localStorage.getItem("uesr")))||"3"===e.roleType},handleSelectionChange:function(e){this.multipleSelection=e},roleCheckChange:function(e){var t=[],a=!0,s=!1,i=void 0;try{for(var r,n=S()(this.$refs.roleTree.getCheckedNodes());!(a=(r=n.next()).done);a=!0){var o=r.value;o.userCode&&t.push({userId:o.userCode})}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}this.upLoadUserList=t},tableAdd:function(e,t){var a=this;this.dialogTableAdd=!0,this.upDataOrgId=t.orgId,this.upDataRoleId=t.id,this.$get("/sys/role/querySysUserByRoleId",{orgId:t.orgId,roleId:t.id,roleType:t.roleType}).then(function(e){if(e.data.success)for(var t in a.userAndRoleData=[],a.userAndRoleData=e.data.result.userListTreeArray||[],a.roleSelected_userCode=[],e.data.result.userAndRoleList)a.roleSelected_userCode.push(Number(e.data.result.userAndRoleList[t].userId));else a.$message({type:"error",message:e.data.resultDes})})},settingAddSave:function(){var e=this;this.$post("/sys/role/addUserInRole",{orgId:this.upDataOrgId,roleId:this.upDataRoleId,userlist:this.upLoadUserList}).then(function(t){t.success?(e.dialogTableAdd=!1,e.$message({type:"success",message:"角色添加用户成功!"})):e.$message({type:"error",message:t.resultDes})})},tableCopy:function(e,t){var a=this;this.$post("/sys/role/addCopySysRole",{id:t.id}).then(function(e){e.success?(a.initTable(),a.$message({type:"success",message:"复制成功!"})):a.$message({type:"error",message:e.resultDes})})},beforeUpload:function(){if(!this.formInline.orgId)return this.$message({type:"error",message:"请选择所属机构！"}),!1},initTree:function(){var e=this;this.$get("/sys/org/queryTree").then(function(t){t.data.success&&(e.options=t.data.result)})},clearableChange:function(e){this.formInline.roleType=null===e?"":e},handleChange:function(){},handleChange1:function(){},initTable:function(){var e=this;this.$get("/sys/role/queryTable",M()({page:this.page,size:this.size},this.formInline,{orgId:this.formInline.orgId.length?this.formInline.orgId[this.formInline.orgId.length-1]:""})).then(function(t){t.data.pageList.success&&(e.tableData=t.data.pageList.result,e.roleTotal=Number(t.data.count))})},closeDialog:function(e){this.$refs[e].resetFields()},onSearch:function(){this.page=1,this.initTable()},sysChange:function(e,t,a){this.currentSysList=[];var s=!0,i=!1,r=void 0;try{for(var n,o=S()(this.$refs.sysTree1.getCheckedKeys());!(s=(n=o.next()).done);s=!0){var l=n.value;this.currentSysList.push({functionId:l})}}catch(e){i=!0,r=e}finally{try{!s&&o.return&&o.return()}finally{if(i)throw r}}},settingEditSave:function(){var e=this,t=this.$refs.sysTree1.getCheckedKeys(),a=this.$refs.sysTree1.getHalfCheckedKeys(),s=this.$refs.sysTree2.getCheckedKeys(),i=this.$refs.sysTree2.getHalfCheckedKeys(),r=this.$refs.sysTree3.getCheckedKeys(),n=this.$refs.sysTree3.getHalfCheckedKeys(),o=this.$refs.sysTree4.getCheckedKeys(),l=this.$refs.sysTree4.getHalfCheckedKeys(),c=this.$refs.sysTree5.getCheckedKeys(),u=this.$refs.sysTree5.getHalfCheckedKeys(),d=this.$refs.sysTree6.getCheckedKeys(),p=this.$refs.sysTree6.getHalfCheckedKeys(),m=this.$refs.sysTree7.getCheckedKeys(),h=this.$refs.sysTree7.getHalfCheckedKeys(),f=this.$refs.sysTree8.getCheckedKeys(),g=this.$refs.sysTree8.getHalfCheckedKeys(),v=this.$refs.sysTree9.getCheckedKeys(),y=this.$refs.sysTree9.getHalfCheckedKeys(),b=this.$refs.sysTree10.getCheckedKeys(),_=this.$refs.sysTree10.getHalfCheckedKeys(),w=[],C=!0,k=!1,x=void 0;try{for(var I,F=S()(t);!(C=(I=F.next()).done);C=!0){var T=I.value;w.push({functionId:T,selectState:0})}}catch(e){k=!0,x=e}finally{try{!C&&F.return&&F.return()}finally{if(k)throw x}}var N=!0,D=!1,L=void 0;try{for(var $,A=S()(a);!(N=($=A.next()).done);N=!0){var P=$.value;w.push({functionId:P,selectState:1})}}catch(e){D=!0,L=e}finally{try{!N&&A.return&&A.return()}finally{if(D)throw L}}var M=!0,z=!1,U=void 0;try{for(var R,B=S()(s);!(M=(R=B.next()).done);M=!0){var O=R.value;w.push({functionId:O,selectState:0})}}catch(e){z=!0,U=e}finally{try{!M&&B.return&&B.return()}finally{if(z)throw U}}var E=!0,V=!1,q=void 0;try{for(var j,K=S()(i);!(E=(j=K.next()).done);E=!0){var H=j.value;w.push({functionId:H,selectState:1})}}catch(e){V=!0,q=e}finally{try{!E&&K.return&&K.return()}finally{if(V)throw q}}var Q=!0,X=!1,Z=void 0;try{for(var W,J=S()(r);!(Q=(W=J.next()).done);Q=!0){var Y=W.value;w.push({functionId:Y,selectState:0})}}catch(e){X=!0,Z=e}finally{try{!Q&&J.return&&J.return()}finally{if(X)throw Z}}var G=!0,ee=!1,te=void 0;try{for(var ae,se=S()(n);!(G=(ae=se.next()).done);G=!0){var ie=ae.value;w.push({functionId:ie,selectState:1})}}catch(e){ee=!0,te=e}finally{try{!G&&se.return&&se.return()}finally{if(ee)throw te}}var re=!0,ne=!1,oe=void 0;try{for(var le,ce=S()(o);!(re=(le=ce.next()).done);re=!0){var ue=le.value;w.push({functionId:ue,selectState:0})}}catch(e){ne=!0,oe=e}finally{try{!re&&ce.return&&ce.return()}finally{if(ne)throw oe}}var de=!0,pe=!1,me=void 0;try{for(var he,fe=S()(l);!(de=(he=fe.next()).done);de=!0){var ge=he.value;w.push({functionId:ge,selectState:1})}}catch(e){pe=!0,me=e}finally{try{!de&&fe.return&&fe.return()}finally{if(pe)throw me}}var ve=!0,ye=!1,be=void 0;try{for(var _e,we=S()(c);!(ve=(_e=we.next()).done);ve=!0){var Ce=_e.value;w.push({functionId:Ce,selectState:0})}}catch(e){ye=!0,be=e}finally{try{!ve&&we.return&&we.return()}finally{if(ye)throw be}}var ke=!0,xe=!1,Ie=void 0;try{for(var Fe,Te=S()(u);!(ke=(Fe=Te.next()).done);ke=!0){var Se=Fe.value;w.push({functionId:Se,selectState:1})}}catch(e){xe=!0,Ie=e}finally{try{!ke&&Te.return&&Te.return()}finally{if(xe)throw Ie}}var Ne=!0,De=!1,Le=void 0;try{for(var $e,Ae=S()(d);!(Ne=($e=Ae.next()).done);Ne=!0){var Pe=$e.value;w.push({functionId:Pe,selectState:0})}}catch(e){De=!0,Le=e}finally{try{!Ne&&Ae.return&&Ae.return()}finally{if(De)throw Le}}var Me=!0,ze=!1,Ue=void 0;try{for(var Re,Be=S()(p);!(Me=(Re=Be.next()).done);Me=!0){var Oe=Re.value;w.push({functionId:Oe,selectState:1})}}catch(e){ze=!0,Ue=e}finally{try{!Me&&Be.return&&Be.return()}finally{if(ze)throw Ue}}var Ee=!0,Ve=!1,qe=void 0;try{for(var je,Ke=S()(m);!(Ee=(je=Ke.next()).done);Ee=!0){var He=je.value;w.push({functionId:He,selectState:0})}}catch(e){Ve=!0,qe=e}finally{try{!Ee&&Ke.return&&Ke.return()}finally{if(Ve)throw qe}}var Qe=!0,Xe=!1,Ze=void 0;try{for(var We,Je=S()(h);!(Qe=(We=Je.next()).done);Qe=!0){var Ye=We.value;w.push({functionId:Ye,selectState:1})}}catch(e){Xe=!0,Ze=e}finally{try{!Qe&&Je.return&&Je.return()}finally{if(Xe)throw Ze}}var Ge=!0,et=!1,tt=void 0;try{for(var at,st=S()(f);!(Ge=(at=st.next()).done);Ge=!0){var it=at.value;w.push({functionId:it,selectState:0})}}catch(e){et=!0,tt=e}finally{try{!Ge&&st.return&&st.return()}finally{if(et)throw tt}}var rt=!0,nt=!1,ot=void 0;try{for(var lt,ct=S()(g);!(rt=(lt=ct.next()).done);rt=!0){var ut=lt.value;w.push({functionId:ut,selectState:1})}}catch(e){nt=!0,ot=e}finally{try{!rt&&ct.return&&ct.return()}finally{if(nt)throw ot}}var dt=!0,pt=!1,mt=void 0;try{for(var ht,ft=S()(v);!(dt=(ht=ft.next()).done);dt=!0){var gt=ht.value;w.push({functionId:gt,selectState:0})}}catch(e){pt=!0,mt=e}finally{try{!dt&&ft.return&&ft.return()}finally{if(pt)throw mt}}var vt=!0,yt=!1,bt=void 0;try{for(var _t,wt=S()(y);!(vt=(_t=wt.next()).done);vt=!0){var Ct=_t.value;w.push({functionId:Ct,selectState:1})}}catch(e){yt=!0,bt=e}finally{try{!vt&&wt.return&&wt.return()}finally{if(yt)throw bt}}var kt=!0,xt=!1,It=void 0;try{for(var Ft,Tt=S()(b);!(kt=(Ft=Tt.next()).done);kt=!0){var St=Ft.value;w.push({functionId:St,selectState:0})}}catch(e){xt=!0,It=e}finally{try{!kt&&Tt.return&&Tt.return()}finally{if(xt)throw It}}var Nt=!0,Dt=!1,Lt=void 0;try{for(var $t,At=S()(_);!(Nt=($t=At.next()).done);Nt=!0){var Pt=$t.value;w.push({functionId:Pt,selectState:1})}}catch(e){Dt=!0,Lt=e}finally{try{!Nt&&At.return&&At.return()}finally{if(Dt)throw Lt}}var Mt="",zt={};this.treeId&&(zt={roleId:this.treeId,treeInfo:w},Mt="/sys/role/addRoleRef"),this.roleIdList.length&&(zt={roleIdList:this.roleIdList,treeInfo:w},Mt="/sys/role/patchAddRoleRef"),this.$post(Mt,zt).then(function(t){t.success&&(e.initTable(),e.dialogTableVisible=!1,e.$message({type:"success",message:t.resultDes}),e.treeId="",e.roleIdList=[]),e.$refs.multipleTable.clearSelection()})},roleEditSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"修改角色"==t.roleTitle?t.$post("/sys/role/updateRole",{roleName:t.roleForm.roleName,roleDesc:t.roleForm.roleDesc,roleType:t.roleForm.roleType,orgId:t.roleForm.orgModel[t.roleForm.orgModel.length-1],id:t.editId}).then(function(e){t.$mess(e),t.dialogFormVisible=!1,t.initTable()}):t.$post("/sys/role/addSysRole",{roleName:t.roleForm.roleName,roleDesc:t.roleForm.roleDesc,roleType:t.roleForm.roleType,position:t.roleForm.position,orgId:t.roleForm.orgModel[t.roleForm.orgModel.length-1]}).then(function(e){t.$mess(e),e.success&&(t.initTable(),t.dialogFormVisible=!1)})})},onAddUser:function(){this.roleForm.roleName="",this.roleForm.roleDesc="",this.roleForm.position="",this.dialogFormVisible=!0,this.positionEdit=!1,this.roleTitle="创建角色"},onAccessConfig:function(){var e=this;if(0===this.multipleSelection.length)this.$message({type:"warning",message:"请先选择角色！"});else{var t=this,a=[];this.multipleSelection.forEach(function(t,s){e.roleIdList.push(t.id),a.push({id:t.id,roleType:t.roleType})}),this.$post("/sys/role/pitchQueryTree",{queryTreeList:a}).then(function(a){t.reQueryTreeData(a,e.roleIdList)})}},handleSizeChange:function(e){this.size=e,this.initTable()},handleCurrentChange:function(e){this.page=e,this.initTable()},reQueryTreeData:function(e,t){this.defaultSysData=[],this.dialogTableVisible=!0,this.sysData1=[],this.sysData2=[],this.sysData3=[],this.sysData4=[],this.sysData5=[],this.sysData6=[],this.sysData7=[],this.sysData8=[],this.sysData9=[],this.sysData10=[],e.result.result[1]&&(this.sysData1=e.result.result[1]),e.result.result[2]&&(this.sysData2=e.result.result[2]),e.result.result[3]&&(this.sysData3=e.result.result[3]),e.result.result[4]&&(this.sysData4=e.result.result[4]),e.result.result[5]&&(this.sysData5=e.result.result[5]),e.result.result[6]&&(this.sysData6=e.result.result[6]),e.result.result[7]&&(this.sysData7=e.result.result[7]),e.result.result[8]&&(this.sysData8=e.result.result[8]),e.result.result[9]&&(this.sysData9=e.result.result[9]),e.result.result[10]&&(this.sysData10=e.result.result[10]);var a=!0,s=!1,i=void 0;try{for(var r,n=S()(e.rfList);!(a=(r=n.next()).done);a=!0){var o=r.value;"0"!=o.selectState&&""!=o.selectState||this.defaultSysData.push(o.functionId)}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}},settingDialog:function(e,t){var a=this;this.treeId=t.id,this.$get("/sys/role/queryTree",{roleType:t.roleType,roleId:t.id}).then(function(e){a.reQueryTreeData(e.data,t.id)})},tableEdit:function(e,t){var a=this;this.roleTitle="修改角色",this.editId=t.id,this.dialogFormVisible=!0;var s=F()({},t);this.roleForm.roleName=s.roleName,this.roleForm.roleDesc=s.roleDesc,this.roleForm.roleType=s.roleType,this.$get("sys/role/detail",{roleId:t.id}).then(function(e){if(e.data.success){a.roleForm.orgModel=e.data.result.idpath.split("/");for(var t=a.roleForm.orgModel.length,s=0;s<t;s++)a.roleForm.orgModel[s]=parseInt(a.roleForm.orgModel[s])}})}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{staticClass:"demo-form-inline searchFrom",attrs:{size:"small",inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"所属机构"}},[a("el-cascader",{staticStyle:{width:"190px"},attrs:{"expand-trigger":"hover",clearable:"",options:e.options,props:e.orgProps,"show-all-levels":!1},model:{value:e.formInline.orgId,callback:function(t){e.$set(e.formInline,"orgId",t)},expression:"formInline.orgId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型"}},[a("el-select",{staticStyle:{width:"190px"},attrs:{clearable:"",placeholder:"角色类型"},on:{change:e.clearableChange},model:{value:e.formInline.roleType,callback:function(t){e.$set(e.formInline,"roleType",t)},expression:"formInline.roleType"}},e._l(e.dict_userType,function(e){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.queryVisible,expression:"item.queryVisible"}],key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"请输入角色名称"},model:{value:e.formInline.roleName,callback:function(t){e.$set(e.formInline,"roleName",t)},expression:"formInline.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"角色描述"},model:{value:e.formInline.roleDesc,callback:function(t){e.$set(e.formInline,"roleDesc",t)},expression:"formInline.roleDesc"}})],1)],1),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onAddUser}},[e._v("添加角色")]),e._v(" "),"1"===e.ls_userType||"2"===e.ls_userType?a("span",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onAccessConfig}},[e._v("权限配置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.muToLocalSearch}},[e._v("查询配置")])],1):e._e()],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,"row-key":"id"},on:{"selection-change":e.handleSelectionChange}},[e._v("\n    >\n    "),"1"===e.ls_userType||"2"===e.ls_userType?a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,selectable:e.selectableFilterFn,width:"55"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"所属机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleType | userType",label:"角色类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("userType")(t.row.roleType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-search",attrs:{title:"跨域查询"},on:{click:function(a){return e.localSearch(t.row)}}}),e._v(" "),a("i",{staticClass:"el-icon-plus",attrs:{title:"添加用户"},on:{click:function(a){return e.tableAdd(t.$index,t.row)}}}),e._v(" "),a("i",{staticClass:"el-icon-edit",attrs:{title:"角色编辑"},on:{click:function(a){return e.tableEdit(t.$index,t.row)}}}),e._v(" "),a("i",{staticClass:"el-icon-setting",attrs:{title:"角色授权"},on:{click:function(a){return e.settingDialog(t.$index,t.row)}}}),e._v(" "),a("ep-delete",{attrs:{id:t.row.id,url:"/sys/role/deleteSysRole",parmeId:"roleId",init:!0},on:{init:e.initTable}},[a("i",{staticClass:"el-icon-delete",attrs:{title:"删除"}})]),e._v(" "),a("i",{staticClass:"el-icon-document-copy",attrs:{title:"复制角色"},on:{click:function(a){return e.tableCopy(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"pageblock"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.roleTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{staticClass:"diaPadding",attrs:{title:"跨域查询控制",visible:e.localSearchFlag,width:"40%"},on:{"update:visible":function(t){e.localSearchFlag=t}}},[a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("所属查询范围："+e._s(e.showAreaName))]),e._v(" "),a("span",[a("span",{staticStyle:{"margin-left":"27px"}},[e._v("查询事项：")]),e._v(" "),a("el-cascader",{attrs:{size:"mini",placeholder:"请选择查询事项",options:e.localSearchitemTypeaRR,props:{multiple:!0,checkStrictly:!0},clearable:""},on:{change:function(t){return e.changeKYCXxz(e.selectItemType)}},model:{value:e.selectItemType,callback:function(t){e.selectItemType=t},expression:"selectItemType"}})],1),e._v(" "),a("hr"),e._v(" "),a("el-card",{staticClass:"box-card card-top"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("可查询范围")])]),e._v(" "),e.selectItemType.length?e._e():a("div",[e._v("请先选择查询事项！")]),e._v(" "),e.selectItemType.length?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.KYCXloading,expression:"KYCXloading"}],ref:"KYCXtree",staticStyle:{"max-height":"300px",overflow:"auto"},attrs:{data:e.KYCXallarr,props:e.KYCXprop,"node-key":"id","show-checkbox":""},on:{"check-change":function(t){return e.CheckKYCXChange()}}}):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.localSearchFlag=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveLocalSearch}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"authorizeDialog",attrs:{center:"",title:"角色授权",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("div",{staticClass:"authorizeDialog_box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData1.length,expression:"sysData1.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("系统管理权限")]),e._v(" "),a("el-tree",{ref:"sysTree1",attrs:{data:e.sysData1,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData2.length,expression:"sysData2.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("经办系统权限")]),e._v(" "),a("el-tree",{ref:"sysTree2",attrs:{data:e.sysData2,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData3.length,expression:"sysData3.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("工伤系统权限")]),e._v(" "),a("el-tree",{ref:"sysTree3",attrs:{data:e.sysData3,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData4.length,expression:"sysData4.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("网报系统权限")]),e._v(" "),a("el-tree",{ref:"sysTree4",attrs:{data:e.sysData4,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData5.length,expression:"sysData5.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("城乡系统权限")]),e._v(" "),a("el-tree",{ref:"sysTree5",attrs:{data:e.sysData5,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData6.length,expression:"sysData6.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("开发运维一体化平台")]),e._v(" "),a("el-tree",{ref:"sysTree6",attrs:{data:e.sysData6,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData7.length,expression:"sysData7.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("数据开发工具")]),e._v(" "),a("el-tree",{ref:"sysTree7",attrs:{data:e.sysData7,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData8.length,expression:"sysData8.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("自助机管理系统")]),e._v(" "),a("el-tree",{ref:"sysTree8",attrs:{data:e.sysData8,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData9.length,expression:"sysData9.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("开放平台管理端")]),e._v(" "),a("el-tree",{ref:"sysTree9",attrs:{data:e.sysData9,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.sysData10.length,expression:"sysData10.length"}],staticClass:"authorizeDialog_div"},[a("p",[e._v("稽核风控系统")]),e._v(" "),a("el-tree",{ref:"sysTree10",attrs:{data:e.sysData10,"show-checkbox":"","node-key":"id","default-checked-keys":e.defaultSysData,"expand-on-click-node":!1,props:{key:"id",label:"title"},"default-expand-all":!1},on:{"check-change":e.sysChange}})],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.settingEditSave}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"createDialog",attrs:{"modal-append-to-body":!1,center:"",title:e.roleTitle,visible:e.dialogFormVisible,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.closeDialog("ruleForm")}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.roleForm,rules:e.dialogRules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:11,offset:4}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.roleForm.roleName,callback:function(t){e.$set(e.roleForm,"roleName",t)},expression:"roleForm.roleName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11,offset:4}},[a("el-form-item",{attrs:{label:"角色描述"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.roleForm.roleDesc,callback:function(t){e.$set(e.roleForm,"roleDesc",t)},expression:"roleForm.roleDesc"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11,offset:4}},[a("el-form-item",{attrs:{label:"角色类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"角色类型"},model:{value:e.roleForm.roleType,callback:function(t){e.$set(e.roleForm,"roleType",t)},expression:"roleForm.roleType"}},e._l(e.dict_userType,function(e){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.addVisible,expression:"item.addVisible"}],key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11,offset:4}},[a("el-form-item",{attrs:{label:"所属机构",prop:"orgModel"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{"expand-trigger":"hover",options:e.options,props:e.orgProps,"show-all-levels":!1},on:{change:e.handleChange},model:{value:e.roleForm.orgModel,callback:function(t){e.$set(e.roleForm,"orgModel",t)},expression:"roleForm.orgModel"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11,offset:4}},[a("el-form-item",{attrs:{label:"职位"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.positionEdit,placeholder:"请选择"},model:{value:e.roleForm.position,callback:function(t){e.$set(e.roleForm,"position",t)},expression:"roleForm.position"}},[a("el-option",{attrs:{label:"经办人",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"科长",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"主任",value:"3"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.roleEditSave("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{center:"",title:"添加用户",visible:e.dialogTableAdd},on:{"update:visible":function(t){e.dialogTableAdd=t}}},[a("el-tree",{ref:"roleTree",attrs:{data:e.userAndRoleData,"show-checkbox":"","default-expand-all":!1,"node-key":"userCode","default-checked-keys":e.roleSelected_userCode,props:e.treePopor},on:{"check-change":e.roleCheckChange}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableAdd=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.settingAddSave}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var B=a("VU/8")(U,R,!1,function(e){a("P66V")},"data-v-77266892",null).exports,O={data:function(){var e=this;return{ls_userType:"",dict_userType:[],uploadData:{isPublic:"1"},defaultCheck:[],defaultExpand:[],areaProps:{label:"areaName"},areaEdit:!1,canEdit:!1,pickerOptions1:{disabledDate:function(e){return e.getTime()<=Date.now()}},orgTableData:[{orgId:[],departmentId:[],departmentList:[],roleList:[],transferList:[]}],disabledOrgId:!1,treeData:[],areaList:[],pwTime:!0,orgIdOptions:[],props:{label:"orgName",value:"id"},props1:{label:"regionCode",value:"id"},formInline:{logonName:"",displayName:"",orgId:[],userState:"",userType:""},dialogFormRules:{logonName:[{required:!0,message:"请输入登录名",trigger:"blur"}],displayName:[{required:!0,message:"请输入姓名",trigger:"blur"}],userType:[{required:!0,message:"请输入用户类型",trigger:"blur"}],orgName:[{required:!0,message:"请输入所属地区",trigger:"blur"}],departmentId:[{required:!0,message:"请输入所属科室",trigger:"blur"}],orgId:[{required:!0,message:"请选择所属机构",trigger:"blur"}],passwd:[{required:!0,message:"请输入密码",trigger:"blur"}],cardId:[{required:!0,message:"请输入身份证号",trigger:"blur"}],tel:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:function(e,t,a){var s=!0;/0?(13|14|15|17|18|19)[0-9]{9}/.test(t)||(s=!1),s?a():a(new Error("请输入正确的联系电话"))},trigger:"blur"}],checkPass:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:function(t,a,s){a!==e.userInfo.passwd?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],orgIds:[{required:!0,message:"请选择关联机构",trigger:"change"}]},orgNameOptions:[],areaNameOptions:[],orgName:[],user:{},avatarUrl:"",userType_dfval:"",userInfo:{headUrl:"",logonName:"",displayName:"",userType:"",checkPass:"",passwd:"",userExpireDate:"",pwExpireType:"",pwExpireDate:"",cardType:"",cardId:"",tel:"",department:"",shortName:"",orgId:"",orgList:[{orgId:[],roleList:[],areaId:"",departmentId:[],departmentList:[],transferList:[]}],ythUserId:""},checkList:[],transferData:[],page:1,size:10,dialogTitle:"添加用户",tableData:[],dialogFormVisible:!1,settingTotal:0}},created:function(){var e=this;this.ls_userType=this.$Base64.decode(localStorage.getItem("userType"));var t=[];switch(this.ls_userType){case"1":this.userType_dfval="2",this.userInfo.userType="2",z.dict_userType.forEach(function(e){var a=JSON.parse(D()(e));a.queryVisible=!0,"2"===e.id&&(a.addVisible=!0),"3"===e.id&&(a.addVisible=!0),t.push(a)}),this.dict_userType=t;break;case"2":this.userType_dfval="3",this.userInfo.userType="3",z.dict_userType.forEach(function(e){var a=JSON.parse(D()(e));"3"===e.id&&(a.queryVisible=!0,a.addVisible=!0),"4"===e.id&&(a.queryVisible=!0),t.push(a)}),this.dict_userType=t;break;case"3":this.userType_dfval="4",this.userInfo.userType="4",z.dict_userType.forEach(function(e){var a=JSON.parse(D()(e));"4"===e.id&&(a.queryVisible=!0,a.addVisible=!0),t.push(a)}),this.dict_userType=t}this.initTable(),this.$get("/sys/org/queryTree").then(function(t){t.data.success&&(e.treeData=t.data.result)})},mounted:function(){},computed:{downloadUrl:function(){var e="/api/test/exportuser?";for(var t in this.formInline)"orgId"===t?this.formInline[t].length>0&&(e=e+"orgId="+this.formInline[t][this.formInline[t].length-1]+"&"):""!==this.formInline[t]&&(e=e+t+"="+this.formInline[t]+"&");return e.substring(0,e.length-1)},tableHeight:function(){return window.innerHeight-230}},methods:{changeAsRoleList:function(){var e=this;this.userInfo.orgList.forEach(function(t,a){e.orgIdChange(t)})},handleAvatarSuccess:function(e,t){this.avatarUrl="http://10.85.94.238:10540/openapiApp/download?key="+e.result.key,this.userInfo.headUrl=e.result.key},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png";return t||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),t},isLastRow:function(e){return e===this.userInfo.orgList.length-1},roleAdd:function(e){},addOrg:function(e){this.userInfo.orgList.push({orgId:[],roleList:[],areaId:"",departmentId:[],departmentList:[],transferList:[]})},minusOrg:function(e,t){this.userInfo.orgList.splice(t,1)},initTable:function(e){var t=this;this.$get("sys/user/queryTable",M()({page:this.page,size:this.size},this.formInline,{orgId:e?"":this.formInline.orgId.length?this.formInline.orgId[this.formInline.orgId.length-1]:""})).then(function(e){t.tableData=e.data.pageList.result,t.settingTotal=Number(e.data.count)})},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(1===a||0===a)return t%2==0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},closeDialog:function(e){this.$refs[e].resetFields()},userDateChange:function(e){this.userInfo.userExpireDate=e},pwChange:function(e){3==e?this.pwTime=!1:(this.pwTime=!0,this.userInfo.pwExpireDate="")},orgIdChange:function(e){var t=e.orgId[e.orgId.length-2];!function a(s){for(var i in s)if(s[i].children&&a(s[i].children),s[i].id==t){e.areaId=s[i].regionCode;break}}(this.orgNameOptions);var a=e.orgId[e.orgId.length-1];this.$get("sys/user/getRoleTreeNodes",{orgId:a,userType:this.userInfo.userType}).then(function(t){t.data.success&&(e.roleList=[],e.transferList=t.data.result)}),this.$post("/sysOrgDepartment/list",{orgId:a}).then(function(t){t.success&&(e.departmentId=[],e.departmentList=t.result)})},dialogSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(t.userInfo.userType){var a=JSON.parse(D()(t.userInfo.orgList)),s=[];for(var i in a){var r=a[i].orgId;a[i].orgId=r[r.length-1];var n=a[i].departmentId;s=s.concat(n),a[i].departmentId=n.join(),delete a[i].transferList,delete a[i].departmentList}t.userInfo.department=s.join();var o=M()({},t.userInfo,{orgList:a,areaIds:t.$refs.areaList.getCheckedKeys(),areaId:t.userInfo.orgName[t.userInfo.orgName.length-1]});"编辑用户"==t.dialogTitle&&(o.userExpireDate&&(o.userExpireDate=new Date(o.userExpireDate)),o.pwExpireDate&&(o.pwExpireDate=new Date(o.pwExpireDate))),t.$post("sys/user/doSave",o).then(function(e){e.success&&(t.dialogFormVisible=!1,t.initTable(!0)),t.$mess(e)})}else t.$message({type:"error",message:"请选择用户类型"})})},clearableChange:function(e){this.formInline.userState=null===e?"":e},clearableChangeUserTpye:function(e){this.formInline.userType=null===e?"":e},transfeChange:function(e,t,a){},handleChangeOrgName:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheck=[e[e.length-1]],1===e.length&&this.areaNameOptions[0].children&&(this.defaultCheck=this.areaNameOptions[0].children.map(function(e){return e.id})),this.defaultExpand=3==e.length?[e[e.length-2]]:[e[e.length-1]],this.userInfo.orgId="",this.userInfo.orgName=e,this.userInfo.orgName.length<3&&"339900"!=e[1]?(this.disabledOrgId=!0,this.userInfo.orgId=""):this.disabledOrgId=!1,this.$get("sys/user/getOrgTreeNodes",{areaId:e[e.length-1]}).then(function(e){e.data.success&&(t.userInfo.orgId="",t.orgIdOptions=e.data.result[0].children)}),this.$get("sys/user/getAreaList",{areaId:1==e.length?e[0]:e[e.length-2]}).then(function(a){if(a.data.success){!function e(a){for(var s in a)if(1==a.length&&(a[0].disabled=!0),a[s].children&&e(a[s].children),t.defaultCheck.includes(a[s].id)&&(a[s].disabled=!0,a[s].children))for(var i in a[s].children)a[s].children[i].disabled=!0,t.defaultCheck.push(a[s].children[i].id)}(a.data.result),t.areaList=a.data.result,t.checkList=[],t.checkList.push(e[e.length-1])}})},onSearch:function(){this.page=1,this.initTable()},onAddUser:function(){var e=this;if(0!==this.formInline.orgId.length){this.avatarUrl="",this.areaEdit=!1,this.transferData=[],this.areaList=[],this.checkList=[],this.userInfo.orgName=[],this.userInfo={orgName:[],headUrl:"",logonName:"",displayName:"",userType:this.userType_dfval,checkPass:"",passwd:"",userExpireDate:"",pwExpireType:"",pwExpireDate:"",cardType:"",cardId:"",tel:"",department:"",shortName:"",orgId:"",orgList:[{orgId:[],roleList:[],areaId:"",transferList:[],departmentId:[],departmentList:[]}]},this.userInfo.orgList[0].orgId=this.formInline.orgId;var t=this.formInline.orgId[this.formInline.orgId.length-2];!function a(s){for(var i in s)if(s[i].children&&a(s[i].children),s[i].id==t){e.userInfo.orgList[0].areaId=s[i].regionCode;break}}(this.treeData),this.dialogTitle="新增用户",this.canEdit=!0,this.dialogFormVisible=!0,this.userInfo.orgList[0].roleList=[];var a=this.formInline.orgId[this.formInline.orgId.length-1];this.$get("sys/user/getRoleTreeNodes",{orgId:a,userType:this.userInfo.userType}).then(function(t){t.data.success&&(e.userInfo.orgList[0].transferList=[],e.userInfo.orgList[0].transferList=t.data.result)}),this.$post("/sysOrgDepartment/list",{orgId:a}).then(function(t){t.success&&(e.userInfo.orgList[0].departmentId=[],e.userInfo.orgList[0].departmentList=t.result)}),this.$get("/sys/user/getAreaTreeNodes").then(function(t){t.data.success&&(e.areaNameOptions=t.data.result,e.userInfo.orgName.push(t.data.result[0].id),t.data.result[0].children&&(e.userInfo.orgName.push(t.data.result[0].children[0].id),t.data.result[0].children[0].children&&e.userInfo.orgName.push(t.data.result[0].children[0].children[0].id)),e.handleChangeOrgName(e.userInfo.orgName,!0))}),this.orgNameOptions.length||this.$get("/sys/org/queryTree").then(function(t){t.data.success&&(e.orgNameOptions=t.data.result)})}else this.$message({type:"error",message:"请选择所属机构！"})},handleSizeChange:function(e){this.size=e,this.initTable()},checkListChange:function(e){this.checkList=e},handleCurrentChange:function(e){this.page=e,this.initTable()},tableEdit:function(e,t){var a=this;this.dialogTitle="编辑用户",this.canEdit=!1,this.areaEdit=!0,this.$get("sys/user/queryOneUser",{userId:t.id}).then(function(e){if(e.data.success){var t=e.data.result,s=t.sysUser;for(var i in a.defaultCheck=[],a.defaultExpand=[],t.areaList)a.defaultCheck.push(t.areaList[i].areaId);if(a.defaultExpand=3==t.areaArray.length?[t.areaArray[t.areaArray.length-2]]:[t.areaArray[t.areaArray.length-1]],a.userInfo={headUrl:s.headUrl,logonName:s.logonName,displayName:s.displayName,userType:s.userType,checkPass:s.checkPass,passwd:s.passwd,userExpireDate:s.userExpireDate,pwExpireType:s.pwExpireType,pwExpireDate:s.pwExpireDate,cardType:s.cardType,cardId:s.cardId,tel:s.tel,department:s.department?parseInt(s.department):"",shortName:s.shortName,orgId:s.orgId,ythUserId:s.ythUserId,orgList:[{orgId:[],roleList:[],areaId:"",transferList:[],departmentId:[],departmentList:[]}],id:s.id},s.headUrl?a.avatarUrl="http://10.85.94.238:10540/openapiApp/download?key="+a.userInfo.headUrl:a.avatarUrl="",t.userRoleList.length>0){for(var r=0;r<t.userRoleList.length-1;r++)a.userInfo.orgList.push({orgId:[],roleList:[],areaId:"",transferList:[],departmentId:[],departmentList:[]});for(var n=function(e){t.userRoleList[e].idpath.split("/").forEach(function(t){a.userInfo.orgList[e].orgId.push(parseInt(t))})},o=0;o<t.userRoleList.length;o++)n(o);for(var l=function(e){a.$get("sys/user/getRoleTreeNodes",{orgId:a.userInfo.orgList[e].orgId[a.userInfo.orgList[e].orgId.length-1],userType:a.userInfo.userType}).then(function(t){t.data.success&&(a.userInfo.orgList[e].transferList=[],a.userInfo.orgList[e].transferList=t.data.result)}),a.$post("/sysOrgDepartment/list",{orgId:a.userInfo.orgList[e].orgId[a.userInfo.orgList[e].orgId.length-1]}).then(function(t){t.success&&(a.userInfo.orgList[e].departmentList=t.result)})},c=0;c<a.userInfo.orgList.length;c++)l(c);for(var u=0;u<t.userRoleList.length;u++)a.userInfo.orgList[u].roleList=t.userRoleList[u].roleIds,t.orgList[u].departmentId&&(a.userInfo.orgList[u].departmentId=t.orgList[u].departmentId.split(",").map(Number))}if(t.orgList.length>0)for(var d in t.orgList)a.userInfo.orgList[d].areaId=t.orgList[d].areaId;"3"==a.userInfo.pwExpireType&&(a.pwTime=!1),a.dialogFormVisible=!0,a.userInfo.checkPass=s.passwd,a.userInfo.orgName=[],e.data.result.areaArray.forEach(function(e){a.userInfo.orgName.push(parseInt(e))}),a.userInfo.orgName.length<3?a.disabledOrgId=!0:a.disabledOrgId=!1,a.$get("/sys/user/getAreaTreeNodes").then(function(e){e.data.success&&(a.areaNameOptions=e.data.result)}),a.$get("sys/user/getOrgTreeNodes",{areaId:t.areaArray[t.areaArray.length-1]}).then(function(e){e.data.success&&(a.orgIdOptions=e.data.result[0].children)}),a.$get("/sys/org/queryTree").then(function(e){e.data.success&&(a.orgNameOptions=e.data.result)}),a.$get("sys/user/getAreaList",{areaId:1===t.areaArray.length?t.areaArray[0]:t.areaArray[t.areaArray.length-2]}).then(function(e){if(e.data.success){if(t.areaArray.length>1)for(var s in e.data.result)if(e.data.result[s].id==t.areaArray[1])if(e.data.result[s].disabled=!0,2===t.areaArray.length){if(339900==t.areaArray[1])break;for(var i in e.data.result[s].children)e.data.result[s].children[i].disabled=!0,a.defaultCheck.push(e.data.result[s].children[i].id)}else for(var r in e.data.result[s].children)e.data.result[s].children[r].id==t.areaArray[2]&&(e.data.result[s].children[r].disabled=!0);a.areaList=e.data.result,a.checkList=[];var n=!0,o=!1,l=void 0;try{for(var c,u=S()(t.areaList);!(n=(c=u.next()).done);n=!0){var d=c.value;a.checkList.push(d.areaId)}}catch(e){o=!0,l=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw l}}}}),a.$get("sys/user/getRoleTreeNodes",{orgId:t.sysUser.orgId,userType:a.userInfo.userType}).then(function(e){e.data.success&&(a.transferData=e.data.result)})}e.data.success||a.$message({type:"error",message:e.data.resultDes})})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{staticClass:"demo-form-inline searchFrom",attrs:{inline:!0,size:"mini",model:e.formInline,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"登录名"}},[a("el-input",{attrs:{placeholder:"请输入登录名"},model:{value:e.formInline.logonName,callback:function(t){e.$set(e.formInline,"logonName",t)},expression:"formInline.logonName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{label:"姓名","label-width":"70px"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.formInline.displayName,callback:function(t){e.$set(e.formInline,"displayName",t)},expression:"formInline.displayName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"所属机构"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{"expand-trigger":"hover",options:e.treeData,props:{label:"orgName",value:"id",checkStrictly:!0},"show-all-levels":!1,clearable:!0},model:{value:e.formInline.orgId,callback:function(t){e.$set(e.formInline,"orgId",t)},expression:"formInline.orgId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"用户类型","label-width":"120px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择用户类型"},on:{change:e.clearableChangeUserTpye},model:{value:e.formInline.userType,callback:function(t){e.$set(e.formInline,"userType",t)},expression:"formInline.userType"}},e._l(e.dict_userType,function(e){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.queryVisible,expression:"item.queryVisible"}],key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"用户状态","label-width":"120px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择用户状态"},on:{change:e.clearableChange},model:{value:e.formInline.userState,callback:function(t){e.$set(e.formInline,"userState",t)},expression:"formInline.userState"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"锁定",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onAddUser}},[e._v("添加用户")])],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{prop:"logonName",label:"登录名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"displayName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"所属机构"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orgNameList.join(",")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.roleName.join(",")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userType",label:"用户类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("userType")(t.row.userType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userState",label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("userState")(t.row.userState)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-edit",attrs:{title:"修改"},on:{click:function(a){return e.tableEdit(t.$index,t.row)}}}),e._v(" "),a("ep-delete",{attrs:{info:"重置密码",id:t.row.id,url:"sys/user/initPasswd",init:!0},on:{init:e.initTable}},[a("i",{staticClass:"el-icon-refresh",attrs:{title:"重置密码"}})]),e._v(" "),a("ep-delete",{attrs:{id:t.row.id,url:"sys/user/logoutUser",init:!0},on:{init:e.initTable}},[a("i",{staticClass:"el-icon-delete",attrs:{title:"删除"}})]),e._v(" "),2==t.row.userState?a("ep-delete",{attrs:{info:"解锁",id:t.row.id,url:"sys/user/unlockUser",init:!0},on:{init:e.initTable}},[a("i",{staticClass:"iconfont icon-jiesuo1",attrs:{title:"解锁"}})]):a("ep-delete",{attrs:{info:"锁定",id:t.row.id,url:"sys/user/lockUser",init:!0},on:{init:e.initTable}},[a("i",{staticClass:"iconfont icon-suoding",attrs:{title:"锁定"}})])]}}])})],1),e._v(" "),a("div",{staticClass:"pageblock"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.settingTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.closeDialog("ruleFrom")}}},[a("el-form",{ref:"ruleFrom",attrs:{model:e.userInfo,"label-width":"100px",rules:e.dialogFormRules}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"33.33%",height:"186px",display:"flex"}},[a("div",[e._v("头像：")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{data:e.uploadData,accept:"image/jpeg,image/gif,image/png",action:"/api/fileUpload/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.avatarUrl?a("img",{staticClass:"avatar",attrs:{src:e.avatarUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登录名",prop:"logonName"}},[a("el-input",{attrs:{placeholder:"请输入登录名",autocomplete:"off"},model:{value:e.userInfo.logonName,callback:function(t){e.$set(e.userInfo,"logonName",t)},expression:"userInfo.logonName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"displayName"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入姓名",autocomplete:"off"},model:{value:e.userInfo.displayName,callback:function(t){e.$set(e.userInfo,"displayName",t)},expression:"userInfo.displayName"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码",prop:"passwd"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]}),e._v(" "),a("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.userInfo.passwd,callback:function(t){e.$set(e.userInfo,"passwd",t)},expression:"userInfo.passwd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码",autocomplete:"off"},model:{value:e.userInfo.checkPass,callback:function(t){e.$set(e.userInfo,"checkPass",t)},expression:"userInfo.checkPass"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择用户类型",disabled:!e.canEdit},on:{change:e.changeAsRoleList},model:{value:e.userInfo.userType,callback:function(t){e.$set(e.userInfo,"userType",t)},expression:"userInfo.userType"}},e._l(e.dict_userType,function(e){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.addVisible,expression:"item.addVisible"}],key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户过期时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择用户过期时间","picker-options":e.pickerOptions1},on:{change:e.userDateChange},model:{value:e.userInfo.userExpireDate,callback:function(t){e.$set(e.userInfo,"userExpireDate",t)},expression:"userInfo.userExpireDate"}})],1)],1)],1)],1)]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"密码过期策略"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择密码过期策略"},on:{change:e.pwChange},model:{value:e.userInfo.pwExpireType,callback:function(t){e.$set(e.userInfo,"pwExpireType",t)},expression:"userInfo.pwExpireType"}},[a("el-option",{attrs:{label:"系统配置周期",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"永不过期",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"指定日期",value:"3"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"密码过期时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.pwTime,type:"date",placeholder:"选择密码过期时间","picker-options":e.pickerOptions1},model:{value:e.userInfo.pwExpireDate,callback:function(t){e.$set(e.userInfo,"pwExpireDate",t)},expression:"userInfo.pwExpireDate"}},[e._v(">")])],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"身份证号",prop:"cardId"}},[a("el-input",{attrs:{placeholder:"请输入身份证号",autocomplete:"off"},model:{value:e.userInfo.cardId,callback:function(t){e.$set(e.userInfo,"cardId",t)},expression:"userInfo.cardId"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系电话",prop:"tel"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",autocomplete:"off"},model:{value:e.userInfo.tel,callback:function(t){e.$set(e.userInfo,"tel",t)},expression:"userInfo.tel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"一体化用户ID"}},[a("el-input",{attrs:{placeholder:"请输入一体化用户ID",autocomplete:"off"},model:{value:e.userInfo.ythUserId,callback:function(t){e.$set(e.userInfo,"ythUserId",t)},expression:"userInfo.ythUserId"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属区划1",prop:"orgName"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{"expand-trigger":"hover",options:e.areaNameOptions,props:{label:"areaName",value:"id",checkStrictly:!0},clearable:!0,"change-on-select":!1,placeholder:"请选择所属区划"},on:{change:e.handleChangeOrgName},model:{value:e.userInfo.orgName,callback:function(t){e.$set(e.userInfo,"orgName",t)},expression:"userInfo.orgName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("管辖行政区划")])]),e._v(" "),a("el-tree",{ref:"areaList",attrs:{data:e.areaList,"show-checkbox":"","node-key":"id",props:e.areaProps,"default-checked-keys":e.defaultCheck,"default-expanded-keys":e.defaultExpand}})],1)],1)],1),e._v(" "),a("el-table",{staticClass:"newUserDialogTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.userInfo.orgList,border:""}},[a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:0===t.$index,size:"mini",icon:"el-icon-minus",circle:""},on:{click:function(a){return e.minusOrg(t.row,t.$index)}}}),e._v(" "),e.isLastRow(t.$index)?a("el-button",{attrs:{size:"mini",icon:"el-icon-plus",circle:""},on:{click:function(a){return e.addOrg(t.row)}}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"关联机构"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{staticClass:"roleSelect",staticStyle:{width:"100%",margin:"0"},attrs:{prop:"orgList."+t.$index+".orgId",rules:e.dialogFormRules.orgIds}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{"expand-trigger":"hover",options:e.orgNameOptions,props:e.props,clearable:!1,"change-on-select":!1,placeholder:"请选择所属机构",disabled:0===t.$index},on:{change:function(a){return e.orgIdChange(t.row)}},model:{value:t.row.orgId,callback:function(a){e.$set(t.row,"orgId",a)},expression:"scope.row.orgId"}})],1)]}}])}),e._v(" "),a("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" "),a("span",[e._v("所属科室")])]}},{key:"default",fn:function(t){return[a("el-form-item",{staticClass:"roleSelect",staticStyle:{width:"100%",margin:"0"},attrs:{prop:"orgList."+t.$index+".departmentId",rules:e.dialogFormRules.departmentId}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属科室",multiple:""},model:{value:t.row.departmentId,callback:function(a){e.$set(t.row,"departmentId",a)},expression:"scope.row.departmentId"}},e._l(t.row.departmentList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"关联角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{staticClass:"roleSelect",staticStyle:{width:"100%",margin:"0"},attrs:{prop:"orgList."+t.$index+".roleList",rules:e.dialogFormRules.roleList}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.row.roleList,callback:function(a){e.$set(t.row,"roleList",a)},expression:"scope.row.roleList"}},e._l(t.row.transferList,function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)]}}])})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogSave("ruleFrom")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(O,E,!1,function(e){a("AQKe")},"data-v-4959056e",null).exports,q={data:function(){return{dateValue:"",dialogFormVisible:!1,total:"",daterangeFrom:{daterangeValue:""},tableData:[],diaLogrules:{codeType:this.$rules("请输入代码类别"),codeValue:this.$rules("请输入代码值"),codeName:this.$rules("请输入代码名称"),effectiveSign:this.$rules("请选择有效标志"),maintainSign:this.$rules("请选择维护状态")},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},searchForm:{codeType:"",codeName:"",parameterSort:"",effectiveSign:"",maintainSign:""},diaLogForm:{codeType:"",codeName:"",codeValue:"",parameterSort:"",effectiveSign:"1",maintainSign:"1"},page:1,size:10,id:""}},created:function(){this.init(this.page,this.size)},computed:{tableHeight:function(){return window.innerHeight-230}},methods:{init:function(e,t){var a=this;this.$get("/sys/code/queryTable",M()({page:e,size:t},this.searchForm)).then(function(e){a.tableData=e.data.pageList.result,a.total=e.data.count})},closeDialog:function(e){this.$refs[e].resetFields()},deleteInit:function(){this.init(this.page,this.size)},editClick:function(e){this.dialogFormVisible=!0,this.id=e.id,this.diaLogForm={codeType:e.codeType,codeName:e.codeName,codeValue:e.codeValue,parameterSort:e.parameterSort,effectiveSign:e.effectiveSign,maintainSign:e.maintainSign}},pageInit:function(e,t){this.page=e,this.size=t,this.init(e,t)},onChangeDiaLogForm:function(e,t){this.diaLogForm[t]=e},onChangeSearchForm:function(e,t){this.searchForm[t]=e},addDialog:function(){this.dialogFormVisible=!0,this.id="",this.diaLogForm={codeType:"",codeName:"",codeValue:"",parameterSort:"",effectiveSign:"1",maintainSign:"1"}},saveDialogForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$post("/sys/code/saveCode",M()({id:t.id},t.diaLogForm)).then(function(e){t.$mess(e),e.success&&(t.init(t.page,t.size),t.dialogFormVisible=!1,t.diaLogForm={codeType:e.codeType,codeName:e.codeName,codeValue:e.codeValue,parameterSort:e.parameterSort,effectiveSign:e.effectiveSign,maintainSign:e.maintainSign})})})},onSearch:function(){this.init(this.page,this.size)}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm}},[a("el-row",{attrs:{gutter:20}},[a("ep-input",{attrs:{colspan:"4",value:e.searchForm.codeType,placeholder:"搜索代码类别",isIcon:!0,size:"mini",name:"codeType"},on:{"input-message":e.onChangeSearchForm}}),e._v(" "),a("ep-input",{attrs:{colspan:"4",value:e.searchForm.codeName,placeholder:"搜索代码名称",isIcon:!0,size:"mini",name:"codeName"},on:{"input-message":e.onChangeSearchForm}}),e._v(" "),a("ep-input",{attrs:{colspan:"4",value:e.searchForm.parameterSort,placeholder:"搜索参数分类",isIcon:!0,size:"mini",name:"parameterSort"},on:{"input-message":e.onChangeSearchForm}}),e._v(" "),a("ep-select",{attrs:{colspan:"4",value:e.searchForm.effectiveSign,placeholder:"请选择有效标志",isIcon:!0,size:"mini",name:"effectiveSign"},on:{"select-message":e.onChangeSearchForm}}),e._v(" "),a("ep-select",{attrs:{colspan:"4",value:e.searchForm.maintainSign,placeholder:"请选择维护状态",isIcon:!0,size:"mini",name:"maintainSign"},on:{"select-message":e.onChangeSearchForm}}),e._v(" "),a("el-col",{attrs:{span:4,offset:0}},[a("el-form-item",[a("el-button",{attrs:{size:"mini"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addDialog}},[e._v("新增")])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"代码维护",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){return e.closeDialog("diaLogForm")}}},[a("el-form",{ref:"diaLogForm",attrs:{model:e.diaLogForm,"label-width":"100px",rules:e.diaLogrules}},[a("el-row",{attrs:{gutter:20}},[a("ep-input",{attrs:{colspan:"12",value:e.diaLogForm.codeType,placeholder:"请输入代码类别",label:"代码类别",name:"codeType"},on:{"input-message":e.onChangeDiaLogForm}}),e._v(" "),a("ep-input",{attrs:{colspan:"12",value:e.diaLogForm.codeValue,placeholder:"请输入代码值",label:"代码值",name:"codeValue"},on:{"input-message":e.onChangeDiaLogForm}})],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("ep-input",{attrs:{colspan:"12",value:e.diaLogForm.codeName,placeholder:"请输入代码名称",label:"代码名称",name:"codeName"},on:{"input-message":e.onChangeDiaLogForm}}),e._v(" "),a("ep-select",{attrs:{colspan:"12",value:e.diaLogForm.effectiveSign,placeholder:"请选择有效标志",name:"effectiveSign",labelTitle:"是否有效"},on:{"select-message":e.onChangeDiaLogForm}})],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("ep-input",{attrs:{colspan:"12",value:e.diaLogForm.parameterSort,placeholder:"请输入参数分类",label:"参数分类",name:"parameterSort"},on:{"input-message":e.onChangeDiaLogForm}}),e._v(" "),a("ep-select",{attrs:{colspan:"12",value:e.diaLogForm.maintainSign,placeholder:"请选择维护状态",name:"maintainSign",labelTitle:"是否可维护"},on:{"select-message":e.onChangeDiaLogForm}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveDialogForm("diaLogForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{align:"center",prop:"id",sortable:"",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"codeType",label:"代码类别"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"codeValue",label:"代码值"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"codeName",label:"代码名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"parameterSort",label:"参数分类"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"有效标志"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("effectiveSign")(t.row.effectiveSign)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"代码可维护标志"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("maintainSign")(t.row.maintainSign)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.row.maintainSign,expression:"scope.row.maintainSign==0?false:true"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.editClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("ep-delete",{directives:[{name:"show",rawName:"v-show",value:0!=t.row.maintainSign,expression:"scope.row.maintainSign==0?false:true"}],attrs:{id:t.row.id,parmeId:"id",url:"/sys/code/deleteCode",init:!0},on:{init:e.deleteInit}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("ep-page",{attrs:{total:e.total},on:{page:e.pageInit}})],1)},staticRenderFns:[]};var K=a("VU/8")(q,j,!1,function(e){a("HFqs")},"data-v-efce95b8",null).exports,H={data:function(){return{dateValue:"",dialogFormVisible:!1,total:"",daterangeFrom:{daterangeValue:""},optionsUserId:[],cascaderProps:{value:"id",label:"orgName",checkStrictly:!0},cascaderVal:[],cascaderOptions:[],datePicker:[],tableData:[],diaLogrules:{codeType:this.$rules("请输入代码类别"),codeValue:this.$rules("请输入代码值"),codeName:this.$rules("请输入代码名称"),effectiveSign:this.$rules("请选择有效标志"),maintainSign:this.$rules("请选择维护状态")},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},searchForm:{functionTitle:"",description:"",operateUserId:"",rollbackFlag:"",startCreateTime:"",endCreateTime:"",orgId:""},diaLogForm:{codeType:"",codeName:"",codeValue:"",parameterSort:"",effectiveSign:"1",maintainSign:"1"},page:1,size:10,id:""}},created:function(){var e=this;this.$get("/sys/operateLog/getOrgTreeNodes",{userId:1}).then(function(t){t.data.success&&(e.cascaderOptions=t.data.result.orgList,e.init(e.page,e.size))})},computed:{tableHeight:function(){return window.innerHeight-230}},methods:{init:function(e,t){var a=this,s=this.cascaderVal.length?this.cascaderVal[this.cascaderVal.length-1]:"";this.$get("/sys/operateLog/queryLogList",M()({page:e,size:t},this.searchForm,{orgId:s})).then(function(e){a.tableData=e.data.pageList.result,a.total=e.data.count})},getSysUserList:function(){var e=this,t=this.cascaderVal.length?this.cascaderVal[this.cascaderVal.length-1]:"";this.$get("/sys/operateLog/getSysUserList",{orgId:t}).then(function(t){t.data.success&&(e.optionsUserId=t.data.result)})},deleteInit:function(){this.init(this.page,this.size)},seeClick:function(e){window.open(this.$api+"/snapshot/download?logId="+e.id)},backClick:function(e){var t=this;this.$get("/sys/operateLog/doRollback",{logId:e.id}).then(function(e){e.data.success&&t.init(t.page,t.size),e.data.success&&t.$message({type:"success",message:e.data.resultDes}),e.data.success||t.$message({type:"error",message:e.data.resultDes})})},printClick:function(e){var t=window.open();this.$get("/sys/operateLog/printReport",{logId:e.id}).then(function(e){e.data.success&&(t.location.href=e.data.result)})},pageInit:function(e,t){this.page=e,this.size=t,this.init(e,t)},onChangeDiaLogForm:function(e,t){this.diaLogForm[t]=e},onChangeSearchForm:function(e,t){this.searchForm[t]=e},addDialog:function(){this.dialogFormVisible=!0,this.id="",this.diaLogForm={codeType:"",codeName:"",codeValue:"",parameterSort:"",effectiveSign:"1",maintainSign:"1"}},saveDialogForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$post("/sys/code/saveCode",M()({id:t.id},t.diaLogForm)).then(function(e){t.$mess(e),e.success&&(t.init(t.page,t.size),t.dialogFormVisible=!1,t.diaLogForm={codeType:e.codeType,codeName:e.codeName,codeValue:e.codeValue,parameterSort:e.parameterSort,effectiveSign:e.effectiveSign,maintainSign:e.maintainSign})})})},onSearch:function(){this.page=1,this.init(this.page,this.size)},handleChange:function(e){}},watch:{datePicker:{deep:!0,immediate:!0,handler:function(e){null!=e?(this.searchForm.startCreateTime=e[0],this.searchForm.endCreateTime=e[1]+"23:59:59"):(this.searchForm.startCreateTime="",this.searchForm.endCreateTime="")}},cascaderVal:{deep:!0,immediate:!0,handler:function(e){this.searchForm.operateUserId="",this.getSysUserList()}}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-cascader",{attrs:{clearable:"","expand-trigger":"hover",options:e.cascaderOptions,size:"mini",props:e.cascaderProps,"show-all-levels":!1,filterable:""},on:{change:e.handleChange},model:{value:e.cascaderVal,callback:function(t){e.cascaderVal=t},expression:"cascaderVal"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.datePicker,callback:function(t){e.datePicker=t},expression:"datePicker"}})],1)],1),e._v(" "),a("ep-input",{attrs:{colspan:"3",value:e.searchForm.functionTitle,placeholder:"搜索业务名称",isIcon:!0,size:"mini",name:"functionTitle"},on:{"input-message":e.onChangeSearchForm}}),e._v(" "),a("ep-input",{attrs:{colspan:"4",value:e.searchForm.description,placeholder:"搜索摘要信息",isIcon:!0,size:"mini",name:"description"},on:{"input-message":e.onChangeSearchForm}}),e._v(" "),a("ep-select",{attrs:{colspan:"4",value:e.searchForm.operateUserId,placeholder:"经办人",isIcon:!0,size:"mini",name:"operateUserId",options:e.optionsUserId,selectLable:"displayName",selectKey:"id"},on:{"select-message":e.onChangeSearchForm}}),e._v(" "),a("ep-select",{attrs:{colspan:"4",value:e.searchForm.rollbackFlag,placeholder:"回退标志",isIcon:!0,size:"mini",name:"rollbackFlag"},on:{"select-message":e.onChangeSearchForm}}),e._v(" "),a("el-col",{attrs:{span:2,offset:0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{align:"center",width:"80",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{display:"inline-block"}},[e._v(e._s(t.$index+1))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0!=t.row.rollbackFlag,expression:"scope.row.rollbackFlag==0?false:true"}],staticClass:"black"},[e._v("已退")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center",prop:"id",label:"日志流水号",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center",prop:"functionTitle",label:"业务名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center",prop:"areaId",label:"统筹区编码"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"operateUserName",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"createTime",label:"经办日期"}}),e._v(" "),a("el-table-column",{attrs:{width:"400",align:"center",prop:"description",label:"摘要信息"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"rollbackUserName",label:"回退人员"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"rollbackTime",label:"回退日期"}}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.seeClick(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.rollbackFlag&&"1"==t.row.rbFlag,expression:"scope.row.rollbackFlag==0 && scope.row.rbFlag == '1'?true:false"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.backClick(t.row)}}},[e._v("回退")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.rollbackFlag,expression:"scope.row.rollbackFlag==0?true:false"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.printClick(t.row)}}},[e._v("打印")])]}}])})],1),e._v(" "),a("ep-page",{attrs:{total:e.total},on:{page:e.pageInit}})],1)},staticRenderFns:[]};var X=a("VU/8")(H,Q,!1,function(e){a("8tKP")},"data-v-45f3e8f6",null).exports,Z={data:function(){return{uploadData:{isPublic:"1"},props:{label:"name",value:"id"},isOper:!0,createOperName:"",isBus:!1,isPrint:!1,flageQXPZ:!1,QXPZparameter:null,QXPZloading:!0,QXPZif:!1,QXPZarr:[],QXPZprop:{label:"orgName",children:"children"},QXPZsavearr:[],isAdd:!1,treeData:{},treeNode:{},max:0,node_type:3,nodeLength:0,childLength:0,cancelType:"",editFrom:[],addTrue:!1,isInit:!0,businessText:[],funOrderId:0,menu_type:1,addBigShow:!1,isUserType:null,activeName:"",savaId:null,isShow:!0,defaultTreeKey:["1"],nodeId:"",parentId:"",parentAndId:"",selectoptions:[{id:1,label:213}],menuTree:[],defaultProps:{children:"children",label:"title"},menuFrom:{icon:"",title:"",funCode:"",nodeType:"",location:"",funType:"",funOrder:"",description:"",active:"1",isBus:"1",isPrint:"1",funLevel:"1",businessId:[]},menuText:{title:"",funLevel:"",funCode:"",nodeType:"",location:"",funType:"",funOrder:"",description:"",active:"1",isBus:"1",isPrint:"1",businessId:[]},businessOptions:[],menuFromRules:{title:this.$rules("请输入功能名称",50),nodeType:this.$rules("请选择节点类型",20),location:this.$rules("请输入节点链接",100),description:this.$rulesMax(100)},rbFlag:!0}},created:function(){var e=this;"a0b923820dcc509a"===this.$route.query.is&&(this.activeName="1"),"9d4c2f636f067f89"===this.$route.query.is&&(this.activeName="2"),"4b5ce2fe28308fd9"===this.$route.query.is&&(this.activeName="3"),"a2f3e71d9181a67b"===this.$route.query.is&&(this.activeName="4"),"bbce2345d7772b06"===this.$route.query.is&&(this.activeName="5"),"5a880faf6fb5e608"===this.$route.query.is&&(this.activeName="6"),"ceea167a5a36dedd"===this.$route.query.is&&(this.activeName="7"),"fb98ab9159f51fd0"===this.$route.query.is&&(this.activeName="8"),"2e2d7fbdea1afc51"===this.$route.query.is&&(this.activeName="9"),"02a44259755d38e6"===this.$route.query.is&&(this.activeName="10"),"d9caa6e02c990b0a"===this.$route.query.is&&(this.activeName="11"),this.isInit=!0,this.initTree(),this.menu_type=this.activeName,this.$get("/static/menuData.json").then(function(t){e.businessOptions=t.data})},mounted:function(){this.isUserType=1==this.$Base64.decode(localStorage.getItem("userType"))},beforeRouteUpdate:function(e,t,a){"a0b923820dcc509a"===e.query.is&&(this.activeName="1"),"9d4c2f636f067f89"===e.query.is&&(this.activeName="2"),"4b5ce2fe28308fd9"===e.query.is&&(this.activeName="3"),"a2f3e71d9181a67b"===e.query.is&&(this.activeName="4"),"bbce2345d7772b06"===e.query.is&&(this.activeName="5"),"5a880faf6fb5e608"===e.query.is&&(this.activeName="6"),"ceea167a5a36dedd"===e.query.is&&(this.activeName="7"),"fb98ab9159f51fd0"===e.query.is&&(this.activeName="8"),"2e2d7fbdea1afc51"===e.query.is&&(this.activeName="9"),"02a44259755d38e6"===e.query.is&&(this.activeName="10"),"d9caa6e02c990b0a"===e.query.is&&(this.activeName="11"),this.isInit=!0,this.initTree(),this.menu_type=this.activeName,a()},watch:{"menuFrom.funOrder":{deep:!0,handler:function(e){Number(e)<10&&"0"!=String(e)[0]&&(this.menuFrom.funOrder="0"+e),Number(e)>99&&(this.menuFrom.funOrder="99")}}},computed:{userTypeDisabled:function(){return"1"!=this.$Base64.decode(localStorage.getItem("userType"))}},methods:{showQXPZ:function(){var e=this;this.QXPZloading=!0,this.QXPZif=!0,this.$get("/sys/function/sysFunctionSetPermissionForOrgs",{functionId:this.isAdd?null:this.QXPZparameter}).then(function(t){t.data.success&&(e.QXPZarr=t.data.result.orgTree,e.QXPZsavearr=t.data.result.hasPermissionList,e.$nextTick(function(){e.$refs.QXPZtree.setCheckedKeys(e.QXPZsavearr)}),e.isUserType||e.dealTreeOnceChecked(e.QXPZarr),e.QXPZloading=!1)}),this.flageQXPZ=!0},dealTreeOnceChecked:function(e){var t=this;e.length>0&&e.forEach(function(e){if(e.children){var a=e.children;null!==a&&t.dealTreeOnceChecked(a)}e.disabled=!0})},CheckQXPZChange:function(e,t,a){},saveQXPZsave:function(){this.QXPZsavearr=this.$refs.QXPZtree.getCheckedKeys()},handleAvatarSuccess:function(e,t){this.menuFrom.icon=e.result.path},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/svg+xml"===e.type||"image/svg"===e.type;return t||this.$message.error("上传头像图片只能是 JPG、PNG、SVG 格式!"),t},allowDrag:function(e){return"1"!==e.data.nodeType},allowDrop:function(e,t,a){return"2"==e.data.nodeType&&"1"==t.data.nodeType?"inner"==a:"3"==e.data.nodeType&&"1"==t.data.nodeType?"inner"==a:"3"==e.data.nodeType&&"2"==t.data.nodeType&&"inner"==a},isDrop:function(e,t){var a=this,s=e.data.title,i=t.data.title;this.$confirm("将"+s+"移动到"+i+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$get("/sys/function/updateFunNode",{id:e.data.id,parentId:t.data.id}).then(function(t){a.initTree([e.data.id]),a.$mess(t.data)})}).catch(function(){a.initTree([e.data.id]),a.$message({type:"info",message:"已取消"})})},handleDrop:function(e,t,a,s){this.isDrop(e,t)},initTree1:function(){var e=this,t=this.treeNode.parent,a=t.data.children||t.data,s=a.findIndex(function(t){return t.id===e.treeData.id});a.splice(s,1)},initTree:function(e){var t=this;this.$get("/sys/function/queryTree",{funType:this.activeName}).then(function(a){var s=a.data.result;t.menuTree=s,t.isInit?(s.length&&(t.defaultTreeKey[0]=s[0].id,t.handleNodeClick(s[0])),t.isInit=!1):t.$nextTick(function(){t.handleNodeClick(t.$refs.tree2.getNode(t.savaId).data,t.$refs.tree2.getNode(t.savaId))}),e&&(t.defaultTreeKey=e)})},orderChange:function(e){this.addTrue?e>Number(this.max)&&(this.menuFrom.funOrder=Number(this.max)):Number(e)>Number(this.nodeLength)&&(this.menuFrom.funOrder=Number(this.nodeLength)+1)},onChange:function(e,t){this.menuFrom[t]=e},handleClick:function(e,t){this.isInit=!0,this.initTree(),this.menu_type=this.activeName},handleItemChange:function(e){var t=this;if(3==e.length){var a=e[0].split("-"),s=e[1].split("-"),i=e[2].split("-");this.$get("/sys/function/queryBusinessList",{busPar:a[0]+s[0]+i[0]}).then(function(e){e.data.success&&(t.businessOptions[a[1]].children[s[1]].children[i[1]].children=e.data.result)})}},handleNodeClick:function(e,t){var a=this;for(var s in this.savaId=e.id,this.QXPZsavearr=[],this.QXPZparameter=null,this.QXPZif=!1,this.menuFrom.icon="",this.menuText.icon="",this.menuFrom.businessId=[],this.businessText=[],this.treeData=e,this.treeNode=t,t&&(this.nodeLength=t.parent.childNodes.length),t&&(this.childLength=t.childNodes.length),this.cancelType=e.nodeType,this.addTrue=!1,this.node_type=e.nodeType,this.isShow=!0,this.nodeId=e.id,this.parentId=e.parentId||"",this.parentAndId=e.id,e){var i=e[s];"businessId"!=s&&(this.menuText[s]=i,this.menuFrom[s]=i)}e.hasOwnProperty("children")?this.funOrderId=String(Number(e.children.length)+1):this.funOrderId=1,3==this.node_type&&"1"!=this.activeName&&(this.isBus=!0,this.$get("/sys/function/nodeClick",{functionId:e.id}).then(function(e){if(a.QXPZparameter=e.data.result.sysFunction.id,e.data.success){a.createOperName=e.data.result.createOperName,a.isOper=e.data.result.isOper,a.businessText[0]=e.data.result.bussArray[0],a.businessText[1]=e.data.result.bussArray[1],a.businessText[2]=e.data.result.bussArray[2],a.businessText[3]=e.data.result.buss?e.data.result.buss.name:"",a.menuFrom.rbFlag="1"==e.data.result.sysFunction.rbFlag,a.rbFlag=a.menuFrom.rbFlag,a.menuFrom.businessId=e.data.result.bussArray,a.menuFrom.funLevel=e.data.result.sysFunction.funLevel,a.menuFrom.icon=e.data.result.sysFunction.icon,a.menuText.funLevel=e.data.result.sysFunction.funLevel;var t=[];0!=e.data.result.bussArray.length&&(t=JSON.parse(D()(e.data.result.bussArray))),t.pop(),0!=e.data.result.bussArray.length&&a.$get("/sys/function/queryBusinessList",{busPar:t.join("")}).then(function(s){if(s.data.success){var i=Number(t[0])-1,r=0,n=0;switch(t[1]){case"A":r=10;break;case"B":r=11;break;default:r=t[1]}switch(t[2]){case"A":n=0;break;case"I":n=1;break;default:n=2}a.businessOptions[i].children[r].children[n].children=s.data.result,a.menuFrom.businessId=e.data.result.bussArray,a.menuFrom.businessId[0]=a.menuFrom.businessId[0]+"-"+i,a.menuFrom.businessId[1]=a.menuFrom.businessId[1]+"-"+r,a.menuFrom.businessId[2]=a.menuFrom.businessId[2]+"-"+n,a.menuFrom.businessId.push()}})}}))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a="";a=3==t.node_type&&"1"!=t.activeName&&t.menuFrom.businessId.length>0?t.menuFrom.businessId[t.menuFrom.businessId.length-1]:"",t.QXPZif?t.$post("/sys/function/saveMenu",{id:t.nodeId,parentId:t.parentId,title:t.menuFrom.title,funLevel:t.menuFrom.funLevel,funCode:t.menuFrom.funCode,nodeType:t.node_type,location:t.menuFrom.location||"/",funType:t.menu_type,funOrder:Number(t.menuFrom.funOrder),description:t.menuFrom.description,active:t.menuFrom.active,isBus:t.menuFrom.isBus,isPrint:t.menuFrom.isPrint,sysFunctionSetPermissionForOrgsVO:{functionId:t.nodeId,orgIds:t.QXPZsavearr},rbFlag:t.rbFlag?"1":"0",businessId:a,icon:t.menuFrom.icon}).then(function(e){e.success&&(t.initTree(),t.QXPZif=!1,t.defaultTreeKey=[t.treeNode.key],t.isShow=!0),t.$mess(e)}):t.QXPZif||t.$post("/sys/function/saveMenu",{id:t.nodeId,parentId:t.parentId,title:t.menuFrom.title,funLevel:t.menuFrom.funLevel,funCode:t.menuFrom.funCode,nodeType:t.node_type,location:t.menuFrom.location||"/",funType:t.menu_type,funOrder:Number(t.menuFrom.funOrder),description:t.menuFrom.description,active:t.menuFrom.active,isBus:t.menuFrom.isBus,isPrint:t.menuFrom.isPrint,rbFlag:t.rbFlag?"1":"0",businessId:a,icon:t.menuFrom.icon}).then(function(e){e.success&&(t.initTree(),t.QXPZif=!1,t.defaultTreeKey=[t.treeNode.key],t.isShow=!0),t.$mess(e)})})},edit:function(){this.isShow=!1,this.addTrue&&(this.menuFrom=F()({},this.editFrom))},addBigMenu:function(e){this.menuFrom.funOrder=Number(this.menuTree.length)+1,this.cancelType=this.node_type,this.resetForm(),this.node_type=1,this.parentId="0"},addMenu:function(e){this.menuFrom.funOrder=Number(this.menuTree.length)+1,this.rbFlag=!0,this.cancelType=this.node_type,this.resetForm(),this.node_type=3,this.parentId="1"},addRadio:function(){this.menuFrom.funOrder=this.funOrderId,this.cancelType=this.node_type,this.resetForm(),this.node_type=4,this.parentId=this.parentAndId},addSmallMenu:function(){this.menuFrom.funOrder=this.funOrderId,this.cancelType=this.node_type,this.resetForm(),this.node_type=2,this.parentId=this.parentAndId},addPage:function(){this.isAdd=!0,this.menuFrom.funOrder=this.funOrderId,this.cancelType=this.node_type,this.rbFlag=!0,this.cancelId=this.parentId,this.resetForm(),this.menuFrom.businessId=[],this.node_type=3,this.parentId=this.parentAndId},cancel:function(){this.cancelType&&(this.node_type=this.cancelType),this.rbFlag=this.menuFrom.rbFlag,this.QXPZif=!1,this.isShow=!0},resetForm:function(){this.max=this.menuFrom.funOrder,this.addTrue=!0,this.editFrom=F()({},this.menuFrom),this.$refs.menuFrom.resetFields(),this.isShow=!1,this.menuFrom.title="",this.menuFrom.funCode="",this.menuFrom.location="",this.menuFrom.description="",this.menuFrom.active="1",this.nodeId="",this.menuFrom.icon=""}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-container",[a("el-aside",{attrs:{width:"300px"}},[a("el-tabs",{staticStyle:{position:"relative",left:"-10px"},attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[1==e.activeName?a("el-tab-pane",{attrs:{label:"管理系统",name:"1"}}):e._e(),e._v(" "),2==e.activeName?a("el-tab-pane",{attrs:{label:"统征经办系统",name:"2"}}):e._e(),e._v(" "),3==e.activeName?a("el-tab-pane",{attrs:{label:"统征工伤系统",name:"3"}}):e._e(),e._v(" "),4==e.activeName?a("el-tab-pane",{attrs:{label:"统征网报系统",name:"4"}}):e._e()],1),e._v(" "),1==e.activeName?a("div",[a("div",{staticStyle:{display:"flex","margin-bottom":"10px","justify-content":"space-evenly"}},[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"mini"},on:{click:e.addBigMenu}},[e._v("新增父菜单")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"mini"},on:{click:e.addMenu}},[e._v("新增功能模块")])],1),e._v(" "),a("div",{staticClass:"scroll"},[a("el-tree",{ref:"tree2",attrs:{"highlight-current":!0,data:e.menuTree,props:e.defaultProps,"node-key":"id","expand-on-click-node":!1,"default-checked-keys":e.defaultTreeKey},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.title}},[a("span",[3==i.nodeType?a("i",{staticClass:"iconfont icon-yemian"}):e._e(),e._v(" "),4==i.nodeType?a("i",{staticClass:"iconfont icon-shouzhi"}):e._e(),e._v("\n              "+e._s(s.label)+"\n            ")])])}}],null,!1,1049178122)})],1)]):a("div",[a("el-button",{staticStyle:{width:"100px","margin-left":"80px","margin-bottom":"10px"},attrs:{type:"primary",size:"mini"},on:{click:e.addBigMenu}},[e._v("新增父菜单")]),e._v(" "),a("div",{staticClass:"scroll"},[a("el-tree",{ref:"tree2",attrs:{draggable:"","allow-drag":e.allowDrag,"allow-drop":e.allowDrop,"highlight-current":!0,data:e.menuTree,props:e.defaultProps,"node-key":"id","expand-on-click-node":!1,"default-expanded-keys":e.defaultTreeKey},on:{"node-drop":e.handleDrop,"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.title}},[a("span",[1==i.nodeType?a("i",{staticClass:"iconfont icon-wenjianjia"}):e._e(),e._v(" "),2==i.nodeType?a("i",{staticClass:"iconfont icon-mulu"}):e._e(),e._v(" "),3==i.nodeType?a("i",{staticClass:"iconfont icon-yemian"}):e._e(),e._v(" "),4==i.nodeType?a("i",{staticClass:"iconfont icon-shouzhi"}):e._e(),e._v("\n                "+e._s(s.label)+"\n              ")])])}}])})],1)],1)],1),e._v(" "),a("el-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},[a("ul",{staticClass:"listWrap"},[a("li",[a("p",{staticClass:"list"},[e._v("功能名称:")]),e._v(" "),a("span",[e._v(e._s(e.menuText.title))])]),e._v(" "),a("li",[a("p",{staticClass:"list"},[e._v("迭代版本:")]),e._v(" "),a("span",[e._v(e._s(e.menuText.funCode))])]),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type&&"1"!=e.activeName,expression:"node_type==3&&activeName!='1'"}]},[a("p",{staticClass:"list"},[e._v("业务类型:")]),e._v(" "),a("span",[e._v(e._s(e._f("businessTypeOne")(e.businessText[0]))+" / "+e._s(e._f("businessTypeTwo")(e.businessText[1]))+" / "+e._s(e._f("businessTypeThree")(e.businessText[2]))+" / "+e._s(e.businessText[3]))])]),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type||4==e.node_type,expression:"node_type==3||node_type==4"}]},[a("p",{staticClass:"list"},[e._v("节点链接:")]),e._v(" "),a("span",[e._v(e._s(e.menuText.location))])]),e._v(" "),a("li",[a("p",{staticClass:"list"},[e._v("排序:")]),e._v(" "),a("span",[e._v(e._s(e.menuText.funOrder))])]),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type&&"1"!=e.activeName,expression:"node_type==3&&activeName!='1'"}]},[a("p",{staticClass:"list"},[e._v("是否接入流程:")]),e._v(" "),a("span",[e._v(e._s(e._f("isBus")(e.menuText.isBus)))])]),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type,expression:"node_type==3"}]},[a("p",{staticClass:"list"},[e._v("是否打印日志:")]),e._v(" "),a("span",[e._v(e._s(e._f("isPrint")(e.menuText.isPrint)))])]),e._v(" "),a("li",[a("p",{staticClass:"list"},[e._v("状态:")]),e._v(" "),a("span",[e._v(e._s(e._f("menuType")(e.menuText.active)))])]),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type&&"1"!=e.activeName,expression:"node_type==3&&activeName!='1'"}]},[a("p",{staticClass:"list"},[e._v("回退:")]),e._v(" "),a("span",[e._v(e._s(e.menuFrom.rbFlag?"是":"否"))])]),e._v(" "),a("li",[a("p",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type,expression:"node_type==3"}],staticClass:"list"},[e._v("作用域:")]),e._v(" "),a("span",[e._v(e._s(e._f("funLevel")(e.menuText.funLevel)))])]),e._v(" "),a("li",[a("p",{staticClass:"list"},[e._v("创建人:")]),e._v(" "),a("span",[e._v(e._s(e.createOperName))])]),e._v(" "),a("li",[a("p",{staticClass:"list"},[e._v("中文描述:")]),e._v(" "),a("span",[e._v(e._s(e.menuText.description))])]),e._v(" "),a("li",[a("p",{staticClass:"list"},[e._v("图标:")]),e._v(" "),a("img",{attrs:{src:e.menuText.icon,alt:""}})])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}]},[a("el-form",{ref:"menuFrom",staticClass:"menuFrom",attrs:{model:e.menuFrom,"label-width":"100px",rules:e.menuFromRules}},[a("el-row",{attrs:{gutter:10}},[a("ep-input",{attrs:{colspan:"10",label:"功能名称",value:e.menuFrom.title,name:"title"},on:{"input-message":e.onChange}}),e._v(" "),a("ep-input",{attrs:{colspan:"10",label:"迭代版本",value:e.menuFrom.funCode,name:"funCode"},on:{"input-message":e.onChange}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"!=e.activeName&&3==e.node_type,expression:"activeName!='1'&&node_type==3"}],attrs:{label:"业务类型"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.businessOptions,props:e.props,filterable:""},on:{"active-item-change":e.handleItemChange},model:{value:e.menuFrom.businessId,callback:function(t){e.$set(e.menuFrom,"businessId",t)},expression:"menuFrom.businessId"}})],1)],1),e._v(" "),3==e.node_type||4==e.node_type?a("ep-input",{attrs:{colspan:"10",label:"节点链接",value:e.menuFrom.location,name:"location"},on:{"input-message":e.onChange}}):e._e()],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入排序号码"},on:{change:e.orderChange},model:{value:e.menuFrom.funOrder,callback:function(t){e.$set(e.menuFrom,"funOrder",t)},expression:"menuFrom.funOrder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态",prop:"radio"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.menuFrom.active,callback:function(t){e.$set(e.menuFrom,"active",t)},expression:"menuFrom.active"}},[e._v("生效")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.menuFrom.active,callback:function(t){e.$set(e.menuFrom,"active",t)},expression:"menuFrom.active"}},[e._v("失效")])],1)],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"1"!=e.activeName&&3==e.node_type,expression:"activeName!='1'&&node_type==3"}]},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"是否接入流程"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.menuFrom.isBus,callback:function(t){e.$set(e.menuFrom,"isBus",t)},expression:"menuFrom.isBus"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.menuFrom.isBus,callback:function(t){e.$set(e.menuFrom,"isBus",t)},expression:"menuFrom.isBus"}},[e._v("否")])],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type,expression:"node_type==3"}],attrs:{span:10}},[a("el-form-item",{attrs:{label:"操作日志是否打印","label-width":"133px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.menuFrom.isPrint,callback:function(t){e.$set(e.menuFrom,"isPrint",t)},expression:"menuFrom.isPrint"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.menuFrom.isPrint,callback:function(t){e.$set(e.menuFrom,"isPrint",t)},expression:"menuFrom.isPrint"}},[e._v("否")])],1)],1)],1),e._v(" "),3==e.node_type?a("el-row",{attrs:{gutter:10}},[a("ep-select",{attrs:{eleDisabled:!e.isUserType,colspan:"10",value:e.menuFrom.funLevel,placeholder:"作用域",labelTitle:"作用域",name:"funLevel"},on:{"select-message":e.onChange}})],1):e._e(),e._v(" "),3==e.node_type&&"1"!=e.activeName?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"回退"}},[a("el-switch",{attrs:{disabled:e.userTypeDisabled,"active-color":"#13ce66"},model:{value:e.rbFlag,callback:function(t){e.rbFlag=t},expression:"rbFlag"}})],1)],1)],1):e._e(),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"中文描述",prop:"description"}},[a("el-input",{attrs:{rows:3,type:"textarea"},model:{value:e.menuFrom.description,callback:function(t){e.$set(e.menuFrom,"description",t)},expression:"menuFrom.description"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"图标："}},[a("el-upload",{staticClass:"upload-demo",attrs:{data:e.uploadData,action:"/api/fileUpload/upload","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"list-type":"picture"}},[e.menuFrom.icon?a("img",{staticClass:"avatar",attrs:{src:e.menuFrom.icon}}):e._e(),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png/svg文件")])],1)],1)],1)],1),e._v(" "),3==e.node_type?a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"权限："}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.showQXPZ}},[e._v("权限配置")])],1)],1)],1):e._e()],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"权限配置",visible:e.flageQXPZ,width:"30%"},on:{"update:visible":function(t){e.flageQXPZ=t}}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.QXPZloading,expression:"QXPZloading"}],ref:"QXPZtree",staticStyle:{"max-height":"300px",overflow:"auto"},attrs:{data:e.QXPZarr,props:e.QXPZprop,"node-key":"id","show-checkbox":""},on:{"check-change":e.CheckQXPZChange}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.flageQXPZ=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.flageQXPZ=!1,e.saveQXPZsave()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),"1"==e.activeName?[e.isShow?a("el-footer",{staticClass:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type,expression:"node_type==3"}],attrs:{size:"small",type:"primary"},on:{click:e.addRadio}},[e._v("新增按钮")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.node_type||2==e.node_type,expression:"node_type==1||node_type==2"}],attrs:{size:"small",type:"primary"},on:{click:e.addPage}},[e._v("新增功能模块")])],1):e._e(),e._v(" "),e.isShow?e._e():a("el-footer",{staticClass:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("menuFrom")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.cancel}},[e._v("取消")])],1)]:[e.isShow?a("el-footer",{staticClass:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.node_type||2==e.node_type,expression:"node_type==1||node_type==2"}],attrs:{size:"small",type:"primary"},on:{click:e.addPage}},[e._v("新增功能模块")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.node_type,expression:"node_type==1"}],attrs:{size:"small",type:"primary"},on:{click:e.addSmallMenu}},[e._v("新增子菜单")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3==e.node_type,expression:"node_type==3"}],attrs:{size:"small",type:"primary"},on:{click:e.addRadio}},[e._v("新增按钮")]),e._v(" "),a("div",{staticStyle:{margin:"0 10px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=e.menu_type,expression:"menu_type!=1"}],attrs:{size:"small",type:"primary"},on:{click:e.edit}},[e._v("编辑")])],1),e._v(" "),1!=e.menu_type?a("ep-delete",{attrs:{url:"/sys/function/deleteMenu",parmeId:"functionId",id:e.nodeId,init:!0},on:{init:e.initTree1}},[a("el-button",{attrs:{type:"warning",size:"small"}},[e._v("删除")])],1):e._e()],1):e._e(),e._v(" "),e.isShow?e._e():a("el-footer",{staticClass:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("menuFrom")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.cancel}},[e._v("取消")])],1)]],2)],1)},staticRenderFns:[]};var J=a("VU/8")(Z,W,!1,function(e){a("nO/G")},"data-v-4c0b06c0",null).exports,Y=a("iub5"),G={},ee={components:{treeTransfer:a.n(Y).a},data:function(){return{showNewPage:!1,menuId:"",isOper:!0,tableData:[],orgProps:{children:"children",label:"orgName",value:"id"},orgProps1:{children:"children",label:"areaName",value:"id"},orgModel:[],options:[],options1:[],infoCity:null,detailRowId:null,infoCityArr:[],isRepeat:!0,noProInfo:!1,configText:"自动审核",infoText:{auFlag:null,funLv:null,areaName:null,orgName:null},assignorGroup:[],examineType:"0",step:0,type:"0",dispatchRule:"4",isLeading:!1,funId:"",funName:"",roleDialog:!1,activeName:"",menuTree:[],material:[],isMaterial:!1,process:[{name:"",dispatchRule:"4",isMaterial:"",step:"",material:[],usersData:[],rolesData:[],fromData1:[],roleData:[],orgModel:[]}],isShow:!0,defaultProps:{children:"children",label:"title"},roleValue:[],roleData:[],PZloading:!0,userDialog:!0,createFalse:!1,createFalse1:!1,title:["未选项","已选项"],fromData:[],fromData1:[],toData:[],treeDefaultCheckedKeys:["4"],defaultCheckedKeys:[],isUserType:!1,logShow:!1,logList:[],logObj:{},logSize:10,logTotal:0,logCurrentPage:1,configId:"",saveLock:!1}},filters:{roleFilter:function(e){return G[e]},YYYYmmDD_Filter:function(e,t){if(!e)return"";var a=new Date(e);t=t||"yyyy-MM-dd hh:mm:ss";var s={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[i]:("00"+s[i]).substr((""+s[i]).length)));return t}},computed:{isOrgId:function(){return!0}},mounted:function(){this.isUserType=1==this.$Base64.decode(localStorage.getItem("userType"))},created:function(){var e=this;"a0b923820dcc509a"===this.$route.query.is&&(this.activeName="1"),"9d4c2f636f067f89"===this.$route.query.is&&(this.activeName="2"),"4b5ce2fe28308fd9"===this.$route.query.is&&(this.activeName="3"),"a2f3e71d9181a67b"===this.$route.query.is&&(this.activeName="4"),"bbce2345d7772b06"===this.$route.query.is&&(this.activeName="5"),"5a880faf6fb5e608"===this.$route.query.is&&(this.activeName="6"),"ceea167a5a36dedd"===this.$route.query.is&&(this.activeName="7"),"fb98ab9159f51fd0"===this.$route.query.is&&(this.activeName="8"),"2e2d7fbdea1afc51"===this.$route.query.is&&(this.activeName="9");var t=function e(t,a){for(var s=0;s<t.length;s++)t[s].children&&e(t[s].children,t[s]),2==t[s].type&&(t.splice(s,1),s--);a&&a.children&&0===a.children.length&&delete a.children};this.$get("/sys/org/queryTree").then(function(a){if(a.data.success){var s=JSON.parse(D()(a.data.result));t(s),e.options=s,e.options1=s}}),this.$get("/sys/org/getAllAreaTreeNodes").then(function(a){if(a.data.success){e.showNewPage=!0;var s=JSON.parse(D()(a.data.result));t(s)}else e.showNewPage=!1});var a=this;setTimeout(function(){a.initTree(),a.getUserList(),a.getRoleList(),a.userDialog=!1,a.createFalse=!0},16)},beforeRouteUpdate:function(e,t,a){"a0b923820dcc509a"===e.query.is&&(this.activeName="1"),"9d4c2f636f067f89"===e.query.is&&(this.activeName="2"),"4b5ce2fe28308fd9"===e.query.is&&(this.activeName="3"),"a2f3e71d9181a67b"===e.query.is&&(this.activeName="4"),"bbce2345d7772b06"===e.query.is&&(this.activeName="5"),"5a880faf6fb5e608"===e.query.is&&(this.activeName="6"),"ceea167a5a36dedd"===e.query.is&&(this.activeName="7"),"fb98ab9159f51fd0"===e.query.is&&(this.activeName="8"),"2e2d7fbdea1afc51"===e.query.is&&(this.activeName="9"),this.menuTree=[],this.initTree(),this.getUserList(),this.getRoleList(),this.isShow=!0,a()},methods:{changeExamineType:function(){this.isLeading=!1},reflesh:function(){this.getDetail(this.detailRowId,"nodeClick")},logCurrentChange:function(e){this.logSize=e,this.editLog()},logSizeChange:function(e){this.logCurrentPage=e},initTree:function(e){var t=this;this.$get("/sys/function/queryTree",{funType:this.activeName}).then(function(a){t.menuTree=a.data.result,e&&(t.treeDefaultCheckedKeys=[e])})},getUserList:function(){var e=this,t=0==this.orgModel.length?"":this.orgModel[this.orgModel.length-1];this.PZloading=!0,this.$get("/sys/config/queryUser",{funType:this.activeName,orgId:t}).then(function(t){if(t.data.success){e.PZloading=!1;for(var a=t.data.result,s=0;s<a.length;s++)a[s].id=a[s].roleId;e.fromData=a,e.showNewPage?e.fromData1=JSON.parse(D()(a)):e.fromData1=a}})},handleChange:function(){this.orgModel.length<4&&"271"!=this.orgModel[1]?this.orgModel=[]:(this.getUserList(),this.getRoleList(),this.getDetail(this.funId))},handleChange1:function(e,t){var a=this;this.process[t].rolesData=[],this.process[t].usersData=[];var s=0==e.length?"":e[e.length-1];this.PZloading=!0,this.$get("/sys/config/queryUser",{funType:this.activeName,orgId:s}).then(function(e){if(e.data.success){a.PZloading=!1;for(var s=e.data.result,i=0;i<s.length;i++)s[i].id=s[i].roleId;a.process[t].fromData1=s}}),this.$get("/sys/config/queryRole",{funType:this.activeName,orgId:s}).then(function(e){if(e.data.success){a.process[t].roleData=e.data.result;var s=e.data.result,i=!0,r=!1,n=void 0;try{for(var o,l=S()(s);!(i=(o=l.next()).done);i=!0){var c=o.value;G[c.id]=c.roleName}}catch(e){r=!0,n=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw n}}}})},noNegative:function(e,t){e.wordCount=t.target.value.replace(/\-/g,""),e.wordCount=t.target.value.replace(/\D/g,"")},getRoleList:function(){var e=this,t=0==this.orgModel.length?"":this.orgModel[this.orgModel.length-1];this.$get("/sys/config/queryRole",{funType:this.activeName,orgId:t}).then(function(t){if(t.data.success){e.roleData=t.data.result;var a=t.data.result,s=!0,i=!1,r=void 0;try{for(var n,o=S()(a);!(s=(n=o.next()).done);s=!0){var l=n.value;G[l.id]=l.roleName}}catch(e){i=!0,r=e}finally{try{!s&&o.return&&o.return()}finally{if(i)throw r}}}})},tabClick:function(){this.menuTree=[],this.initTree(),this.getUserList(),this.getRoleList(),this.isShow=!0},save:function(){for(var e=this,t=0;t<this.process.length;t++){if(this.process[t].isMaterial){if("0"==this.process[t].material.length)return void this.$message.error("补充资料不能为空");if(""==this.process[t].material[0].name||""==this.process[t].material[0].wordCount)return void this.$message.error("补充资料不能为空")}if(0===this.process[t].usersData.length&&0===this.process[t].rolesData.length&&!this.isUserType)return void this.$message.error("请先在第"+(t+1)+"层审核选择审核员工或者角色信息")}if(0!=this.process.length||"1"!=this.examineType||this.isLeading){for(var a=JSON.parse(D()(this.process)),s=0;s<a.length;s++){if(a[s].roles=[],a[s].rolesData.length>0)for(var i=0;i<a[s].rolesData.length;i++)a[s].roles.push({roleId:a[s].rolesData[i],roleName:G[a[s].rolesData[i]]});if(this.showNewPage&&(a[s].orgModel.length>0?(a[s].orgIdPath=a[s].orgModel.join(","),a[s].orgId=a[s].orgModel[a[s].orgModel.length-1].toString()):(a[s].orgIdPath="",a[s].orgId="")),a[s].usersData.length>0){a[s].users=[];for(var r=0;r<a[s].usersData.length;r++)a[s].users.push({userId:a[s].usersData[r].id,userName:a[s].usersData[r].displayName})}delete a[s].rolesData,delete a[s].usersData,delete a[s].orgModel,delete a[s].fromData1,delete a[s].roleData,a[s].isMaterial||(a[s].material=[]),a[s].isMaterial=Number(a[s].isMaterial)}var n=0==this.orgModel.length?"":this.orgModel[this.orgModel.length-1];if(this.saveLock)return!1;this.saveLock=!0;var l=o.Loading.service({text:"保存中..."});this.$post("/sys/config/doSave",{id:this.menuId,orgId:n,auFlag:this.examineType,funId:this.funId,funName:this.funName||"保存菜单",isLeading:this.isLeading?"0":"1",isProRepeat:this.isRepeat?"0":"1",areaId:this.infoCity,process:a}).then(function(t){e.$mess(t),t.success?(e.saveLock=!1,l.close(),e.$sysCreatHtml(t.result,e.logObj),e.isShow=!0,e.getDetail(e.funId)):(e.saveLock=!1,l.close())}).catch(function(t){e.saveLock=!1,l.close()})}else this.$message.error("手动审核时，至少需要一个审核流程")},saveUserTag:function(){for(var e=[],t=0;t<this.toData.length;t++)for(var a=0;a<this.toData[t].children.length;a++)e.push(this.toData[t].children[a]);this.process[this.step].usersData=e,this.userDialog=!1},saveRoleTag:function(){this.rolesData=[],this.process[this.step].rolesData=JSON.parse(D()(this.roleValue)),this.roleDialog=!1},addRole:function(e){this.step=e,this.showNewPage&&(this.roleData=this.process[e].roleData),this.roleDialog=!0},addUser:function(e){this.step=e,this.userDialog=!0},treeAddUser:function(e,t,a){this.toData=t,this.fromData=e},treeRemoveUser:function(e,t,a){this.toData=t,this.fromData=e},tagClose:function(e,t,a){this.isUserType||(this.process[t].rolesData.splice(this.process[t].rolesData.indexOf(e),1),this.roleValue=this.process[t].rolesData)},tagUserClose:function(e,t){if(!this.isUserType){this.$refs.tree.$refs["to-tree"].setCheckedKeys([e.id]),this.$refs.tree.removeToSource();for(var a="",s=0;s<this.process[t].usersData.length;s++)this.process[t].usersData[s].id==e.id&&(a=s);this.process[t].usersData.splice(a,1)}},addTable:function(e){this.process[e].material.push({name:"",wordCount:""})},handleNodeClick:function(e,t){this.isShow=!0,this.infoCity=null,3!=e.nodeType&&4!=e.nodeType||(this.createFalse1=!0,this.process=[],this.funId=e.id,this.funName=e.title,this.funId&&this.getDetail(e.id,"nodeClick"))},getDetail:function(e,t){var a=this;this.process=[],this.detailRowId=e,this.$get("/sys/config/configDetails",{funId:this.detailRowId,areaId:this.infoCity}).then(function(e){if(e.data.success){var s=e.data.result;if(a.infoText.auFlag=s.checkConfig?s.checkConfig.auFlag:null,a.infoText.funLv=s.funLv,a.infoText.areaName=s.areaName,a.infoText.orgName=s.orgName,a.infoCityArr=s.areaList,!s)return!1;if(s.checkConfig?(""==s.checkConfig||"0"==s.checkConfig.isProRepeat?a.isRepeat=!0:a.isRepeat=!1,""==s.checkConfig||"0"==s.checkConfig.auFlag?(a.noProInfo=!1,a.configText="自动审核"):(a.examineType="1",a.noProInfo=!0,a.configText="手动审核"),a.menuId=s.checkConfig.id,a.isLeading=0==s.checkConfig.isLeading):(a.menuId="",a.isLeading=!1),a.isOper=s.isOper,s.proInfo.length>0)if(a.process=[],a.showNewPage)for(var i=function(e){var t={name:s.proInfo[e].name,dispatchRule:s.proInfo[e].dispatchRule,isMaterial:Boolean(Number(s.proInfo[e].isMaterial)),step:s.proInfo[e].step,material:s.proInfo[e].materiaList,orgModel:s.proInfo[e].orgIdPath?s.proInfo[e].orgIdPath.split(",").map(function(e){return parseInt(e)}):[],usersData:s.proInfo[e].userList.map(function(e){return e.id=e.userId,e.displayName=e.userName,e}),rolesData:s.proInfo[e].roleList.map(function(e){return e.roleId})};if(s.proInfo[e].orgIdPath){var i=s.proInfo[e].orgIdPath.split(","),r=0==i.length?"":i[i.length-1];a.PZloading=!0,a.$get("/sys/config/queryUser",{funType:a.activeName,orgId:r}).then(function(e){if(e.data.success){a.PZloading=!1;for(var s=e.data.result,i=0;i<s.length;i++)s[i].id=s[i].roleId;t.fromData1=JSON.parse(D()(s))}}),a.$get("/sys/config/queryRole",{funType:a.activeName,orgId:r}).then(function(e){if(e.data.success){var a=e.data.result,s=!0,i=!1,r=void 0;try{for(var n,o=S()(a);!(s=(n=o.next()).done);s=!0){var l=n.value;G[l.id]=l.roleName}}catch(e){i=!0,r=e}finally{try{!s&&o.return&&o.return()}finally{if(i)throw r}}t.roleData=JSON.parse(D()(a))}})}a.process.push(t)},r=0;r<s.proInfo.length;r++)i(r);else for(var n=0;n<s.proInfo.length;n++)a.process.push({name:s.proInfo[n].name,dispatchRule:s.proInfo[n].dispatchRule,isMaterial:Boolean(Number(s.proInfo[n].isMaterial)),step:s.proInfo[n].step,material:s.proInfo[n].materiaList,orgModel:s.proInfo[n].orgIdPath?s.proInfo[n].orgIdPath.split(",").map(function(e){return parseInt(e)}):[],usersData:s.proInfo[n].userList.map(function(e){return e.id=e.userId,e.displayName=e.userName,e}),rolesData:s.proInfo[n].roleList.map(function(e){return e.roleId})});else t&&(a.orgModel=[])}})},edit:function(){if(this.isUserType&&"市级"===this.infoText.funLv&&null===this.infoCity)this.$message.warning("请先选择地市");else{var e,t=document.querySelector(".el-main"),a=document.querySelectorAll("input"),s=document.querySelectorAll("textarea"),i=document.querySelectorAll("link");e=i.length>0?i[0].href:"http://10.85.94.238:10540/openapiApp/download?key=bizamt/rdm/1562901848299M87.css";for(var r=0;r<a.length;r++)a[r].setAttribute("data-test",a[r].value);for(var n=0;n<s.length;n++)s[n].setAttribute("data-test",s[n].value);this.logObj.linkHref=e,this.logObj.el='<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0"><title></title><link href="'+e+'" rel="stylesheet"></head>\n                  <body><div style="position: fixed;width:100%;height:100%;z-index: 9999;"></div><div id="app"><section class="el-container" ><section  class="el-container is-vertical">\n                  <div  class="ep-tabs"><main class="el-main">'+t.innerHTML+"</main></div></section></section>\n                  </div></body></html>",this.isShow=!1}},editLog:function(){var e=this;this.$get("sys/config/log",{pageSize:this.logSize,pageNum:this.logCurrentPage,configId:this.menuId}).then(function(t){e.logList=t.data.result}),this.logShow=!0},checkHtml:function(e,t){window.open(this.$api+"/sys/snapshot/download?logId="+t.logId)},add:function(){if(this.isOper){var e=this.process.length;this.process.push({name:"审核"+(Number(e)+1),dispatchRule:"4",isMaterial:"",step:e,material:[],usersData:[],rolesData:[],fromData1:this.fromData1,roleData:this.roleData,orgModel:this.orgModel})}else this.$message.error("当前用户权限不足，只可以修改角色和员工")},deleteTable:function(e,t){this.process[t].material.splice(e,1)},deleteIndex:function(e){if(!this.isOper)return this.$message.error("当前用户权限不足，不能删除审核层级"),!1;this.process.splice(e,1)},unshift:function(e){var t=this.process.length;this.process.splice(e,0,{name:"审核"+(Number(t)+1),dispatchRule:"4",isMaterial:"",step:e,material:[],usersData:[],rolesData:[],fromData1:this.fromData1,roleData:this.roleData,orgModel:this.orgModel})},roleClose:function(){this.roleValue=[],this.toData=[]},roleOpen:function(){this.roleValue=this.process[this.step].rolesData},userClose:function(){this.toData=[],this.fromData=[],this.defaultCheckedKeys=[]},userOpen:function(){this.showNewPage?this.fromData=JSON.parse(D()(this.process[this.step].fromData1)):this.fromData=JSON.parse(D()(this.fromData1));for(var e=[],t=0;t<this.process[this.step].usersData.length;t++)e.push(this.process[this.step].usersData[t].id);this.defaultCheckedKeys=e}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-aside",{attrs:{width:"300px"}},[a("el-tabs",{staticStyle:{position:"relative",left:"-10px"},attrs:{stretch:""},on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[1==e.activeName?a("el-tab-pane",{attrs:{label:"管理系统",name:"1"}},[a("div",{staticClass:"scroll"},[a("el-tree",{ref:"tree2",attrs:{"highlight-current":!0,data:e.menuTree,props:e.defaultProps,"node-key":"id","expand-on-click-node":!0,"default-expanded-keys":e.treeDefaultCheckedKeys},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.title}},[a("span",[3==i.nodeType?a("i",{staticClass:"iconfont icon-yemian"}):e._e(),e._v(" "),4==i.nodeType?a("i",{staticClass:"iconfont icon-shouzhi"}):e._e(),e._v("\n                  "+e._s(s.label)+"\n                ")])])}}],null,!1,2255625226)})],1)]):e._e(),e._v(" "),2==e.activeName?a("el-tab-pane",{attrs:{label:"经办系统",name:"2"}},[a("div",{staticClass:"scroll"},[a("el-tree",{ref:"tree2",attrs:{"highlight-current":!0,data:e.menuTree,props:e.defaultProps,"node-key":"id","expand-on-click-node":!0},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.title}},[a("span",[1==i.nodeType?a("i",{staticClass:"iconfont icon-wenjianjia"}):e._e(),e._v(" "),2==i.nodeType?a("i",{staticClass:"iconfont icon-yemian"}):e._e(),e._v(" "),3==i.nodeType?a("i",{staticClass:"iconfont icon-shouzhi"}):e._e(),e._v("\n                "+e._s(s.label)+"\n              ")])])}}],null,!1,1343606738)})],1)]):e._e(),e._v(" "),3==e.activeName?a("el-tab-pane",{attrs:{label:"工伤系统",name:"3"}},[a("div",{staticClass:"scroll"},[a("el-tree",{ref:"tree2",attrs:{"highlight-current":!0,data:e.menuTree,props:e.defaultProps,"node-key":"id","expand-on-click-node":!0},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.title}},[a("span",[1==i.nodeType?a("i",{staticClass:"iconfont icon-wenjianjia"}):e._e(),e._v(" "),2==i.nodeType?a("i",{staticClass:"iconfont icon-yemian"}):e._e(),e._v(" "),3==i.nodeType?a("i",{staticClass:"iconfont icon-shouzhi"}):e._e(),e._v("\n                "+e._s(s.label)+"\n              ")])])}}],null,!1,1343606738)})],1)]):e._e(),e._v(" "),4==e.activeName?a("el-tab-pane",{attrs:{label:"网报系统",name:"4"}},[a("div",{staticClass:"scroll"},[a("el-tree",{ref:"tree2",attrs:{"highlight-current":!0,data:e.menuTree,props:e.defaultProps,"node-key":"id","expand-on-click-node":!0},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.title}},[a("span",[1==i.nodeType?a("i",{staticClass:"iconfont icon-wenjianjia"}):e._e(),e._v(" "),2==i.nodeType?a("i",{staticClass:"iconfont icon-yemian"}):e._e(),e._v(" "),3==i.nodeType?a("i",{staticClass:"iconfont icon-shouzhi"}):e._e(),e._v("\n                "+e._s(s.label)+"\n              ")])])}}],null,!1,1343606738)})],1)]):e._e(),e._v(" "),5==e.activeName?a("el-tab-pane",{attrs:{label:"城乡系统",name:"5"}},[a("div",{staticClass:"scroll"},[a("el-tree",{ref:"tree2",attrs:{"highlight-current":!0,data:e.menuTree,props:e.defaultProps,"node-key":"id","expand-on-click-node":!0},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.title}},[a("span",[1==i.nodeType?a("i",{staticClass:"iconfont icon-wenjianjia"}):e._e(),e._v(" "),2==i.nodeType?a("i",{staticClass:"iconfont icon-yemian"}):e._e(),e._v(" "),3==i.nodeType?a("i",{staticClass:"iconfont icon-shouzhi"}):e._e(),e._v("\n                "+e._s(s.label)+"\n              ")])])}}],null,!1,1343606738)})],1)]):e._e(),e._v(" "),6==e.activeName?a("el-tab-pane",{attrs:{label:"技术支撑平台",name:"6"}},[a("div",{staticClass:"scroll"},[a("el-tree",{ref:"tree2",attrs:{"highlight-current":!0,data:e.menuTree,props:e.defaultProps,"node-key":"id","expand-on-click-node":!0},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node",attrs:{title:i.title}},[a("span",[1==i.nodeType?a("i",{staticClass:"iconfont icon-wenjianjia"}):e._e(),e._v(" "),2==i.nodeType?a("i",{staticClass:"iconfont icon-yemian"}):e._e(),e._v(" "),3==i.nodeType?a("i",{staticClass:"iconfont icon-shouzhi"}):e._e(),e._v("\n                "+e._s(s.label)+"\n              ")])])}}],null,!1,1343606738)})],1)]):e._e()],1)],1),e._v(" "),e.createFalse1?a("el-container",[a("el-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow&&!e.logShow&&e.showNewPage,expression:"isShow && !logShow && showNewPage"}]},[a("div",{staticClass:"top",staticStyle:{display:"flex","flex-direction":"column"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("审核类型："+e._s(e.infoText.auFlag?"0"===e.infoText.auFlag?"自动审核":"手动审核":"-"))]),e._v(" "),e.isLeading?a("span",{staticClass:"size14",staticStyle:{margin:"20px",color:"#409EFF"}},[e._v("以柜面为准")]):e._e()]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("作用域："+e._s(e.infoText.funLv?e.infoText.funLv:"-"))])]),e._v(" "),"市级"!==e.infoText.funLv?a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("对应地市："+e._s(e.infoText.areaName?e.infoText.areaName:"-"))])]):e._e(),e._v(" "),e.isUserType&&"市级"===e.infoText.funLv?a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("对应地市：\n                "),a("el-select",{attrs:{placeholder:"请选择地市",size:"mini"},on:{change:function(t){return e.getDetail(e.detailRowId)}},model:{value:e.infoCity,callback:function(t){e.infoCity=t},expression:"infoCity"}},e._l(e.infoCityArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.areaName,value:e.id}})}),1)],1)]):e._e(),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("所属机构："+e._s(e.infoText.orgName?e.infoText.orgName:"-"))])])]),e._v(" "),e.noProInfo?a("h2",{directives:[{name:"show",rawName:"v-show",value:e.isOrgId,expression:"isOrgId"}],staticClass:"size16 h2"},[e._v("审核流程")]):e._e(),e._v(" "),e.noProInfo?a("el-timeline",{directives:[{name:"show",rawName:"v-show",value:e.isOrgId,expression:"isOrgId"}],attrs:{reverse:!1}},e._l(e.process,function(t,s){return a("el-timeline-item",{key:s,attrs:{type:"primary"}},[a("div",{staticClass:"card"},[a("p",{staticClass:"cardP"},[e._v(e._s(t.name))]),e._v(" "),a("el-card",{staticClass:"elCard"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.isUse,expression:"!activity.isUse"}]},[a("el-form-item",{attrs:{label:"分派规则:"}},[e._v(e._s(e._f("dispatchRule")(e.process[s].dispatchRule)))]),e._v(" "),a("div",{staticClass:"shenhe"},[a("div",{staticClass:"shenhe1"},[a("el-form-item",{attrs:{label:"审核机构:"}},[a("div",{staticClass:"tag"},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.options1,props:e.orgProps,placeholder:"请选择机构","show-all-levels":!1,disabled:"",size:"small"},model:{value:e.process[s].orgModel,callback:function(t){e.$set(e.process[s],"orgModel",t)},expression:"process[index].orgModel"}})],1)])],1),e._v(" "),a("div",{staticClass:"shenhe2"},[a("el-form-item",{attrs:{label:"审核角色:"}},[a("div",{staticClass:"tag"},e._l(t.rolesData,function(t,s){return a("el-tag",{key:s},[e._v(e._s(e._f("roleFilter")(t)))])}),1)]),e._v(" "),a("el-form-item",{attrs:{label:"审核员工:"}},[a("div",{staticClass:"tag"},e._l(t.usersData,function(t,s){return a("el-tag",{key:s},[e._v(e._s(t.userName))])}),1)])],1)]),e._v(" "),0!=t.material.length?a("el-form-item",{staticStyle:{display:"flex","margin-top":"10px"},attrs:{label:"补充资料:"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.material,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"资料名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                              "+e._s(t.row.name)+"\n                            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"wordCount",label:"字数限制",width:"180"}})],1)],1):e._e()],1)],1)],1)])}),1):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow&&!e.logShow&&!e.showNewPage,expression:"isShow && !logShow && !showNewPage"}]},[a("div",{staticClass:"top",staticStyle:{display:"flex","flex-direction":"column"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("审核类型："+e._s(e.infoText.auFlag?"0"===e.infoText.auFlag?"自动审核":"手动审核":"-"))]),e._v(" "),e.isLeading?a("span",{staticClass:"size14",staticStyle:{margin:"20px",color:"#409EFF"}},[e._v("以柜面为准")]):e._e()]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("作用域："+e._s(e.infoText.funLv?e.infoText.funLv:"-"))])]),e._v(" "),"市级"!==e.infoText.funLv?a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("对应地市："+e._s(e.infoText.areaName?e.infoText.areaName:"-"))])]):e._e(),e._v(" "),e.isUserType&&"市级"===e.infoText.funLv?a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("对应地市：\n                "),a("el-select",{attrs:{placeholder:"请选择地市",size:"mini"},on:{change:function(t){return e.getDetail(e.detailRowId)}},model:{value:e.infoCity,callback:function(t){e.infoCity=t},expression:"infoCity"}},e._l(e.infoCityArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.areaName,value:e.id}})}),1)],1)]):e._e(),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"size14"},[e._v("所属机构："+e._s(e.infoText.orgName?e.infoText.orgName:"-"))])])]),e._v(" "),e.noProInfo?a("h2",{directives:[{name:"show",rawName:"v-show",value:e.isOrgId,expression:"isOrgId"}],staticClass:"size16 h2"},[e._v("审核流程")]):e._e(),e._v(" "),e.noProInfo?a("el-timeline",{directives:[{name:"show",rawName:"v-show",value:e.isOrgId,expression:"isOrgId"}],attrs:{reverse:!1}},e._l(e.process,function(t,s){return a("el-timeline-item",{key:s,attrs:{type:"primary"}},[a("div",{staticClass:"card"},[a("p",{staticClass:"cardP"},[e._v(e._s(t.name))]),e._v(" "),a("el-card",{staticClass:"elCard"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.isUse,expression:"!activity.isUse"}]},[a("el-form-item",{attrs:{label:"分派规则:"}},[e._v(e._s(e._f("dispatchRule")(e.process[s].dispatchRule)))]),e._v(" "),a("el-form-item",{attrs:{label:"审核角色:"}},[a("div",{staticClass:"tag"},e._l(t.rolesData,function(t,s){return a("el-tag",{key:s},[e._v(e._s(e._f("roleFilter")(t)))])}),1)]),e._v(" "),a("el-form-item",{attrs:{label:"审核员工:"}},[a("div",{staticClass:"tag"},e._l(t.usersData,function(t,s){return a("el-tag",{key:s},[e._v(e._s(t.userName))])}),1)]),e._v(" "),0!=t.material.length?a("el-form-item",{staticStyle:{display:"flex","margin-top":"10px"},attrs:{label:"补充资料:"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.material,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"资料名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                              "+e._s(t.row.name)+"\n                            ")]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"wordCount",label:"字数限制",width:"180"}})],1)],1):e._e()],1)],1)],1)])}),1):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShow&&!e.logShow&&e.showNewPage,expression:"!isShow && !logShow && showNewPage"}]},[a("div",{staticClass:"top"},[a("el-form",[a("el-row",{staticStyle:{display:"flex"}},[a("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"审核类型"}},[a("el-select",{attrs:{disabled:!e.isUserType,placeholder:"请选择审核类型",size:"small"},on:{change:e.changeExamineType},model:{value:e.examineType,callback:function(t){e.examineType=t},expression:"examineType"}},[a("el-option",{attrs:{value:"0",label:"自动审核"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"手动审核"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.examineType,expression:"examineType=='1'"}],staticStyle:{margin:"0 20px"},attrs:{label:""}},[a("el-checkbox",{attrs:{disabled:!e.isUserType&&!e.isOper},model:{value:e.isLeading,callback:function(t){e.isLeading=t},expression:"isLeading"}},[e._v("柜面主导")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.examineType,expression:"examineType=='1'"}],attrs:{label:""}},[a("el-checkbox",{attrs:{disabled:!e.isUserType&&!e.isOper},model:{value:e.isRepeat,callback:function(t){e.isRepeat=t},expression:"isRepeat"}},[e._v("允许审核人员重复")])],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.examineType&!e.isLeading,expression:"examineType==1&!isLeading"}]},[a("h2",{staticClass:"size16 h2"},[e._v("审核流程配置")]),e._v(" "),a("el-timeline",{attrs:{reverse:!1}},e._l(e.process,function(t,s){return a("el-timeline-item",{key:s,attrs:{type:"primary"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"inputP"},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!t.isUse,expression:"!activity.isUse"}],staticStyle:{width:"70px"},attrs:{maxlength:"6",size:"mini"},model:{value:e.process[s].name,callback:function(t){e.$set(e.process[s],"name",t)},expression:"process[index].name"}}),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.isUse,expression:"activity.isUse"}],staticStyle:{width:"70px","margin-top":"10px"},attrs:{size:"mini"}},[e._v("经办")])],1),e._v(" "),a("el-card",{staticClass:"elCard"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.isUse,expression:"!activity.isUse"}]},[a("el-form-item",{attrs:{label:"分派规则:"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isUserType,expression:"isUserType"}],staticStyle:{float:"right",padding:"3px 8px","margin-left":"10px","font-size":"20px",cursor:"pointer",color:"#000","line-height":"20px"},attrs:{type:"text"},on:{click:function(t){return e.deleteIndex(s)}}},[e._v("✕")]),e._v(" "),a("el-select",{attrs:{disabled:!e.isUserType&&!e.isOper,value:"4",size:"small",placeholder:"请选择审核类型"},model:{value:e.process[s].dispatchRule,callback:function(t){e.$set(e.process[s],"dispatchRule",t)},expression:"process[index].dispatchRule"}},[a("el-option",{attrs:{value:"1",label:"自主签领"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"手动指派",disabled:!0}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"系统轮循",disabled:!0}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"系统随机"}}),e._v(" "),a("el-option",{attrs:{value:"5",label:"规则分派",disabled:!0}})],1)],1),e._v(" "),a("el-checkbox",{staticStyle:{margin:"10px 0"},attrs:{disabled:!e.isUserType&&!e.isOper},model:{value:e.process[s].isMaterial,callback:function(t){e.$set(e.process[s],"isMaterial",t)},expression:"process[index].isMaterial"}},[e._v("审核时需要补充资料")]),e._v(" "),e.process[s].isMaterial?a("el-form-item",{attrs:{label:"","label-width":"70px"}},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:e.process[s].material,border:""}},[a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{disabled:!e.isUserType&&!e.isOper,size:"mini",type:"text"},on:{click:function(a){return e.deleteTable(t.$index,s)}}},[e._v("删除")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"资料名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:!e.isUserType&&!e.isOper,size:"mini"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"wordCount",label:"字数限制"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:!e.isUserType&&!e.isOper,size:"mini",type:"text",maxlength:"3"},nativeOn:{input:function(a){return e.noNegative(t.row,a)}},model:{value:t.row.wordCount,callback:function(a){e.$set(t.row,"wordCount",e._n(a))},expression:"scope.row.wordCount"}})]}}],null,!0)})],1),e._v(" "),a("el-button",{staticStyle:{margin:"5px 0 10px 0"},attrs:{disabled:!e.isUserType&&!e.isOper,size:"mini",type:"primary"},on:{click:function(t){return e.addTable(s)}}},[e._v("+添加")])],1):e._e(),e._v(" "),a("el-form-item",[a("div",[e._v("审核对象：")]),e._v(" "),a("div",{staticClass:"shenhe"},[a("div",{staticClass:"shenhe3"},[a("div",[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.options1,disabled:e.isUserType,props:e.orgProps,placeholder:"请选择机构","show-all-levels":!1,size:"small"},on:{change:function(t){return e.handleChange1(t,s)}},model:{value:e.process[s].orgModel,callback:function(t){e.$set(e.process[s],"orgModel",t)},expression:"process[index].orgModel"}})],1)]),e._v(" "),a("div",{staticClass:"shenhe4"},[a("div",{staticClass:"tag"},[a("p",[a("el-button",{attrs:{type:"text",disabled:e.isUserType},on:{click:function(t){return e.addRole(s)}}},[e._v("+添加角色")])],1),e._v(" "),e._l(e.process[s].rolesData,function(t,i){return a("el-tag",{key:i,staticStyle:{"margin-left":"5px"},attrs:{closable:"",index:t,label:t},on:{close:function(a){return e.tagClose(t,s,i)}}},[e._v(e._s(e._f("roleFilter")(t)))])})],2),e._v(" "),a("div",{staticClass:"tag"},[a("p",[a("el-button",{attrs:{type:"text",disabled:e.isUserType},on:{click:function(t){return e.addUser(s)}}},[e._v("+添加员工")])],1),e._v(" "),e._l(e.process[s].usersData,function(t,i){return a("el-tag",{key:i,staticStyle:{"margin-left":"5px"},attrs:{closable:"",index:t.id,label:t.displayName},on:{close:function(a){return e.tagUserClose(t,s,i)}}},[e._v(e._s(t.displayName))])})],2)])])])],1)],1)],1)])}),1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isUserType,expression:"isUserType"}],staticClass:"add",on:{click:e.add}},[e._v("添加审核层级")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShow&&!e.logShow&&!e.showNewPage,expression:"!isShow && !logShow && !showNewPage"}]},[a("div",{staticClass:"top"},[a("el-form",[a("el-row",{staticStyle:{display:"flex"}},[a("el-form-item",{staticStyle:{display:"flex"},attrs:{label:"审核类型"}},[a("el-select",{attrs:{disabled:!e.isUserType,placeholder:"请选择审核类型",size:"small"},model:{value:e.examineType,callback:function(t){e.examineType=t},expression:"examineType"}},[a("el-option",{attrs:{value:"0",label:"自动审核"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"手动审核"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.examineType,expression:"examineType=='1'"}],staticStyle:{margin:"0 20px"},attrs:{label:""}},[a("el-checkbox",{attrs:{disabled:!e.isUserType&&!e.isOper},model:{value:e.isLeading,callback:function(t){e.isLeading=t},expression:"isLeading"}},[e._v("柜面主导")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.examineType,expression:"examineType=='1'"}],attrs:{label:""}},[a("el-checkbox",{attrs:{disabled:!e.isUserType&&!e.isOper},model:{value:e.isRepeat,callback:function(t){e.isRepeat=t},expression:"isRepeat"}},[e._v("允许审核人员重复")])],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.examineType&!e.isLeading,expression:"examineType==1&!isLeading"}]},[a("h2",{staticClass:"size16 h2"},[e._v("审核流程配置")]),e._v(" "),a("el-timeline",{attrs:{reverse:!1}},e._l(e.process,function(t,s){return a("el-timeline-item",{key:s,attrs:{type:"primary"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"inputP"},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!t.isUse,expression:"!activity.isUse"}],staticStyle:{width:"70px"},attrs:{maxlength:"6",size:"mini"},model:{value:e.process[s].name,callback:function(t){e.$set(e.process[s],"name",t)},expression:"process[index].name"}}),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.isUse,expression:"activity.isUse"}],staticStyle:{width:"70px","margin-top":"10px"},attrs:{size:"mini"}},[e._v("经办")])],1),e._v(" "),a("el-card",{staticClass:"elCard"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.isUse,expression:"!activity.isUse"}]},[a("el-form-item",{attrs:{label:"分派规则:"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isUserType,expression:"isUserType"}],staticStyle:{float:"right",padding:"3px 8px","margin-left":"10px","font-size":"20px",cursor:"pointer",color:"#000","line-height":"20px"},attrs:{type:"text"},on:{click:function(t){return e.deleteIndex(s)}}},[e._v("✕")]),e._v(" "),a("el-select",{attrs:{disabled:!e.isUserType&&!e.isOper,value:"4",size:"small",placeholder:"请选择审核类型"},model:{value:e.process[s].dispatchRule,callback:function(t){e.$set(e.process[s],"dispatchRule",t)},expression:"process[index].dispatchRule"}},[a("el-option",{attrs:{value:"1",label:"自主签领"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"手动指派",disabled:!0}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"系统轮循",disabled:!0}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"系统随机"}}),e._v(" "),a("el-option",{attrs:{value:"5",label:"规则分派",disabled:!0}})],1)],1),e._v(" "),a("el-checkbox",{staticStyle:{margin:"10px 0"},attrs:{disabled:!e.isUserType&&!e.isOper},model:{value:e.process[s].isMaterial,callback:function(t){e.$set(e.process[s],"isMaterial",t)},expression:"process[index].isMaterial"}},[e._v("审核时需要补充资料")]),e._v(" "),e.process[s].isMaterial?a("el-form-item",{attrs:{label:"","label-width":"70px"}},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:e.process[s].material,border:""}},[a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{size:"mini",disabled:!e.isUserType&&!e.isOper,type:"text"},on:{click:function(a){return e.deleteTable(t.$index,s)}}},[e._v("删除")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"资料名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:!e.isUserType&&!e.isOper,size:"mini"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"wordCount",label:"字数限制"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:!e.isUserType&&!e.isOper,type:"text",maxlength:"3"},nativeOn:{input:function(a){return e.noNegative(t.row,a)}},model:{value:t.row.wordCount,callback:function(a){e.$set(t.row,"wordCount",e._n(a))},expression:"scope.row.wordCount"}})]}}],null,!0)})],1),e._v(" "),a("el-button",{staticStyle:{margin:"5px 0 10px 0"},attrs:{size:"mini",disabled:!e.isUserType&&!e.isOper,type:"primary"},on:{click:function(t){return e.addTable(s)}}},[e._v("+添加")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"审核对象:"}},[a("div",{staticClass:"tag"},[a("p",[a("el-button",{attrs:{type:"text",disabled:e.isUserType},on:{click:function(t){return e.addRole(s)}}},[e._v("+添加角色")])],1),e._v(" "),e._l(e.process[s].rolesData,function(t,i){return a("el-tag",{key:i,staticStyle:{"margin-left":"5px"},attrs:{closable:"",index:t,label:t},on:{close:function(a){return e.tagClose(t,s,i)}}},[e._v(e._s(e._f("roleFilter")(t)))])})],2),e._v(" "),a("div",{staticClass:"tag"},[a("p",[a("el-button",{attrs:{type:"text",disabled:e.isUserType},on:{click:function(t){return e.addUser(s)}}},[e._v("+添加员工")])],1),e._v(" "),e._l(e.process[s].usersData,function(t,i){return a("el-tag",{key:i,staticStyle:{"margin-left":"5px"},attrs:{closable:"",index:t.id,label:t.displayName},on:{close:function(a){return e.tagUserClose(t,s,i)}}},[e._v(e._s(t.displayName))])})],2)])],1)],1)],1)])}),1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isUserType,expression:"isUserType"}],staticClass:"add",on:{click:e.add}},[e._v("添加审核层级")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.logShow,expression:"logShow"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logList,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",label:"修改人员",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"修改人员IP",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"modifyTime",label:"修改时间2",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("YYYYmmDD_Filter")(t.row.modifyTime)))])]}}],null,!1,304311237)}),e._v(" "),a("el-table-column",{attrs:{prop:"typeBefore",label:"修改前审核类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeAfter",label:"修改后审核类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"floorBefore",label:"修改前审核层级",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"floorAfter",label:"修改后审核层级",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.checkHtml(t.$index,t.row)}}},[e._v("查看")])]}}],null,!1,190563350)})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.logCurrentPage,"page-sizes":[5,10,15,20,25,30,50,100,200],"page-size":e.logSize,layout:"total, sizes, prev, pager, next, jumper",total:e.logTotal},on:{"size-change":e.logSizeChange,"current-change":e.logCurrentChange}})],1)]),e._v(" "),a("el-footer",{directives:[{name:"show",rawName:"v-show",value:e.isOrgId,expression:"isOrgId"}],staticClass:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.logShow,expression:"logShow"}],attrs:{type:"primary"},on:{click:function(t){e.logShow=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow&&!e.logShow,expression:"isShow && !logShow"}],attrs:{type:"primary"},on:{click:e.editLog}},[e._v("修改记录")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow&&!e.logShow,expression:"isShow && !logShow"}],attrs:{type:"primary"},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isShow&&!e.logShow,expression:"!isShow && !logShow"}],attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isShow&&!e.logShow,expression:"!isShow && !logShow"}],attrs:{type:"primary"},on:{click:function(t){e.isShow=!0,e.reflesh()}}},[e._v("取消")])],1)],1):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"添加角色",visible:e.roleDialog,width:"40%"},on:{"update:visible":function(t){e.roleDialog=t},close:e.roleClose,opened:e.roleOpen}},[a("el-transfer",{staticStyle:{display:"flex"},attrs:{filterable:"","filter-placeholder":"请输入角色名称",data:e.roleData,props:{key:"id",label:"roleName"}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.option;return a("span",{attrs:{title:s.roleName}},[e._v(e._s(s.roleName))])}}]),model:{value:e.roleValue,callback:function(t){e.roleValue=t},expression:"roleValue"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleTag}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{modal:e.createFalse,title:"添加员工",visible:e.userDialog,width:"40%"},on:{"update:visible":function(t){e.userDialog=t},close:e.userClose,opened:e.userOpen}},[a("tree-transfer",{ref:"tree",attrs:{node_key:"id",title:e.title,from_data:e.fromData,to_data:e.toData,defaultProps:{label:"displayName"},pid:"parentId",mode:"transfer",height:"540px",defaultTransfer:!0,defaultCheckedKeys:e.defaultCheckedKeys,filter:"",openAll:""},on:{addBtn:e.treeAddUser,removeBtn:e.treeRemoveUser}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.userDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveUserTag}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ae=a("VU/8")(ee,te,!1,function(e){a("hD4a")},"data-v-705893d6",null).exports,se={data:function(){return{diaLogrules:{assignReason:this.$rules("请输入指派原因",100)},isSub:!0,currentPeople:"",activeName:"2",personDialog:!1,selfSearchForm:{operatioName:""},page:1,size:10,total:0,searchForm:{operatioName:"",arraignmentTime:[],arraignmentPeople:"",taskStatus:"",checkResult:""},assignorGroup:[],dialogForm:{assignReason:"",assignorName:""},proId:"",busId:"",belowProId:"",tableData:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},created:function(){this.activeName=this.$route.query.activeName||"2",this.search()},methods:{pageInit:function(e,t){this.page=e,this.size=t,this.search()},handleClick:function(){this.tableData=[],this.search()},rowClick:function(e){this.busId=e.id,this.proId=e.proId},seeClick:function(e){this.$router.push({path:"/home/examineSee",query:{busId:e.id,proId:e.proId,checkResult:e.checkResult,taskStatus:e.taskStatus,logId:e.prseno,activeName:this.activeName}})},seeClick2:function(e){this.$router.push({path:"/home/examineSee",query:{busId:e.id,proName:e.proName,logId:e.prseno,activeName:this.activeName}})},personDialogClose:function(){this.dialogForm.assignReason=""},diaLogSave:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.assignorGroup.filter(function(e,a,s){return e.id==t.dialogForm.assignorName}),s="";s=t.isSub?t.proId:t.belowProId,t.$post("/sys/business/manualAssign",{proId:s,busId:t.busId,assignorId:t.dialogForm.assignorName,assignorName:a[0].displayName,assignReason:t.dialogForm.assignReason}).then(function(e){t.$mess(e),e.success&&(t.personDialog=!1,t.search())})}})},assignClick:function(e,t){var a=this;this.isSub=t,this.belowProId=e.belowProId,this.personDialog=!0,this.$get("/sys/business/getUserList",{proId:e.proId,busId:e.id}).then(function(t){t.data.success&&(a.assignorGroup=t.data.result,a.assignorGroup.length>0&&(a.dialogForm.assignorName=a.assignorGroup[0].id),a.currentPeople=e.checkPeopleName)})},pointClick:function(e){this.$router.push({path:"/home/examineSee",query:{busId:e.id,proId:e.proId,checkResult:e.checkResult,logId:e.prseno,activeName:this.activeName}})},cancelClick:function(e){var t=this;this.$get("/sys/business/withdraw",{busId:e.id,proId:e.proId}).then(function(e){t.$mess(e.data),t.search()})},search:function(){var e=this,t="",a="";null!=this.searchForm.arraignmentTime&&this.searchForm.arraignmentTime.length>0&&(t=this.searchForm.arraignmentTime[0],a=this.searchForm.arraignmentTime[1]+"23:59:59");var s=this.searchForm.taskStatus||"";this.$get("/sys/business/queryTable",{operatioName:this.searchForm.operatioName,startArraignmentTime:t,endArraignmentTime:a,arraignmentPeople:this.searchForm.arraignmentPeople,taskStatus:s,checkResult:this.searchForm.checkResult||"",page:this.page,size:this.size,checkType:this.activeName,companyName:"",creditCode:"",busType:""}).then(function(t){t.data.pageList.success&&(e.tableData=t.data.pageList.result,e.total=t.data.count)})}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{width:"100px","text-align":"center"},attrs:{label:"由我审核",name:"2"}}),e._v(" "),a("el-tab-pane",{staticStyle:{width:"100px","text-align":"center"},attrs:{label:"由我提交",name:"1"}})],1),e._v(" "),a("div",[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"mini",placeholder:"操作名称","prefix-icon":"el-icon-search"},model:{value:e.searchForm.operatioName,callback:function(t){e.$set(e.searchForm,"operatioName",t)},expression:"searchForm.operatioName"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyyMMdd","picker-options":e.pickerOptions},model:{value:e.searchForm.arraignmentTime,callback:function(t){e.$set(e.searchForm,"arraignmentTime",t)},expression:"searchForm.arraignmentTime"}})],1),e._v(" "),2==e.activeName?a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{size:"mini",placeholder:"搜索提审人员姓名","prefix-icon":"el-icon-search"},model:{value:e.searchForm.arraignmentPeople,callback:function(t){e.$set(e.searchForm,"arraignmentPeople",t)},expression:"searchForm.arraignmentPeople"}})],1):e._e(),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"mini",placeholder:"任务状态",type:"small"},model:{value:e.searchForm.taskStatus,callback:function(t){e.$set(e.searchForm,"taskStatus",t)},expression:"searchForm.taskStatus"}},[a("el-option",{attrs:{value:"0",label:"待审核"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"已通过"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"已驳回"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"已撤销"}})],1)],1),e._v(" "),2==e.activeName?a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"mini",placeholder:"审核结果",type:"small"},model:{value:e.searchForm.checkResult,callback:function(t){e.$set(e.searchForm,"checkResult",t)},expression:"searchForm.checkResult"}},[a("el-option",{attrs:{value:"0",label:"待审核"}}),e._v(" "),a("el-option",{attrs:{value:"1",label:"通过"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"驳回"}})],1)],1):e._e(),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{align:"center",prop:"operatioName",label:"操作名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"arraignmentTime",label:"提审时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"arraignmentPeople",label:"提审人员"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"taskStatus",label:"任务状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{warning:"0"==t.row.taskStatus,success:"1"==t.row.taskStatus,error:"2"==t.row.taskStatus,info:"3"==t.row.taskStatus}},[e._v(e._s(e._f("taskStatus")(t.row.taskStatus)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"proName",label:"流程环节"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"checkPeopleName",label:"审核人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkPeopleName||"未指派"))])]}}])}),e._v(" "),2==e.activeName?a("el-table-column",{attrs:{align:"center",prop:"checkResult",label:"审核结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{info:"0"==t.row.taskStatus,success:"1"==t.row.taskStatus,error:"2"==t.row.taskStatus}},[e._v(e._s(e._f("checkResult")(t.row.checkResult)))])]}}],null,!1,546194722)}):e._e(),e._v(" "),2==e.activeName?a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"date",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.checkResult?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.assignClick(t.row,!0)}}},[e._v("指派")]):e._e(),e._v(" "),"2"==t.row.dispatchRule&&"1"==t.row.checkResult?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.assignClick(t.row,!1)}}},[e._v("指派下级")]):e._e(),e._v(" "),"0"==t.row.checkResult?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.pointClick(t.row)}}},[e._v("审核")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.seeClick(t.row)}}},[e._v("查看")]),e._v(" "),"0"!=t.row.checkResult&&"1"!=t.row.taskStatus?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.cancelClick(t.row)}}},[e._v("撤回")]):e._e()]}}],null,!1,3939306953)}):e._e(),e._v(" "),1==e.activeName?a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"date",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.taskStatus&&"0"==t.row.step&&"2"==t.row.dispatchRule?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.assignClick(t.row)}}},[e._v("指派")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.seeClick2(t.row)}}},[e._v("查看")])]}}],null,!1,3740607263)}):e._e()],1),e._v(" "),a("ep-page",{attrs:{total:e.total},on:{page:e.pageInit}})],1),e._v(" "),a("el-dialog",{attrs:{title:"指派人员",visible:e.personDialog,width:"30%"},on:{"update:visible":function(t){e.personDialog=t},close:e.personDialogClose}},[a("el-form",{ref:"dialogFormRef",attrs:{model:e.dialogForm,"label-width":"100px",rules:e.diaLogrules}},[a("el-form-item",{attrs:{label:"当前审核人员:"}},[a("span",[e._v(e._s(e.currentPeople))])]),e._v(" "),a("el-form-item",{attrs:{label:"指派原因:",prop:"assignReason"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.assignReason,callback:function(t){e.$set(e.dialogForm,"assignReason",t)},expression:"dialogForm.assignReason"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"可指派人员:"}},[e.assignorGroup.length>0?a("el-radio-group",{model:{value:e.dialogForm.assignorName,callback:function(t){e.$set(e.dialogForm,"assignorName",t)},expression:"dialogForm.assignorName"}},e._l(e.assignorGroup,function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.displayName))])}),1):a("div",[e._v("无指派人员")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.personDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.diaLogSave("dialogFormRef")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var re=a("VU/8")(se,ie,!1,function(e){a("unKG")},"data-v-00670c66",null).exports,ne=a("Gu7T"),oe=a.n(ne),le={data:function(){return{passFormList:[],showButton:"",isProcess:!0,infoDialog:!1,resultDialog:!1,isPass:!0,hideDetail:!0,iframeSrc:"",tableData:[],passForm:{content1:"",content2:"",content3:""},form:{rejectCause:""},proInfo:[],info:{name:"",time:"",person:"",status:""}}},created:function(){this.init();var e=window.location.protocol+"//"+window.location.host+this.$api+"/snapshot/download?logId=";this.iframeSrc=this.$route.query.logId?e+this.$route.query.logId:e+1790,0==this.$route.query.checkResult&&0==Boolean(this.$route.query.taskStatus)?this.showButton=1:0==this.$route.query.checkResult&&1==this.$route.query.taskStatus?this.showButton=2:0!=this.$route.query.taskStatus&&0!=this.$route.query.checkResult?this.showButton=3:0==this.$route.query.taskStatus&&(this.showButton=4),this.$route.query.proName&&(this.showButton=5)},methods:{init:function(){var e=this;this.$get("/sys/business/queryCheckInfo",{busId:this.$route.query.busId}).then(function(t){if(t.data.success){e.info.name=t.data.result.checkBusiness.operatioName,e.info.time=t.data.result.checkBusiness.arraignmentTime,e.info.person=t.data.result.checkBusiness.arraignmentPeople,e.info.status=t.data.result.checkBusiness.taskStatus,e.proInfo=t.data.result.proInfo;for(var a=0;a<e.proInfo.length;a++)e.proInfo[a].isModify=!0}})},passData:function(e){var t=this;if(1==e){for(var a=JSON.parse(D()(this.passFormList)),s=0;s<a.length;s++)delete a[s].createTime,delete a[s].hisId,delete a[s].modifyTime,delete a[s].name,delete a[s].proId,delete a[s].wordCount;this.$post("/sys/business/check",{busId:this.$route.query.busId,proId:this.$route.query.proId,materia:[].concat(oe()(a))}).then(function(e){t.$mess(e),t.resultDialog=!1,t.$router.push("/home/sys/business/queryTable")})}else this.$get("/sys/business/reject",{busId:this.$route.query.busId,proId:this.$route.query.proId,rejectCause:this.form.rejectCause}).then(function(e){t.resultDialog=!1})},cancelClick:function(){var e=this;this.$get("/sys/business/withdraw",{busId:this.$route.query.busId,proId:this.$route.query.proId}).then(function(t){e.$mess(t.data),e.search()})},hiddenProcess:function(){this.isProcess=!this.isProcess},hideModify:function(e){this.proInfo[e].isModify=!this.proInfo[e].isModify,this.proInfo.push()},seeInfo:function(e){this.infoDialog=!0,this.tableData=this.proInfo[e].materiaList},hideDetailClick:function(){this.hideDetail=!this.hideDetail},examineResult:function(e){var t=this;this.isPass=e,this.resultDialog=!0,e&&this.$post("/sys/business/getMateriaList",{proId:this.$route.query.proId}).then(function(e){e.success&&(t.passFormList=e.result)})},cancle:function(){this.$router.push({path:"/home/sys/business/queryTable",query:{activeName:this.$route.query.activeName}})}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"#app"},[a("div",{staticClass:"box"},[a("h3",{staticClass:"h3"},[e._v("基础信息")]),e._v(" "),a("h4",{staticClass:"h4",class:{warning1:"0"==e.info.status,success1:"1"==e.info.status,error1:"2"==e.info.status,info1:"3"==e.info.status}},[e._v(e._s(e._f("taskStatus")(e.info.status)))]),e._v(" "),a("el-row",{staticClass:"list"},[a("el-col",{attrs:{span:6}},[e._v("操作名称："+e._s(e.info.name))]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("提审时间："+e._s(e.info.time))]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("提审人员："+e._s(e.info.person))])],1)],1),e._v(" "),a("div",{staticClass:"box"},[a("h3",{staticClass:"h3"},[e._v("业务详情")]),e._v(" "),a("div",{staticStyle:{border:"1px solid #ccc"}},[a("iframe",{attrs:{scrolling:"auto",src:e.iframeSrc,frameborder:"0",marginheight:"0",marginwidth:"0",height:"500",width:"100%"}})])]),e._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"title"},[a("h3",{staticClass:"h3"},[e._v("审核流程")]),e._v(" "),a("span",{on:{click:e.hiddenProcess}},[e._v(e._s(e.isProcess?"隐藏审核流程":"显示审核流程"))])]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.isProcess,expression:"isProcess"}],staticClass:"proList"},e._l(e.proInfo,function(t,s){return a("li",{key:s,staticClass:"proLi"},[a("div",{staticClass:"left",class:{active:"0"==t.information[0].checkResult}},[a("div",{staticClass:"radio"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:s+1!=e.proInfo.length,expression:"index+1!=proInfo.length"}],staticClass:"line"})]),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"rightList"},[a("div",{staticClass:"num"},[e._v(e._s(t.name))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hideDetail,expression:"hideDetail"}],staticClass:"rightText"},[a("div",{staticClass:"text"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:e.hideDetail,expression:"hideDetail"}],staticClass:"textList"},[a("li",{staticClass:"textLi"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isModify&&t.assignList.length>0,expression:"item.isModify&&item.assignList.length>0"}],staticClass:"user"},[a("p",[e._v("审核人员："+e._s(t.assignList.length>0?t.assignList[0].assignorName:""))]),e._v(" "),a("p",{staticClass:"hideDetail",on:{click:function(t){return e.hideModify(s)}}},[e._v("隐藏指派更改明细")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isModify&&t.assignList.length>0,expression:"item.isModify&&item.assignList.length>0"}],staticClass:"smallAndLine"},[a("div",{staticClass:"line lineHeight"}),e._v(" "),a("div",{staticClass:"small"},[e._l(t.assignList,function(t,s){return a("p",{key:s,staticClass:"smallSpan"},[a("span",[e._v("指派人员："+e._s(t.assignorName))]),e._v(" "),a("span",[e._v("指派时间："+e._s(t.assignTime))]),e._v(" "),a("span",[e._v("指派原因："+e._s(t.assignReason))])])}),e._v(" "),a("p",{staticClass:"hideDetail"})],2)]),e._v(" "),a("div",{staticClass:"user bottomUser"},[a("p",[e._v("审核人员："+e._s(t.information[0].checkPeopleName))]),e._v(" "),a("p",[e._v("审核时间："+e._s(t.information[0].checkTime))]),e._v(" "),a("p",[e._v("审核结果："+e._s(e._f("checkResult")(t.information[0].checkResult)))]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"0"!=e.proInfo[s].isMaterial,expression:"proInfo[index].isMaterial=='0'?false:true"}],staticClass:"seeData",on:{click:function(t){return e.seeInfo(s)}}},[e._v("查看补充资料")]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.isModify,expression:"!item.isModify"}],staticClass:"hideDetail",on:{click:function(t){return e.hideModify(s)}}},[e._v("显示指派更改明细")])])])])])])])])])}),0)]),e._v(" "),a("div",{staticClass:"footer"},[3==e.showButton?a("el-button",{attrs:{type:"primary"},on:{click:e.cancelClick}},[e._v("撤回")]):e._e(),e._v(" "),2==e.showButton?a("el-button",{attrs:{type:"primary"}},[e._v("审核")]):e._e(),e._v(" "),1==e.showButton?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.examineResult(!0)}}},[e._v("通过")]):e._e(),e._v(" "),1==e.showButton?a("el-button",{on:{click:function(t){return e.examineResult(!1)}}},[e._v("驳回")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancle}},[e._v("返回")])],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.infoDialog,width:"30%"},on:{"update:visible":function(t){e.infoDialog=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"资料名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"content",label:"资料内容"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.infoDialog=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"结果确认",visible:e.resultDialog,width:"30%"},on:{"update:visible":function(t){e.resultDialog=t}}},[e.isPass?a("el-form",{ref:"passForm",attrs:{model:e.passForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核结果："}},[a("span",[e._v("通过")])]),e._v(" "),e._l(e.passFormList,function(t,s){return a("el-form-item",{key:s,attrs:{label:t.name}},[a("el-input",{attrs:{maxlength:t.wordCount,"show-word-limit":"",type:"textarea"},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1)})],2):a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核结果："}},[a("span",[e._v("驳回")])]),e._v(" "),a("el-form-item",{attrs:{label:"驳回原因："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.rejectCause,callback:function(t){e.$set(e.form,"rejectCause",t)},expression:"form.rejectCause"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resultDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.passData(e.isPass)}}},[e._v("确 认")])],1)],1)],1)},staticRenderFns:[]};var ue=a("VU/8")(le,ce,!1,function(e){a("09+H")},"data-v-065c5484",null).exports,de=a("2JQl"),pe=a.n(de),me=a("2gZA"),he=a.n(me),fe={},ge={},ve={},ye={};var be={data:function(){return{openStatus:"",isAdmin:"",qxfp_tree_selected:[],areaList:[],areaList_view:[],areaProps:{label:"orgName"},defaultCheck:[],defaultExpand:[],selOptions:[{value:1,label:"开通网报"},{value:2,label:"开通掌上办"},{value:3,label:"全部开通"}],isEmpty:!0,jbRewb:[],jbRewbDict:{},data1:{isPublic:"0"},opDaFlag:!1,opDaData:[],opDaId:null,opPageNum:1,opPageSize:10,opTotal:null,rightRules:{name:[{required:!0,message:"请输入事项名称",trigger:"blur"}],shortName:[{required:!0,message:"请输入事项简称",trigger:"blur"}]},basieUrl:"",pageNum:1,pageSize:10,iconDialog:!1,imageUrl:"",cityValue:pe.a,cityTree:he.a,unitChecked:!1,personalChecked:!1,transferDataConfig_bak:[],transferDataConfig:[],transferConfigModel:[],dialogConfig:!1,value:"",dialogImageUrl:"",dialogVisible:!1,disabled:!1,activeName:"4",configListIndex:"0",isShow:!0,itemConfigChecked1:!1,itemConfigChecked2:!1,accountTypeId:"",areaId:"",checked:"",itemId:"",configList:[],thirdTableData:[],userTreeData:[],getTreeData:[],tableData:[],totalCount:0,getSiteBusinessTypeList:[],defaultProps:{children:"children",label:"label"},pcFileList:[],appFileList:[],iconCategoryId:"",transferMolelClass:[],transferDataClass:[],addItemClassDialog:!1,isConfig:!1,searchName:"",modifyTime:"",modifierName:"",searchCheckedType:"",createTime:"",creatorName:"",action:"",pcForm:{jumpUrl:"",imageUrl:"",sortNumber:"1",status:"2"},appForm:{jumpUrl:"",imageUrl:"",sortNumber:"1",status:"2"},configTitle:"",rightForm:{name:"",shortName:"",iconCategoryId:"",siteBusinessType:"",unitChecked:"",personalChecked:"",sysFunctionId:"",sysFunctionName:"",manageCode:""},mytree:[],PerformManage:{areaId:[],status:"",modifyTime:"",operateUserName:""},pm_editType:"",pm_areaId:[],pm_transfer:[],pm_time:[],pm_detailList:[],areaNameOptions:[],filterMethod:function(e,t){return t.name.indexOf(e)>-1},dataSaveLock:null}},filters:{thirdTableData:function(e){return fe[e]},siteBusinessType:function(e){return ge[e]},getTreeDataFilter:function(e){return ve[e]},reTime:function(e,t){function a(e){return("00"+e).substr(e.length)}return e?(t=t||"yyyy-MM-dd hh:mm:ss",function(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in s)if(new RegExp("("+i+")").test(t)){var r=s[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:a(r))}return t}(new Date(e),t)):""}},watch:{configList:function(e){e.length>0?this.isEmpty=!1:this.isEmpty=!0},"rightForm.shortName":{handler:function(e){},deep:!0}},created:function(){var e=this.$Base64.decode(localStorage.getItem("userType"));"1"!==e&&"2"!==e||(this.isAdmin=!0),this.activeName=localStorage.getItem("activeName")||"1",this.action=this.$api+"/fileUpload/upload",this.getType(),this.getItemList(),this.initItemClass(),this.getTree(),this.getWBmenu()},computed:{},methods:{getSiteMattersPermissionTree:function(e){var t=this;this.$get("siteMatters/getSiteMattersPermissionTree",{mattersId:e}).then(function(e){if(e.data.success){t.areaList=e.data.result.orgTree;var a=JSON.parse(D()(e.data.result.orgTree));!function e(t){t.forEach(function(t,a){t.disabled=!0,t.children&&t.children.length&&e(t.children)})}(a),t.areaList_view=a,t.defaultCheck=e.data.result.hasPermissionList}})},handleCheckChange:function(e,t,a){var s=[];this.$refs.qxfp_tree.getCheckedNodes().forEach(function(e){s.push(e.id)}),this.qxfp_tree_selected=function(e){for(var t=[],a=e.length,s=0;s<a;s++)-1==t.indexOf(e[s])&&t.push(e[s]);return t}(s)},openFullScreen:function(){this.dataSaveLock=this.$loading({lock:!0,text:"保存中……",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},reTime:function(e,t){function a(e){return("00"+e).substr(e.length)}return e?(t=t||"yyyy-MM-dd hh:mm:ss",function(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in s)if(new RegExp("("+i+")").test(t)){var r=s[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:a(r))}return t}(new Date(e),t)):""},transferChange:function(e){},resetParams:function(){this.PerformManage={areaId:[],status:"",modifyTime:"",operateUserName:""},this.pm_editType="",this.pm_transfer=[],this.pm_areaId=[],this.pm_time=[],this.pm_detailList=[]},pm_reset:function(){location.reload()},pm_save:function(){var e=this,t=this,a={status:this.PerformManage.status,areaList:[],matterList:[],blTimeList:[]},s=this.pm_areaId;s[0]&&("number"==typeof s[0]?a.areaList.push(s[s.length-1]):this.pm_areaId.forEach(function(e){a.areaList.push(e[e.length-1])})),this.pm_transfer.length&&this.pm_transfer.forEach(function(e){ye[e]&&a.matterList.push(ye[e])}),this.pm_time.forEach(function(e,s){a.blTimeList.push({month:s+1,begTime:t.reTime(e.time[0],"yyyy-MM-dd")+" 00:00:00",endTime:t.reTime(e.time[1],"yyyy-MM-dd 23:59:59")})}),this.openFullScreen(),this.$post("/matterExecute/doSave",a).then(function(t){if(e.$mess(t),e.dataSaveLock.close(),t.success)if(a.areaList.length>1)setTimeout(function(){location.reload()},2e3);else{var s=JSON.parse(D()(e.pm_areaId));e.resetParams(),e.pm_areaId=s,e.initPerformManage(a.areaList[0])}})},pm_batchEditor:function(){this.transferDataConfig=[],this.transferDataConfig=JSON.parse(D()(this.transferDataConfig_bak)),this.pm_editType="batchEditor",this.PerformManage.status="1"},pm_editor:function(){this.PerformManage_getItemList();var e=this;this.pm_detailList.forEach(function(t){e.pm_transfer.push(t.matterId)}),this.pm_editType="editor"},handleChangeOrgName:function(e){if(!e.length)return this.resetParams(),!1;var t=e[e.length-1];if("batchEditor"===this.pm_editType)return this.pm_time=this.initDate([]),!1;this.initPerformManage(t)},changeDatePicker:function(e){},initDate:function(e){var t=0;return function a(s){if(t<12){if(s)s.time=[new Date(s.begTime),new Date(s.endTime)];else{var i={};!function(e,t){var a=new Date,s=new Date(a.getFullYear(),t,1,0,0,0),i=new Date(a.getFullYear(),t,[31,28,31,30,31,30,31,31,30,31,30,31][t],23,59,59);e.time=[s,i]}(i,t),e.push(i)}a(e[t+=1])}}(e[t]),e.length=12,e},initPerformManage:function(e){var t=this;this.$get("/matterExecute/configDetails",{areaId:e}).then(function(e){if(e.data.success){var a=e.data.result,s=a.configList[0];s.areaId=[s.areaId],t.PerformManage=s;var i=[];a.detailList.forEach(function(e,t){i.push(e.id)}),t.pm_transfer=i,t.pm_time=t.initDate(a.timeList),t.pm_detailList=a.detailList,t.pm_editType="view"}})},showOpDa:function(){this.opDaData=[],this.opDaFlag=!0,this.getOpDaData()},opHandleSizeChange:function(e){this.opPageSize=e,this.showOpDa()},opHandleCurrentChange:function(e){this.opPageNum=e,this.showOpDa()},getOpDaData:function(){var e=this;this.$get("/siteMatters/siteMattersChangeLog",{id:this.opDaId,pageNum:this.opPageNum,pageSize:this.opPageSize}).then(function(t){t.data.success&&(e.opDaData=t.data.result.list,e.opTotal=t.data.result.total)})},sysFunChange:function(e){this.rightForm.sysFunctionId=e,this.rightForm.sysFunctionName=this.jbRewbDict[e]},getWBmenu:function(){var e=this;this.$get("/sys/function/queryTree",{funType:4}).then(function(t){if(200===t.status){var a=t.data.result;if(a.length){var s=a[0].children,i=[],r={};for(var n in s)i.push({sysFunctionId:s[n].id,sysFunctionName:s[n].title}),r[s[n].id]=s[n].title;e.jbRewb=i,e.jbRewbDict=r}}})},getTree1:function(){var e=this;this.$post("/siteArea/tree",{bussType:this.$bussType,pageNum:1,pageSize:999}).then(function(t){t.success&&(e.userTreeData=t.result.dataList)})},getTree:function(){var e=this;this.getTree1(),this.$post("/sys/user/getAreaTreeNodes",{bussType:this.$bussType,pageNum:1,pageSize:999}).then(function(t){if(t.success){e.areaNameOptions=t.result,e.getTreeData=[],e.mytree=t.result,e.getTreeData.push(t.result[0].children[t.result[0].children.length-1]);for(var a=[],s=0,i=t.result[0].children;s<i.length;s++)if(i[s].children)for(var r=0,n=i[s].children;r<n.length;r++)e.getTreeData.push(n[r]),a.push(n[r].id);for(var o=JSON.parse(D()(e.getTreeData)),l=0;l<o.length;l++){var c=o[l].idpath.replace(/\//g,",");ve[c]=o[l].areaName}}})},tabsHandleClick:function(e,t){"1"==e.name&&(this.getType(),this.getItemList(),localStorage.setItem("activeName","1")),"2"==e.name&&(this.initItemClass(),localStorage.setItem("activeName","2")),"3"==e.name&&(this.initItemClass(),localStorage.setItem("activeName","3")),"4"==e.name&&localStorage.setItem("activeName","4")},getType:function(){var e=this;this.$get("/siteBusinessType/getSiteBusinessTypeList").then(function(t){if(t.data.success){e.getSiteBusinessTypeList=t.data.result.dataList;for(var a=JSON.parse(D()(t.data.result.dataList)),s=0;s<a.length;s++)ge[a[s].id]=a[s].name}})},PerformManage_getItemList:function(){var e=this;this.$get("/siteMattersArea/selectMattersList",{areaId:this.pm_areaId[this.pm_areaId.length-1]}).then(function(t){t.data.success&&(e.transferDataConfig=t.data.result)})},getItemList:function(){var e=this;this.$get("/siteMatters/getSiteMattersList",{bussType:this.$bussType,openStatus:this.openStatus,PageNum:"1",PageSize:"9999"}).then(function(t){if(t.data.success){e.configList=t.data.result.dataList,e.transferDataConfig=t.data.result.dataList,e.transferDataConfig_bak=JSON.parse(D()(t.data.result.dataList)),e.transferDataClass=t.data.result.dataList,function(e){e.forEach(function(e){ye[e.id]={matterId:e.id,matterName:e.name,manageCode:e.manageCode||""}})}(t.data.result.dataList);var a={id:t.data.result.dataList[0].id,name:t.data.result.dataList[0].name};e.configListClick(a,0)}else e.configList=[]})},initItemClass:function(){var e=this;this.$get("/siteIconCategory/getSiteIconCategoryList",{bussType:this.$bussType}).then(function(t){e.thirdTableData=t.data.result.dataList;for(var a=JSON.parse(D()(t.data.result.dataList)),s=0;s<a.length;s++)fe[a[s].id]=a[s].name})},deleteClass:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$get("/siteIconCategory/deleteSiteIconCategory",{id:e.id}).then(function(e){e.data.success&&t.initItemClass()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},classSaveTable:function(e,t){var a=this;return e.name?e.sortNo?void this.$post("/siteIconCategory/saveSiteIconCategory",{id:e.id,bussType:this.$bussType,name:e.name,sortNo:e.sortNo}).then(function(t){a.$mess(t),t.success&&(e.isShow=!1,a.initItemClass())}):(this.$message.error("请输入分类序号"),!1):(this.$message.error("请输入分类名称"),!1)},sizeChange:function(e){this.pageSize=e,this.pageNum=1,this.initTableData()},currentChange:function(e){this.pageNum=e,this.initTableData()},searchCheckedType1:function(){this.initTableData()},searchNameBlur:function(){this.initTableData()},initTableData:function(){var e=this;this.$get("/siteMattersArea/getSiteAreaMattersList",{bussType:this.$bussType,PageNum:this.pageNum,PageSize:this.pageSize,areaId:this.areaId,accountTypeId:this.accountTypeId,businessTypeId:this.searchCheckedType,name:this.searchName}).then(function(t){if(t.data.success){var a=JSON.parse(D()(t.data.result.dataList));e.transferConfigModel=[];for(var s=0;s<a.length;s++)e.transferConfigModel.push(a[s].id);e.tableData=t.data.result.dataList,e.totalCount=t.data.result.totalCount}})},addItemClass:function(e){var t=this;this.iconCategoryId=e.id,this.addItemClassDialog=!0,this.transferMolelClass=[],this.$get("siteMatters/getSiteMattersByCategoryIdNull",{bussType:this.$bussType}).then(function(a){a.data.success&&t.$get("/siteMatters/getSiteMattersByCategoryId",{iconCategoryId:e.id,bussType:t.$bussType}).then(function(e){if(e.data.success){t.transferDataClass=a.data.result.concat(e.data.result);for(var s=JSON.parse(D()(e.data.result)),i=0;i<s.length;i++)t.transferMolelClass.push(s[i].id)}})})},saveItemClassDialog:function(){var e=this;this.$post("/siteMatters/updateSiteMattersCategoryIdById",{iconCategoryId:this.iconCategoryId,ids:this.transferMolelClass,bussType:this.$bussType}).then(function(t){t.success&&(e.initItemClass(),e.addItemClassDialog=!1),e.$mess(t)})},handleNodeClick:function(e,t){this.searchName="",this.searchCheckedType="",4==t.level?(this.isConfig=!0,this.areaId=t.parent.data.id,this.accountTypeId=e.id,this.initTableData()):this.isConfig=!1},dialogConfigSave:function(){var e=this;this.$post("/siteMattersArea/saveSiteAreaMatters",{accountTypeId:this.accountTypeId,areaPath:this.getTreeData.filter(function(t){return t.id===parseInt(e.areaId)})[0].idpath.replace(/\//g,","),areaId:this.areaId,mattersIds:this.transferConfigModel}).then(function(t){e.$mess(t),t.success&&(e.dialogConfig=!1)})},classCancleTable:function(e,t){this.initItemClass()},addClass:function(){this.thirdTableData.length>0&&this.thirdTableData[this.thirdTableData.length-1].isShow||this.thirdTableData.push({name:"",sortNo:"",isShow:!0})},handlePictureCardPreview:function(e){this.imageUrl=e.url,this.iconDialog=!0},handleExceed:function(e,t){this.$message.warning("最多上传一个文件")},pcHandleRemove:function(e,t){this.pcForm.picUrl=""},appHandleRemove:function(e,t){this.appForm.picUrl=""},configListClick:function(e,t){var a=this;this.configTitle=e.name,this.configListIndex=t,this.opDaId=e.id,this.$get("/siteMatters/siteMattersDetail",{id:e.id}).then(function(e){if(e.data.success){if(a.itemId=e.data.result.siteMattersDto.id,a.isShow=!0,a.modifyTime=e.data.result.siteMattersDto.modifyTime,a.modifierName=e.data.result.siteMattersDto.modifierName,a.createTime=e.data.result.siteMattersDto.createTime,a.creatorName=e.data.result.siteMattersDto.creatorName,a.rightForm.name=e.data.result.siteMattersDto.name,a.rightForm.sysFunctionId=e.data.result.siteMattersDto.sysFunctionId,a.rightForm.shortName=e.data.result.siteMattersDto.shortName,a.rightForm.manageCode=e.data.result.siteMattersDto.manageCode,a.rightForm.iconCategoryId=0==e.data.result.siteMattersDto.iconCategoryId?"":e.data.result.siteMattersDto.iconCategoryId,a.rightForm.siteBusinessType=e.data.result.siteMattersDto.siteBusinessType,a.rightForm.unitChecked=e.data.result.orgAreas,a.rightForm.personalChecked=e.data.result.personAreas,a.pcForm.jumpUrl=e.data.result.pcBlock.jumpUrl,a.pcForm.picUrl=e.data.result.pcBlock.picUrl,a.pcForm.sortNumber=e.data.result.pcBlock.sortNumber,a.pcForm.status=e.data.result.pcBlock.status,a.appForm.jumpUrl=e.data.result.appBlock.jumpUrl,a.appForm.picUrl=e.data.result.appBlock.picUrl,a.appForm.sortNumber=e.data.result.appBlock.sortNumber,a.appForm.status=e.data.result.appBlock.status,a.basieUrl=e.data.result.pcBlock.basieUrl,a.basieUrl||(a.basieUrl=e.data.result.appBlock.basieUrl),a.pcFileList=[],a.appFileList=[],a.pcForm.picUrl&&a.pcFileList.push({url:a.basieUrl+a.pcForm.picUrl}),a.appForm.picUrl&&a.appFileList.push({url:a.basieUrl+a.appForm.picUrl}),a.rightForm.unitChecked=[],e.data.result.orgAreas)for(var t=0;t<e.data.result.orgAreas.length;t++)a.rightForm.unitChecked.push(String(e.data.result.orgAreas[t].areaPath).split(","));if(a.rightForm.personalChecked=[],e.data.result.personAreas)for(var s=0;s<e.data.result.personAreas.length;s++)a.rightForm.personalChecked.push(String(e.data.result.personAreas[s].areaPath).split(","));a.rightForm.unitChecked.length?a.unitChecked=!0:a.unitChecked=!1,a.rightForm.personalChecked.length?a.personalChecked=!0:a.personalChecked=!1,a.pcForm.jumpUrl?a.itemConfigChecked1=!0:a.itemConfigChecked1=!1,a.appForm.jumpUrl?a.itemConfigChecked2=!0:a.itemConfigChecked2=!1}}),this.isAdmin&&this.getSiteMattersPermissionTree(e.id)},classEdit:function(e,t){e.isShow=!0,e.data1=e.date,this.thirdTableData.push()},addMenu:function(){this.itemId="",this.isShow=!1,this.rightForm.name="",this.rightForm.shortName="",this.rightForm.manageCode="",this.rightForm.iconCategoryId="",this.rightForm.siteBusinessType="",this.unitChecked=!0,this.personalChecked=!0,this.itemConfigChecked1=!1,this.itemConfigChecked2=!1,this.pcForm.jumpUrl="",this.pcForm.picUrl="",this.appForm.jumpUrl="",this.appForm.picUrl="",this.appFileList=[],this.pcFileList=[]},edit:function(){this.isShow=!1},itemSave:function(){var e=this;if(!this.itemConfigChecked2||this.appForm.jumpUrl)if(!this.itemConfigChecked1||this.pcForm.jumpUrl){var t=[];this.unitChecked||(this.rightForm.unitChecked=[]),this.personalChecked||(this.rightForm.personalChecked=[]);for(var a=0;a<this.rightForm.unitChecked.length;a++)t.push({accountTypeId:1,areaId:this.rightForm.unitChecked[a][this.rightForm.unitChecked[a].length-1],areaPath:this.rightForm.unitChecked[a].length<6?this.rightForm.unitChecked[a].join():this.rightForm.unitChecked[a]});for(var s=0;s<this.rightForm.personalChecked.length;s++)t.push({accountTypeId:2,areaId:this.rightForm.personalChecked[s][this.rightForm.personalChecked[s].length-1],areaPath:this.rightForm.personalChecked[s].length<6?this.rightForm.personalChecked[s].join():this.rightForm.personalChecked[s]});var i={id:this.itemId,bussType:this.$bussType,iconCategoryId:this.rightForm.iconCategoryId,siteBusinessType:this.rightForm.siteBusinessType,name:this.rightForm.name,shortName:this.rightForm.shortName,sysFunctionId:this.rightForm.sysFunctionId,sysFunctionName:this.rightForm.sysFunctionName,manageCode:this.rightForm.manageCode,appBlock:{jumpUrl:this.appForm.jumpUrl,isHome:1,picUrl:this.appForm.picUrl,sortNumber:this.appForm.sortNumber,status:this.appForm.status},pcBlock:{jumpUrl:this.pcForm.jumpUrl,isHome:1,picUrl:this.pcForm.picUrl,sortNumber:this.pcForm.sortNumber,status:this.pcForm.status},siteMattersAreaSaveVOS:t};this.isAdmin&&(i.saveSiteMattersPermissionListVO={},this.qxfp_tree_selected.length?i.saveSiteMattersPermissionListVO.areaIds=this.qxfp_tree_selected:this.defaultCheck.length&&(i.saveSiteMattersPermissionListVO.areaIds=this.defaultCheck)),this.$post("/siteMatters/saveSiteMatters",i).then(function(t){t.success&&(e.getItemList(),e.isShow=!0),e.$mess(t)})}else this.$message.warning("请输入网上办节点链接");else this.$message.warning("请输入掌上办节点链接")},cancle:function(){this.isShow=!0},appHandleAvatarSuccess:function(e,t){this.appForm.picUrl=t.response.result.key},pcHandleAvatarSuccess:function(e,t){this.pcForm.picUrl=t.response.result.key},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png",a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabsHandleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"事项配置",name:"1"}},[a("el-container",[a("el-aside",{attrs:{width:"380px"}},[a("div",{staticClass:"itemWrap"},[a("el-select",{staticClass:"select",attrs:{clearable:"",placeholder:"请选择"},on:{change:e.getItemList},model:{value:e.openStatus,callback:function(t){e.openStatus=t},expression:"openStatus"}},e._l(e.selOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1),e._v(" "),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.addMenu}},[e._v("新增事项")]),e._v(" "),e.isEmpty?a("div",{staticStyle:{"text-align":"center","font-size":"20px",color:"#ccc"}},[e._v("暂无数据")]):e._e(),e._v(" "),a("ul",{staticClass:"list"},e._l(e.configList,function(t,s){return a("li",{key:s,class:{active:e.configListIndex==s},attrs:{title:t.name},on:{click:function(a){return e.configListClick(t,s)}}},[e._v("\n                "+e._s(t.name)+"\n              ")])}),0)],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"ep-main"},[a("div",{staticStyle:{"text-align":"center","font-size":"20px",color:"#ccc"}},[e._v("暂无数据")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow&&!e.isEmpty,expression:"isShow && !isEmpty"}],staticClass:"ep-main"},[a("div",{staticClass:"title"},[a("h1",[e._v(e._s(e.configTitle))]),e._v(" "),a("div",{staticClass:"title1"},[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"content"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("事项简称：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.rightForm.shortName))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("事项分类：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e._f("thirdTableData")(e.rightForm.iconCategoryId)))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("业务类型：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e._f("siteBusinessType")(e.rightForm.siteBusinessType)))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("创建人员：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.creatorName))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("创建时间：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.createTime))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("管理编码：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.rightForm.manageCode))])]),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"item-title"},[e._v("可见区域：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v("\n                    单位：\n                    "),e.unitChecked?e._l(e.rightForm.unitChecked,function(t,s){return a("span",{key:s,staticStyle:{"margin-right":"5px"}},[e._v(e._s(e._f("getTreeDataFilter")(t)))])}):a("span",[e._v("无")])],2),e._v(" "),a("div",{staticClass:"wrap"},[a("div",{staticClass:"item-title"}),e._v(" "),a("div",{staticClass:"item-content"},[e._v("\n                      个人：\n                      "),e.personalChecked?e._l(e.rightForm.personalChecked,function(t,s){return a("span",{key:s,staticStyle:{"margin-right":"5px"}},[e._v(e._s(e._f("getTreeDataFilter")(t)))])}):a("span",[e._v("无")])],2)])]),e._v(" "),e.isAdmin?a("el-col",{staticClass:"qxfp_view",attrs:{span:24}},[a("div",{staticClass:"item-title"},[a("span",[e._v("权限分配：")])]),e._v(" "),a("div",{staticClass:"item-content"},[a("el-card",{staticClass:"box-card"},[a("el-tree",{ref:"qxfp_tree_view",attrs:{data:e.areaList_view,"show-checkbox":"","node-key":"id",props:e.areaProps,"default-checked-keys":e.defaultCheck,"default-expanded-keys":e.defaultExpand}})],1)],1)]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"title1"},[e._v("配置信息")]),e._v(" "),e.itemConfigChecked1?a("div",{staticClass:"title"},[e._v("网上办")]):e._e(),e._v(" "),e.itemConfigChecked1?a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"item-title"},[e._v("图标：")]),e._v(" "),a("img",{attrs:{src:e.basieUrl+e.pcForm.picUrl,width:"100px",height:"100px"}})]),e._v(" "),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"item-title"},[e._v("访问地址：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.pcForm.jumpUrl))])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"item-title"},[e._v("排序：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.pcForm.sortNumber))])]),e._v(" "),a("el-col",{attrs:{span:3}},[2==e.pcForm.status?a("div",{staticClass:"item-title success-icon"},[e._v("生效")]):a("div",{staticClass:"item-title error-icon"},[e._v("失效")])])],1):e._e()],1),e._v(" "),e.itemConfigChecked2?a("div",{staticClass:"content border-top"},[a("div",{staticClass:"title"},[e._v("掌上办")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"item-title"},[e._v("图标：")]),e._v(" "),a("img",{attrs:{src:e.basieUrl+e.appForm.picUrl,width:"100px",height:"100px"}})]),e._v(" "),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"item-title"},[e._v("访问地址：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.appForm.jumpUrl))])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"item-title"},[e._v("排序：")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.appForm.sortNumber))])]),e._v(" "),a("el-col",{attrs:{span:3}},[2==e.appForm.status?a("div",{staticClass:"item-title success-icon"},[e._v("生效")]):a("div",{staticClass:"item-title error-icon"},[e._v("失效")])])],1)],1):e._e()])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}],staticClass:"ep-main"},[a("div",{staticClass:"rightContent"},[a("div",{staticClass:"title"},[e._v("基本信息")]),e._v(" "),a("el-form",{ref:"rightForm",attrs:{model:e.rightForm,rules:e.rightRules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"事项名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.rightForm.name,callback:function(t){e.$set(e.rightForm,"name",t)},expression:"rightForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"事项简称",prop:"shortName"}},[a("el-input",{attrs:{maxlength:"10"},model:{value:e.rightForm.shortName,callback:function(t){e.$set(e.rightForm,"shortName",t)},expression:"rightForm.shortName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"事项分类"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择事项分类"},model:{value:e.rightForm.iconCategoryId,callback:function(t){e.$set(e.rightForm,"iconCategoryId",t)},expression:"rightForm.iconCategoryId"}},e._l(e.thirdTableData,function(t,s){return a("el-option",{key:s,attrs:{label:t.name,value:t.id}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"业务类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择业务类型"},model:{value:e.rightForm.siteBusinessType,callback:function(t){e.$set(e.rightForm,"siteBusinessType",t)},expression:"rightForm.siteBusinessType"}},e._l(e.getSiteBusinessTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"经办关联模块"}},[a("el-select",{attrs:{placeholder:"请选择经办关联模块",filterable:""},on:{change:e.sysFunChange},model:{value:e.rightForm.sysFunctionId,callback:function(t){e.$set(e.rightForm,"sysFunctionId",t)},expression:"rightForm.sysFunctionId"}},e._l(e.jbRewb,function(t,s){return a("el-option",{key:s,attrs:{label:t.sysFunctionName,value:t.sysFunctionId}},[e._v(e._s(t.sysFunctionName))])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"管理编码"}},[a("el-input",{attrs:{placeholder:"请输入管理编码",maxlength:"20"},model:{value:e.rightForm.manageCode,callback:function(t){e.$set(e.rightForm,"manageCode",t)},expression:"rightForm.manageCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"可见区域"}},[a("div",[a("el-checkbox",{model:{value:e.unitChecked,callback:function(t){e.unitChecked=t},expression:"unitChecked"}},[e._v("单位")]),e._v(" "),a("el-cascader",{directives:[{name:"show",rawName:"v-show",value:e.unitChecked,expression:"unitChecked"}],ref:"unitCa",staticStyle:{width:"300px"},attrs:{"collapse-tags":"",options:e.mytree,props:{multiple:!0,value:"id",label:"areaName"},clearable:""},model:{value:e.rightForm.unitChecked,callback:function(t){e.$set(e.rightForm,"unitChecked",t)},expression:"rightForm.unitChecked"}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-checkbox",{model:{value:e.personalChecked,callback:function(t){e.personalChecked=t},expression:"personalChecked"}},[e._v("个人")]),e._v(" "),a("el-cascader",{directives:[{name:"show",rawName:"v-show",value:e.personalChecked,expression:"personalChecked"}],ref:"personalCa",staticStyle:{width:"300px"},attrs:{options:e.mytree,"collapse-tags":"",props:{multiple:!0,value:"id",label:"areaName"},clearable:""},model:{value:e.rightForm.personalChecked,callback:function(t){e.$set(e.rightForm,"personalChecked",t)},expression:"rightForm.personalChecked"}})],1)])],1)],1),e._v(" "),e.isAdmin?a("el-row",[a("el-col",{staticClass:"qxfp_edit",attrs:{span:24}},[a("el-form-item",{attrs:{label:"权限分配"}},[a("div",{staticClass:"item-content"},[a("el-card",{staticClass:"box-card"},[a("el-tree",{ref:"qxfp_tree",attrs:{data:e.areaList,"show-checkbox":"","node-key":"id",props:e.areaProps,"default-checked-keys":e.defaultCheck,"default-expanded-keys":e.defaultExpand},on:{"check-change":e.handleCheckChange}})],1)],1)])],1)],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"rightContent"},[a("div",{staticClass:"title"},[e._v("配置信息")]),e._v(" "),a("div",{staticClass:"configInfo"},[a("div",{staticClass:"page"},[e._v("网上办")]),e._v(" "),a("el-checkbox",{model:{value:e.itemConfigChecked1,callback:function(t){e.itemConfigChecked1=t},expression:"itemConfigChecked1"}},[e._v("开通")]),e._v(" "),e.itemConfigChecked1?a("el-form",{ref:"form",attrs:{model:e.pcForm,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{data:e.data1,"list-type":"picture-card",action:e.action,"show-file-list":!0,"on-success":e.pcHandleAvatarSuccess,"on-preview":e.handlePictureCardPreview,"on-remove":e.pcHandleRemove,limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,"file-list":e.pcFileList}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.iconDialog},on:{"update:visible":function(t){e.iconDialog=t}}},[a("img",{attrs:{width:"100%",src:e.imageUrl,alt:""}})])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"节点链接"}},[a("el-input",{model:{value:e.pcForm.jumpUrl,callback:function(t){e.$set(e.pcForm,"jumpUrl",t)},expression:"pcForm.jumpUrl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:e.pcForm.sortNumber,callback:function(t){e.$set(e.pcForm,"sortNumber",t)},expression:"pcForm.sortNumber"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{attrs:{label:"2"},model:{value:e.pcForm.status,callback:function(t){e.$set(e.pcForm,"status",t)},expression:"pcForm.status"}},[e._v("生效")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.pcForm.status,callback:function(t){e.$set(e.pcForm,"status",t)},expression:"pcForm.status"}},[e._v("失效")])],1)],1)],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"page"},[e._v("掌上办")]),e._v(" "),a("el-checkbox",{model:{value:e.itemConfigChecked2,callback:function(t){e.itemConfigChecked2=t},expression:"itemConfigChecked2"}},[e._v("开通")]),e._v(" "),e.itemConfigChecked2?a("el-form",{ref:"form",attrs:{model:e.appForm,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{data:e.data1,"list-type":"picture-card",action:e.action,"show-file-list":!0,"on-success":e.appHandleAvatarSuccess,"on-preview":e.handlePictureCardPreview,"on-remove":e.appHandleRemove,limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,"file-list":e.appFileList}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.iconDialog},on:{"update:visible":function(t){e.iconDialog=t}}},[a("img",{attrs:{width:"100%",src:e.imageUrl,alt:""}})])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"节点链接"}},[a("el-input",{model:{value:e.appForm.jumpUrl,callback:function(t){e.$set(e.appForm,"jumpUrl",t)},expression:"appForm.jumpUrl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:e.appForm.sortNumber,callback:function(t){e.$set(e.appForm,"sortNumber",t)},expression:"appForm.sortNumber"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{attrs:{label:"2"},model:{value:e.appForm.status,callback:function(t){e.$set(e.appForm,"status",t)},expression:"appForm.status"}},[e._v("生效")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.appForm.status,callback:function(t){e.$set(e.appForm,"status",t)},expression:"appForm.status"}},[e._v("失效")])],1)],1)],1)],1):e._e()],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],staticClass:"ep-footer"},[e.isShow?a("p",[e._v("更新记录："+e._s(e.modifyTime)+" / "+e._s(e.modifierName))]):e._e(),e._v(" "),e.isShow?e._e():a("p"),e._v(" "),a("div",{staticClass:"btn"},[e.isShow?a("el-button",{attrs:{type:"primary"},on:{click:e.showOpDa}},[e._v("操作日志")]):e._e(),e._v(" "),e.isShow?a("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("编辑")]):e._e(),e._v(" "),e.isShow?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.itemSave}},[e._v("保存")]),e._v(" "),e.isShow?e._e():a("el-button",{on:{click:e.cancle}},[e._v("取消")])],1)])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"用户权限",name:"2"}},[a("el-container",[a("el-aside",{attrs:{width:"220px"}},[a("el-tree",{staticStyle:{"padding-left":"20px"},attrs:{"highlight-current":"",data:e.userTreeData,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("div",{staticClass:"ep-main"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{clearable:"",placeholder:"搜索事项名称"},on:{blur:e.searchNameBlur},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("el-select",{attrs:{clearable:"",placeholder:"业务类型"},on:{change:e.searchCheckedType1},model:{value:e.searchCheckedType,callback:function(t){e.searchCheckedType=t},expression:"searchCheckedType"}},e._l(e.getSiteBusinessTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isConfig,expression:"isConfig"}],attrs:{span:2,offset:11}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogConfig=!0}}},[e._v("权限配置")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"事项名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessTypeName",label:"业务类型"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"page-sizes":[10,20,40,60,100],"page-size":10,total:e.totalCount,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"事项分类",name:"3"}},[a("el-table",{staticStyle:{width:"100%","padding-left":"20px"},attrs:{data:e.thirdTableData}},[a("el-table-column",{attrs:{prop:"name",label:"分类名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[Boolean(t.row.isShow)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.name,expression:"scope.row.name"}],attrs:{type:"text"},domProps:{value:t.row.name},on:{input:function(a){a.target.composing||e.$set(t.row,"name",a.target.value)}}}):a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sortNo",label:"分类序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[Boolean(t.row.isShow)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.sortNo,expression:"scope.row.sortNo"}],attrs:{type:"number"},domProps:{value:t.row.sortNo},on:{input:function(a){a.target.composing||e.$set(t.row,"sortNo",a.target.value)}}}):a("span",[e._v(e._s(t.row.sortNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mattersCount",label:"事项数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[Boolean(t.row.isShow)?a("div",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.classSaveTable(t.row,t.$index)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.classCancleTable(t.row)}}},[e._v("取消")])],1):a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.classEdit(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.addItemClass(t.row)}}},[e._v("添加事项")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteClass(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("el-button",{staticStyle:{"padding-left":"20px"},attrs:{type:"text"},on:{click:e.addClass}},[e._v("+增加分类")])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"事项执行管理",name:"4"}},[a("div",{staticClass:"PerformManageWrap"},[a("div",{staticClass:"pmContent"},[a("div",{staticClass:"item"},[a("div",{staticClass:"tit mt10"},[e._v("当前行政区划：")]),e._v(" "),a("div",{staticClass:"cont"},["batchEditor"!==e.pm_editType?a("el-cascader",{staticStyle:{width:"190px"},attrs:{"expand-trigger":"hover",clearable:!0,options:e.areaNameOptions,props:{label:"areaName",value:"id"},"show-all-levels":!1,placeholder:"请选择行政区划",disabled:"editor"===e.pm_editType},on:{change:e.handleChangeOrgName},model:{value:e.pm_areaId,callback:function(t){e.pm_areaId=t},expression:"pm_areaId"}}):e._e(),e._v(" "),"batchEditor"===e.pm_editType?a("el-cascader",{ref:"multipleCascader",staticStyle:{width:"670px"},attrs:{"expand-trigger":"hover",clearable:!0,options:e.areaNameOptions,props:{label:"areaName",value:"id",multiple:!0},"show-all-levels":!1,placeholder:"请选择行政区划"},on:{change:e.handleChangeOrgName},model:{value:e.pm_areaId,callback:function(t){e.pm_areaId=t},expression:"pm_areaId"}}):e._e()],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pm_areaId.length,expression:"pm_areaId.length"}],staticClass:"item"},[a("div",{staticClass:"tit"},[e._v("配置状态：")]),e._v(" "),a("div",{staticClass:"cont"},[""===e.pm_editType||"view"===e.pm_editType?a("span",["1"===e.PerformManage.status?a("span",[e._v("生效")]):e._e(),e._v(" "),"0"===e.PerformManage.status?a("span",[e._v("失效")]):e._e()]):e._e(),e._v(" "),"editor"===e.pm_editType||"batchEditor"===e.pm_editType?a("el-radio-group",{model:{value:e.PerformManage.status,callback:function(t){e.$set(e.PerformManage,"status",t)},expression:"PerformManage.status"}},[a("el-radio",{attrs:{label:"1"}},[e._v("生效")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("失效")])],1):e._e()],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pm_areaId.length,expression:"pm_areaId.length"}],staticClass:"item"},[a("div",{staticClass:"tit"},[e._v("办理时间：")]),e._v(" "),a("div",{staticClass:"cont"},["view"===e.pm_editType?a("div",{staticClass:"timeQuantumWrap clearfix"},e._l(e.pm_time,function(t){return t.begTime?a("span",{staticClass:"timeQuantum"},[e._v(e._s(e._f("reTime")(t.begTime,"M月d日 hh:mm"))+" -- "+e._s(e._f("reTime")(t.endTime,"M月d日 hh:mm")))]):e._e()}),0):e._e(),e._v(" "),"editor"===e.pm_editType||"batchEditor"===e.pm_editType?a("div",{staticClass:"timeQuantumWrap clearfix"},e._l(e.pm_time,function(t){return a("span",{staticClass:"timeQuantum"},[a("el-date-picker",{staticStyle:{width:"320px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","unlink-panels":"","value-format":"yyyy-MM-dd",size:"mini"},on:{change:function(t){return e.changeDatePicker()}},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"item.time"}})],1)}),0):e._e()])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pm_areaId.length,expression:"pm_areaId.length"}],staticClass:"item"},[a("div",{staticClass:"tit"},[e._v("管理事项：")]),e._v(" "),a("div",{staticClass:"cont"},["view"===e.pm_editType?a("div",{staticClass:"el-tree-header"},[e._v("网报系统")]):e._e(),e._v(" "),"view"===e.pm_editType?a("el-tree",{ref:"areaList",attrs:{data:e.pm_detailList,"node-key":"matterId",props:{label:"matterName"},"default-checked-keys":[],"default-expanded-keys":[]}}):e._e(),e._v(" "),"editor"===e.pm_editType||"batchEditor"===e.pm_editType?a("el-transfer",{attrs:{filterable:"",props:{key:"id",label:"name"},"filter-method":e.filterMethod,"filter-placeholder":"请输入关键字",data:e.transferDataConfig},on:{change:e.transferChange},model:{value:e.pm_transfer,callback:function(t){e.pm_transfer=t},expression:"pm_transfer"}}):e._e()],1)])]),e._v(" "),a("div",{staticClass:"toolBar clearfix"},["view"===e.pm_editType?a("span",{staticClass:"detail"},[a("span",{staticClass:"split"},[e._v("修改时间："+e._s(e._f("reTime")(e.PerformManage.modifyTime)))]),e._v(" "),a("span",{staticClass:"split"},[e._v("修改人："+e._s(e.PerformManage.operateUserName))])]):e._e(),e._v(" "),""===e.pm_editType?a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.pm_batchEditor}},[e._v("批量编辑")])],1):e._e(),e._v(" "),"view"===e.pm_editType?a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.pm_batchEditor}},[e._v("批量编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.pm_editor}},[e._v("编辑")])],1):e._e(),e._v(" "),"editor"===e.pm_editType||"batchEditor"===e.pm_editType?a("span",[a("el-button",{attrs:{size:"small"},on:{click:e.pm_reset}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.pm_save}},[e._v("保存")])],1):e._e()])])])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加事项",visible:e.addItemClassDialog,titles:["未选项","已选项"],width:"40%"},on:{"update:visible":function(t){e.addItemClassDialog=t}}},[a("el-transfer",{attrs:{data:e.transferDataClass,"filter-placeholder":"搜索事项名称",filterable:"",props:{key:"id",label:"name"}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.option;return a("span",{attrs:{title:s.name}},[e._v(e._s(s.name))])}}]),model:{value:e.transferMolelClass,callback:function(t){e.transferMolelClass=t},expression:"transferMolelClass"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addItemClassDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveItemClassDialog}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"权限配置",visible:e.dialogConfig,width:"52%"},on:{"update:visible":function(t){e.dialogConfig=t}}},[a("el-transfer",{attrs:{data:e.transferDataConfig,filterable:"","filter-placeholder":"搜索事项名称",props:{key:"id",label:"name"}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.option;return a("span",{attrs:{title:s.name}},[e._v(e._s(s.name))])}}]),model:{value:e.transferConfigModel,callback:function(t){e.transferConfigModel=t},expression:"transferConfigModel"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogConfig=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfigSave}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"操作日志",visible:e.opDaFlag},on:{"update:visible":function(t){e.opDaFlag=t}}},[a("el-table",{attrs:{data:e.opDaData}},[a("el-table-column",{attrs:{property:"editorId",label:"操作人ID",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作时间",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(new Date(t.row.createTime).toLocaleString("chinese",{hour12:!1}).replace(/:d{1,2}$/," ")))]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,property:"chuangeJson",label:"修改查询码"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.opPageNum,"page-sizes":[10,20],"page-size":e.opPageSize,small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.opTotal},on:{"size-change":e.opHandleSizeChange,"current-change":e.opHandleCurrentChange}})],1)],1)},staticRenderFns:[]};var we=a("VU/8")(be,_e,!1,function(e){a("T12x")},"data-v-04081bfc",null).exports,Ce={},ke={},xe={data:function(){return{uploadShow:"uploadShow",isEdit:!0,areaIdPath:[],selectAreaId:"",rightForm:{name:"",shortName:"",iconCategoryId:"",siteBusinessType:"",sysFunctionId:"",sysFunctionName:"",matterNumber:"",coordinationAreaType:"",printType:"",businessNumber:"",mattersCoding:""},itemBaseInfo:{name:"",shortName:"",iconCategoryId:"",siteBusinessType:"",sysFunctionId:"",sysFunctionName:"",id:"",isTakesEffect:1,isRecommend:0,modifierId:"",operatorId:""},pcForm:{jumpUrl:"",picUrl:"",sortNumber:"1",status:"1",isRecommend:"0"},itemConInfo:{areaCode:"",downCornerMarkerId:"",floorId:"",iconCategoryId:"",isHome:"",jumpUrl:"",name:"",picUrl:"",platformCode:"",sortNumber:"",status:"",upCornerMarkerId:""},openStatus:"",selOptions:[{value:1,label:"开通网报"},{value:2,label:"开通掌上办"},{value:3,label:"全部开通"}],isEmpty:!0,jbRewb:[],jbRewbDict:{},data1:{isPublic:"0"},rightRules:{matterNumber:this.$rules("请输入",50),name:this.$rules("请输入",50),siteBusinessType:[{required:!0,message:"请选择业务类型",trigger:"change"}],machineNumberList:[{required:!1,message:"请选择机器编号",trigger:"change"}],areaIdList:[{required:!1,message:"请选择行政区划",trigger:"change"}]},basieUrl:"",pageNum:1,pageSize:10,iconDialog:!1,imageUrl:"",cityValue:pe.a,cityTree:he.a,transferData:function(e){for(var t=[],a=1;a<=15;a++)t.push({key:a,label:"备选项 "+a,disabled:a%4==0});return t}(),transferDataConfig:[],transferConfigModel:[],dialogConfig:!1,value:"",dialogImageUrl:"",dialogVisible:!1,disabled:!1,activeName:"1",configListIndex:"0",isShow:!0,itemConfigChecked1:!1,itemConfigChecked2:!1,accountTypeId:"",areaId:"",checked:"",itemId:"",configList:[],thirdTableData:[],userTreeData:[],tableData:[],totalCount:"",getSiteBusinessTypeList:[],defaultProps:{children:"children",label:"label"},pcFileList:[],iconCategoryId:"",transferMolelClass:[],transferDataClass:[],addItemClassDialog:!1,isConfig:!1,searchName:"",modifyTime:"",modifierName:"",searchCheckedType:"",createTime:"",creatorName:"",action:"",configTitle:"",areaList:[],spanArr:[],position:0,modelTable:[],editModelTable:[],machineList:[]}},filters:{thirdTableData:function(e){return Ce[e]},siteBusinessType:function(e){return ke[e]}},watch:{configList:function(e){e.length>0?this.isEmpty=!1:this.isEmpty=!0},"rightForm.shortName":{handler:function(e){},deep:!0},"pcForm.picUrl":function(){this.pcForm.picUrl?this.uploadShow="uploadHide":this.uploadShow="uploadShow"}},created:function(){this.action=this.$api+"/fileUpload/upload",this.getType(),this.getItemList(),this.initItemClass(),this.getTree(),this.getMachineList(),this.getWBmenu()},computed:{},methods:{getMachineList:function(){var e=this;this.$get("sm/selfmachines/getSelfmachine").then(function(t){t.data.success&&(e.machineList=t.data.result)})},areaIdChange:function(e){var t=e.length>0?e[e.length-1].split("/"):[];this.selectAreaId=t.length>0?t[t.length-1]:"",this.getItemList()},maIdChange:function(e,t){t.areaIdList.length>0&&(t.areaId=t.areaIdList[t.areaIdList.length-1])},addOrg:function(e){this.rightForm.editModelTable.push({areaIdList:[],areaId:"",city:"",region:"",accountTypeId:"",mattersId:"",machineNumber:"",machineNumberList:[]})},minusOrg:function(e,t){this.rightForm.editModelTable.splice(t,1)},isLastRow:function(e){return e===this.rightForm.editModelTable.length-1},headerHide:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0===t?{textAlign:"center"}:1===t?{display:"none"}:void 0},rowspan:function(){var e=this;this.spanArr=[],this.position=0,this.modelTable.forEach(function(t,a){0===a?(e.spanArr.push(1),e.position=0):e.modelTable[a].city===e.modelTable[a-1].city?(e.spanArr[e.position]+=1,e.spanArr.push(0)):(e.spanArr.push(1),e.position=a)})},spanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex),s=e.columnIndex;if(0===s){if("浙江省"===t.city)return{rowspan:0,colspan:0};var i=this.spanArr[a];return{rowspan:i,colspan:i>0?1:0}}if(1===s&&"省本级"===t.region)return{rowspan:1,colspan:2}},sysFunChange:function(e){this.rightForm.sysFunctionId=e,this.rightForm.sysFunctionName=this.jbRewbDict[e]},getWBmenu:function(){var e=this;this.$get("/sys/function/queryTree",{funType:4}).then(function(t){if(200===t.status){var a=t.data.result;if(a.length){var s=a[0].children,i=[],r={};for(var n in s)i.push({sysFunctionId:s[n].id,sysFunctionName:s[n].title}),r[s[n].id]=s[n].title;e.jbRewb=i,e.jbRewbDict=r}}})},getTree:function(){var e=this;this.$get("/sm/selfmachines/getAreaTree").then(function(t){t.data.success&&(e.areaList=t.data.result)}),this.$post("/siteArea/tree",{bussType:this.$bussType,pageNum:1,pageSize:999}).then(function(t){if(t.success){for(var a=[],s=0;s<t.result.dataList.length;s++)a.push(t.result.dataList[s].id);e.userTreeData=t.result.dataList}})},tabsHandleClick:function(e,t){"1"==e.name&&(this.getType(),this.getItemList()),"2"==e.name&&this.initItemClass()},getType:function(){var e=this;this.$get("/siteBusinessType/getSiteBusinessTypeList").then(function(t){if(t.data.success){e.getSiteBusinessTypeList=t.data.result.dataList;for(var a=JSON.parse(D()(t.data.result.dataList)),s=0;s<a.length;s++)ke[a[s].id]=a[s].name}})},filterMethod:function(e,t){},getItemList:function(){var e=this,t={};""!==this.selectAreaId&&(t={areaId:this.selectAreaId}),this.$get("/sm/selfmachines/getSSMSiteMattersList",t).then(function(t){if(t.data.success){e.configList=t.data.result,e.transferDataConfig=t.data.result,e.transferDataClass=t.data.result;var a={id:t.data.result[0].id,name:t.data.result[0].name};e.configListClick(a,0)}else e.configList=[]})},initItemClass:function(){var e=this;this.$get("/sm/selfmachines/getSSMSiteIconCategoryList",{bussType:this.$bussType}).then(function(t){e.thirdTableData=t.data.result.dataList;for(var a=JSON.parse(D()(t.data.result.dataList)),s=0;s<a.length;s++)Ce[a[s].id]=a[s].name})},deleteClass:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$get("/siteIconCategory/deleteSiteIconCategory",{id:e.id}).then(function(e){e.data.success&&t.initItemClass()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},classSaveTable:function(e,t){var a=this;return e.name?e.sortNo?void this.$post("/siteIconCategory/saveSiteIconCategory",{id:e.id,bussType:this.$bussType,name:e.name,sortNo:e.sortNo}).then(function(t){a.$mess(t),t.success&&(e.isShow=!1,a.initItemClass())}):(this.$message.error("请输入分类序号"),!1):(this.$message.error("请输入分类名称"),!1)},pageInit:function(e,t){this.pageNum=e,this.pageSize=t,this.search()},searchCheckedType1:function(){this.initTableData()},searchNameBlur:function(){this.initTableData()},initTableData:function(){var e=this;this.$get("/siteMattersArea/getSiteAreaMattersList",{bussType:this.$bussType,PageNum:this.pageNum,PageSize:this.pageSize,areaId:this.areaId,accountTypeId:this.accountTypeId,businessTypeId:this.searchCheckedType,name:this.searchName}).then(function(t){if(t.data.success){e.tableData=t.data.result.dataList,e.totalCount=t.data.result.totalCount;var a=JSON.parse(D()(t.data.result.dataList));e.transferConfigModel=[];for(var s=0;s<a.length;s++)e.transferConfigModel.push(a[s].id)}})},addItemClass:function(e){var t=this;this.iconCategoryId=e.id,this.addItemClassDialog=!0,this.transferMolelClass=[],this.$get("/sm/selfmachines/getSSMSiteMattersByCategoryIdNull",{bussType:2}).then(function(a){a.data.success&&t.$get("/sm/selfmachines/getSSMSiteMattersByCategoryId",{iconCategoryId:e.id,bussType:t.$bussType}).then(function(e){if(e.data.success){t.transferDataClass=a.data.result.concat(e.data.result);for(var s=JSON.parse(D()(e.data.result)),i=0;i<s.length;i++)t.transferMolelClass.push(s[i].id)}})})},saveItemClassDialog:function(){var e=this;this.$post("/siteMatters/updateSiteMattersCategoryIdById",{iconCategoryId:this.iconCategoryId,ids:this.transferMolelClass,bussType:this.$bussType}).then(function(t){t.success&&(e.initItemClass(),e.addItemClassDialog=!1),e.$mess(t)})},handleNodeClick:function(e,t){this.searchName="",this.searchCheckedType="",2==t.level?(this.isConfig=!0,this.areaId=t.parent.data.id,this.accountTypeId=e.id,this.initTableData()):this.isConfig=!1},dialogConfigSave:function(){var e=this;this.$post("/siteMattersArea/saveSiteAreaMatters",{accountTypeId:this.accountTypeId,areaId:this.areaId,mattersIds:this.transferConfigModel}).then(function(t){e.$mess(t),t.success&&(e.dialogConfig=!1)})},classCancleTable:function(e,t){this.initItemClass()},addClass:function(){this.thirdTableData.length>0&&this.thirdTableData[this.thirdTableData.length-1].isShow||this.thirdTableData.push({name:"",sortNo:"",isShow:!0})},handlePictureCardPreview:function(e){this.imageUrl=e.url,this.iconDialog=!0},handleExceed:function(e,t){this.$message.warning("最多上传一个文件")},pcHandleRemove:function(e,t){this.pcForm.picUrl=""},configListClick:function(e,t){var a=this;this.configTitle=e.name,this.configListIndex=t,this.$get("/sm/selfmachines/siteSSMMattersDetail",{id:e.id}).then(function(e){e.data.success&&(a.itemId=e.data.result.siteMattersDto.id,a.isShow=!0,a.modifyTime=e.data.result.siteMattersDto.modifyTime,a.modifierName=e.data.result.siteMattersDto.modifierName,a.createTime=e.data.result.siteMattersDto.createTime,a.creatorName=e.data.result.siteMattersDto.creatorName,a.rightForm.name=e.data.result.siteMattersDto.name,a.rightForm.sysFunctionId=e.data.result.siteMattersDto.sysFunctionId,a.rightForm.shortName=e.data.result.siteMattersDto.shortName,a.rightForm.iconCategoryId=0==e.data.result.siteMattersDto.iconCategoryId?"":e.data.result.siteMattersDto.iconCategoryId,a.rightForm.siteBusinessType=e.data.result.siteMattersDto.siteBusinessType,a.rightForm.matterNumber=e.data.result.siteMattersDto.matterNumber,a.rightForm.coordinationAreaType=e.data.result.siteMattersDto.coordinationAreaType,a.rightForm.printType=e.data.result.siteMattersDto.printType,a.rightForm.businessNumber=e.data.result.siteMattersDto.businessNumber,a.rightForm.mattersCoding=e.data.result.siteMattersDto.mattersCoding,a.pcForm.jumpUrl=e.data.result.siteBlock.jumpUrl,a.pcForm.picUrl=e.data.result.siteBlock.picUrl,a.pcForm.sortNumber=e.data.result.siteBlock.sortNumber,a.pcForm.status=e.data.result.siteMattersDto.isTakesEffect,a.pcForm.isRecommend=e.data.result.siteMattersDto.isRecommend,a.basieUrl=e.data.result.siteBlock.basieUrl,a.modelTable=e.data.result.siteMattersAreaSaveVOS,a.rowspan(),a.pcFileList=[],a.pcForm.picUrl&&a.pcFileList.push({url:a.basieUrl+a.pcForm.picUrl}),a.pcForm.jumpUrl?a.itemConfigChecked1=!0:a.itemConfigChecked1=!1)})},classEdit:function(e,t){e.isShow=!0,e.data1=e.date,this.thirdTableData.push()},addMenu:function(){this.isEmpty=!1,this.isEdit=!0,this.itemId="",this.isShow=!1,this.rightForm.name="",this.rightForm.shortName="",this.rightForm.iconCategoryId="",this.rightForm.siteBusinessType="1",this.rightForm.sysFunctionId="",this.rightForm.matterNumber="",this.rightForm.coordinationAreaType="",this.rightForm.printType="",this.rightForm.businessNumber="",this.rightForm.mattersCoding="",this.itemConfigChecked1=!1,this.itemConfigChecked2=!1,this.pcForm.jumpUrl="",this.pcForm.picUrl="",this.pcForm.status="1",this.pcForm.isRecommend="0",this.pcFileList=[],this.rightForm.editModelTable=[{areaIdList:[],areaId:"",city:"",region:"",accountTypeId:"",mattersId:"",machineNumber:"",machineNumberList:[]}]},edit:function(){this.isEdit=!1;var e=this;this.isShow=!1,this.rightForm.editModelTable=this.modelTable.map(function(t){var a=void 0;return t.city&&(a=e.areaList.filter(function(e){return"浙江省"===t.city?"省本级"===e.areaName:e.areaName===t.city})[0].id),{areaIdList:a?[a,t.areaId]:[t.areaId],areaId:t.areaId,city:t.city,region:t.region,accountTypeId:t.accountTypeId,mattersId:t.mattersId,machineNumber:t.machineNumber,machineNumberList:t.machineNumber.split(",")}})},itemSave:function(){var e=this;this.pcForm.jumpUrl?this.rightForm.editModelTable[0].areaIdList.length?this.rightForm.editModelTable[0].machineNumberList.length?this.$refs.rightForm.validate(function(t){if(t){var a=JSON.parse(D()(e.rightForm.editModelTable));a=a.map(function(e){return e.machineNumber=e.machineNumberList.join(","),delete e.areaIdList,delete e.machineNumberList,e});var s={id:e.itemId,bussType:e.$bussType,iconCategoryId:e.rightForm.iconCategoryId,isRecommend:e.pcForm.isRecommend,isTakesEffect:e.pcForm.status,name:e.rightForm.name,shortName:e.rightForm.shortName,siteBusinessType:e.rightForm.siteBusinessType,sysFunctionId:e.rightForm.sysFunctionId,sysFunctionName:e.rightForm.sysFunctionName,matterNumber:e.rightForm.matterNumber,coordinationAreaType:e.rightForm.coordinationAreaType,printType:e.rightForm.printType,businessNumber:e.rightForm.businessNumber,mattersCoding:e.rightForm.mattersCoding,block:{isHome:1,jumpUrl:e.pcForm.jumpUrl,picUrl:e.pcForm.picUrl,sortNumber:e.pcForm.sortNumber},siteMattersAreaSaveVOS:a};e.$post("/sm/selfmachines/saveSSMSiteMatters",s).then(function(t){t.success&&(e.getItemList(),e.isShow=!0),e.$mess(t)})}else e.$message.warning("请将信息输入完整")}):this.$message.warning("请输入机型编号"):this.$message.warning("请输入行政区划"):this.$message.warning("请输入节点链接")},cancle:function(){this.isShow=!0},uploadError:function(){this.$message.error("图片上传失败")},pcHandleAvatarSuccess:function(e,t){this.pcForm.picUrl=t.response.result.key},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png",a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},Ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabsHandleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"事项配置",name:"1"}},[a("el-container",[a("el-aside",{attrs:{width:"380px"}},[a("div",{staticClass:"itemWrap"},[a("el-button",{staticStyle:{width:"120px","margin-left":"50px","margin-bottom":"20px"},attrs:{type:"primary",size:"small"},on:{click:e.addMenu}},[e._v("新增事项")]),e._v(" "),a("el-cascader",{staticStyle:{width:"100%"},attrs:{"expand-trigger":"hover",options:e.areaList,props:{label:"areaName",value:"idpath"},clearable:!0,"change-on-select":!1,placeholder:"请选择地市名称"},on:{change:e.areaIdChange},model:{value:e.areaIdPath,callback:function(t){e.areaIdPath=t},expression:"areaIdPath"}}),e._v(" "),e.isEmpty?a("div",{staticStyle:{"text-align":"center","font-size":"20px",color:"#ccc"}},[e._v("\n              暂无数据\n            ")]):e._e(),e._v(" "),a("ul",{staticClass:"list"},e._l(e.configList,function(t,s){return a("li",{key:s,class:{active:e.configListIndex==s},attrs:{title:t.name},on:{click:function(a){return e.configListClick(t,s)}}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"0 20px","align-items":"center"}},[a("div",[e._v(e._s(t.name))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.isRecommend,expression:"item.isRecommend == 1"}],staticStyle:{width:"30px",height:"30px","line-height":"30px","text-align":"center",border:"1px solid","border-radius":"50%",color:"red"}},[e._v("荐")])])])}),0)],1)]),e._v(" "),e.isShow&&!e.isEmpty?a("div",{staticClass:"ep-main"},[a("div",{staticClass:"title"},[a("h1",[e._v("\n              "+e._s(e.configTitle)+"\n            ")]),e._v(" "),a("div",{staticClass:"title1"},[e._v("\n              基本信息\n            ")]),e._v(" "),a("div",{staticClass:"content"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("事项简称： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.rightForm.shortName))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("状态： ")]),e._v(" "),1==e.pcForm.status?a("div",{staticClass:"item-content"},[e._v("生效")]):a("div",{staticClass:"item-content"},[e._v("失效")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("事项分类： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e._f("thirdTableData")(e.rightForm.iconCategoryId)))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("业务类型： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e._f("siteBusinessType")(e.rightForm.siteBusinessType)))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("创建人员： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.creatorName))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("推荐事项： ")]),e._v(" "),0==e.pcForm.isRecommend?a("div",{staticClass:"item-content"},[e._v("否")]):a("div",{staticClass:"item-content"},[e._v("是")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("创建时间： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.createTime))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("事项编号： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.rightForm.matterNumber))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("统筹区类型： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.rightForm.coordinationAreaType))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("打印类型： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.rightForm.printType))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("业务编码： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.rightForm.businessNumber))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title"},[e._v("事项编码： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.rightForm.mattersCoding))])]),e._v(" "),a("el-col",{staticStyle:{"margin-top":"24px"},attrs:{span:24}},[a("div",{staticClass:"item-title",staticStyle:{"vertical-align":"top"}},[e._v("显示机型：")]),e._v(" "),a("div",{staticClass:"item-content",staticStyle:{width:"80%"}},[a("el-table",{attrs:{"header-align":"center",data:e.modelTable,border:"","default-expand-all":"","span-method":e.spanMethod,"header-cell-style":e.headerHide}},[a("el-table-column",{attrs:{label:"行政区划"}},[a("el-table-column",{attrs:{prop:"city",label:"hide1",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"region",label:"hide2",align:"center"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"machineNumber",label:"机型编号",align:"center"}})],1)],1)])],1)],1),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"title1"},[e._v("\n                配置信息\n              ")]),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"item-title1",staticStyle:{width:"40px","vertical-align":"top","margin-top":"0"}},[e._v("图标")]),e._v(" "),a("img",{attrs:{src:e.basieUrl+e.pcForm.picUrl,width:"100px",height:"100px"}})]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"item-title",staticStyle:{"margin-top":"0"}},[e._v("访问地址： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.pcForm.jumpUrl))])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"item-title1",staticStyle:{"margin-top":"0"}},[e._v("排序： ")]),e._v(" "),a("div",{staticClass:"item-content"},[e._v(e._s(e.pcForm.sortNumber))])]),e._v(" "),a("el-col",{attrs:{span:3}},[1==e.pcForm.status?a("div",{staticClass:"item-title success-icon",staticStyle:{"margin-top":"0"}},[e._v("生效")]):a("div",{staticClass:"item-title error-icon"},[e._v("失效")])])],1)],1)])]):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}],staticClass:"ep-main"},[a("div",{staticClass:"rightContent"},[a("div",{staticClass:"title"},[e._v("\n              基本信息\n            ")]),e._v(" "),a("el-form",{ref:"rightForm",attrs:{model:e.rightForm,rules:e.rightRules,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"事项名称",prop:"name"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.rightForm.name,callback:function(t){e.$set(e.rightForm,"name",t)},expression:"rightForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"事项简称",prop:"shortName"}},[a("el-input",{model:{value:e.rightForm.shortName,callback:function(t){e.$set(e.rightForm,"shortName",t)},expression:"rightForm.shortName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"事项分类"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择事项分类"},model:{value:e.rightForm.iconCategoryId,callback:function(t){e.$set(e.rightForm,"iconCategoryId",t)},expression:"rightForm.iconCategoryId"}},e._l(e.thirdTableData,function(t,s){return a("el-option",{key:s,attrs:{label:t.name,value:t.id}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"业务类型"}},[a("el-select",{attrs:{placeholder:"请选择业务类型"},model:{value:e.rightForm.siteBusinessType,callback:function(t){e.$set(e.rightForm,"siteBusinessType",t)},expression:"rightForm.siteBusinessType"}},e._l(e.getSiteBusinessTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"事项编号",prop:"matterNumber"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.rightForm.matterNumber,callback:function(t){e.$set(e.rightForm,"matterNumber",t)},expression:"rightForm.matterNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"统筹区类型",prop:"coordinationAreaType"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.rightForm.coordinationAreaType,callback:function(t){e.$set(e.rightForm,"coordinationAreaType",t)},expression:"rightForm.coordinationAreaType"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"打印类型",prop:"printType"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.rightForm.printType,callback:function(t){e.$set(e.rightForm,"printType",t)},expression:"rightForm.printType"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"业务编码",prop:"businessNumber"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.rightForm.businessNumber,callback:function(t){e.$set(e.rightForm,"businessNumber",t)},expression:"rightForm.businessNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"事项编码",prop:"mattersCoding"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.rightForm.mattersCoding,callback:function(t){e.$set(e.rightForm,"mattersCoding",t)},expression:"rightForm.mattersCoding"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"显示机型"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.rightForm.editModelTable,border:"","default-expand-all":""}},[a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:0===t.$index,size:"mini",icon:"el-icon-minus",circle:""},on:{click:function(a){return e.minusOrg(t.row,t.$index)}}}),e._v(" "),e.isLastRow(t.$index)?a("el-button",{attrs:{size:"mini",icon:"el-icon-plus",circle:""},on:{click:function(a){return e.addOrg(t.row)}}}):e._e()]}}],null,!1,539949014)}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"行政区划"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{staticClass:"roleSelect",staticStyle:{width:"100%",margin:"0"},attrs:{prop:"editModelTable."+t.$index+".areaIdList",rules:e.rightRules.areaIdList}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{"expand-trigger":"hover",options:e.areaList,props:{value:"id",label:"areaName"},clearable:!1,"change-on-select":!1,placeholder:"请选择所属区划"},on:{change:function(a){return e.maIdChange(t.$index,t.row)}},model:{value:t.row.areaIdList,callback:function(a){e.$set(t.row,"areaIdList",a)},expression:"scope.row.areaIdList"}})],1)]}}],null,!1,634963109)}),e._v(" "),a("el-table-column",{attrs:{label:"机器编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{staticClass:"roleSelect",staticStyle:{width:"100%",margin:"0"},attrs:{prop:"editModelTable."+t.$index+".machineNumberList",rules:e.rightRules.machineNumberList}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.row.machineNumberList,callback:function(a){e.$set(t.row,"machineNumberList",a)},expression:"scope.row.machineNumberList"}},e._l(e.machineList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1)]}}],null,!1,2188103164)})],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"rightContent"},[a("div",{staticClass:"title"},[e._v("\n              配置信息\n            ")]),e._v(" "),a("div",{staticClass:"configInfo"},[a("el-form",{ref:"form",attrs:{model:e.pcForm,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{class:"avatar-uploader "+e.uploadShow,attrs:{data:e.data1,"list-type":"picture-card",action:e.action,"show-file-list":!0,"on-success":e.pcHandleAvatarSuccess,"on-error":e.uploadError,"on-preview":e.handlePictureCardPreview,"on-remove":e.pcHandleRemove,limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,"file-list":e.pcFileList}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.iconDialog},on:{"update:visible":function(t){e.iconDialog=t}}},[a("img",{attrs:{width:"100%",src:e.imageUrl,alt:""}})])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"节点链接"}},[a("el-input",{model:{value:e.pcForm.jumpUrl,callback:function(t){e.$set(e.pcForm,"jumpUrl",t)},expression:"pcForm.jumpUrl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{model:{value:e.pcForm.sortNumber,callback:function(t){e.$set(e.pcForm,"sortNumber",t)},expression:"pcForm.sortNumber"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.pcForm.status,callback:function(t){e.$set(e.pcForm,"status",t)},expression:"pcForm.status"}},[e._v("生效")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.pcForm.status,callback:function(t){e.$set(e.pcForm,"status",t)},expression:"pcForm.status"}},[e._v("失效")])],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"推荐事项"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.pcForm.isRecommend,callback:function(t){e.$set(e.pcForm,"isRecommend",t)},expression:"pcForm.isRecommend"}},[e._v("推荐")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.pcForm.isRecommend,callback:function(t){e.$set(e.pcForm,"isRecommend",t)},expression:"pcForm.isRecommend"}},[e._v("不推荐")])],1)],1)],1)],1)],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],staticClass:"ep-footer"},[e.isShow?a("p",[e._v("更新记录："+e._s(e.modifyTime)+" / "+e._s(e.modifierName))]):e._e(),e._v(" "),e.isShow?e._e():a("p"),e._v(" "),a("div",{staticClass:"btn"},[e.isShow?a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.edit}},[e._v("编辑")]):e._e(),e._v(" "),e.isShow?e._e():a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.itemSave}},[e._v("保存")]),e._v(" "),e.isShow?e._e():a("el-button",{staticStyle:{width:"100px"},on:{click:e.cancle}},[e._v("取消")])],1)])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"事项分类",name:"2"}},[a("el-table",{staticStyle:{width:"100%","padding-left":"20px"},attrs:{data:e.thirdTableData}},[a("el-table-column",{attrs:{prop:"name",label:"分类名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[Boolean(t.row.isShow)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.name,expression:"scope.row.name"}],attrs:{type:"text"},domProps:{value:t.row.name},on:{input:function(a){a.target.composing||e.$set(t.row,"name",a.target.value)}}}):a("span",[e._v(e._s(t.row.name))])]}}],null,!1,2606962602)}),e._v(" "),a("el-table-column",{attrs:{prop:"sortNo",label:"分类序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[Boolean(t.row.isShow)?a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.sortNo,expression:"scope.row.sortNo"}],attrs:{type:"number"},domProps:{value:t.row.sortNo},on:{input:function(a){a.target.composing||e.$set(t.row,"sortNo",a.target.value)}}}):a("span",[e._v(e._s(t.row.sortNo))])]}}],null,!1,1824219208)}),e._v(" "),a("el-table-column",{attrs:{prop:"mattersCount",label:"事项数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[Boolean(t.row.isShow)?a("div",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.classSaveTable(t.row,t.$index)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.classCancleTable(t.row)}}},[e._v("取消")])],1):a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.classEdit(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.addItemClass(t.row)}}},[e._v("添加事项")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteClass(t.row)}}},[e._v("删除")])],1)]}}],null,!1,4125551112)})],1),e._v(" "),a("el-button",{staticStyle:{"padding-left":"20px"},attrs:{type:"text"},on:{click:e.addClass}},[e._v("+增加分类")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加事项",visible:e.addItemClassDialog,titles:["未选项","已选项"],width:"50%"},on:{"update:visible":function(t){e.addItemClassDialog=t}}},[a("el-transfer",{attrs:{data:e.transferDataClass,"filter-placeholder":"搜索事项名称",filterable:"",props:{key:"id",label:"name"}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.option;return a("span",{attrs:{title:s.name}},[e._v(e._s(s.name))])}}],null,!1,3805929155),model:{value:e.transferMolelClass,callback:function(t){e.transferMolelClass=t},expression:"transferMolelClass"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addItemClassDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveItemClassDialog}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"权限配置",visible:e.dialogConfig,width:"40%"},on:{"update:visible":function(t){e.dialogConfig=t}}},[a("el-transfer",{attrs:{data:e.transferDataConfig,filterable:"","filter-placeholder":"搜索事项名称",props:{key:"id",label:"name"}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.option;return a("span",{attrs:{title:s.name}},[e._v(e._s(s.name))])}}],null,!1,3805929155),model:{value:e.transferConfigModel,callback:function(t){e.transferConfigModel=t},expression:"transferConfigModel"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogConfig=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfigSave}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var Fe=a("VU/8")(xe,Ie,!1,function(e){a("LIXR")},"data-v-9738d08a",null).exports,Te=a("uXZL"),Se=a.n(Te),Ne=a("mtWM"),De=a.n(Ne),Le={name:"UpLoadExcel",data:function(){return{fullscreenLoading:!1,fileName:""}},props:{text:{type:String,default:"导入"},isDisabled:{type:Boolean,default:!1},size:{type:String,default:""},upLoadUrl:{type:String,default:""}},computed:{},methods:{uploadFile:function(e){var t=this,a=e.file,s=this,i=new FormData;return i.append("file",a),De.a.post(this.upLoadUrl,i,{timeout:18e4}).then(function(e){e.data.success?(s.$message({type:"success",message:e.data.resultDes,onClose:function(){s.fullscreenLoading=!1}}),s.$emit("uploadSuccess",e.data,t.fileName)):s.$message({type:"error",message:e.data.resultDes,onClose:function(){s.fullscreenLoading=!1}})}),!1},actionUrl:function(){return this.upLoadUrl},beforeUpload:function(e){this.fullscreenLoading=!0,this.fileName=e.name;var t="xlsx"===e.name.split(".")[e.name.split(".").length-1],a="xls"===e.name.split(".")[e.name.split(".").length-1];if(!t&&!a)return this.$message.error("导入文件只能是xlsx/xls格式!"),this.fullscreenLoading=!1,!1;var s=new FileReader;s.onload=function(e){try{var t=Se.a.read(e.target.result,{type:"binary"});for(var a in t.Sheets)Se.a.utils.sheet_to_json(t.Sheets[a])}catch(e){return!1}},s.readAsBinaryString(e)},onSuccess:function(e){var t=this;e.success?(this.$message({type:"success",message:e.resultDes,onClose:function(){t.fullscreenLoading=!1}}),this.$emit("uploadSuccess",e,this.fileName)):this.$message({type:"error",message:e.resultDes,onClose:function(){t.fullscreenLoading=!1}})}}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0}}],staticStyle:{display:"inline-block"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)",action:e.actionUrl(),name:"file",disabled:e.isDisabled,"http-request":e.uploadFile,"show-file-list":!1,"before-upload":e.beforeUpload,"on-success":e.onSuccess}},[a("div",{staticStyle:{padding:"0 20px"}},[e._v(e._s(e.text))])])},staticRenderFns:[]};var Ae=a("VU/8")(Le,$e,!1,function(e){a("7buz")},null,null).exports,Pe={data:function(){return{newsName:"",date:"",view:[],viewStatus:[],optionA:[{value:"1",label:"全部可见"},{value:"2",label:"部分可见"}],optionB:[{value:"on",label:"上线"},{value:"off",label:"下线"},{value:"del",label:"删除"},{value:"wait",label:"等待"}],tableData:[],currentPage:5,dialogVisible:!1,detailData:{},arr:{},btnState:"",params:{pageNum:1,pageSize:10},date1:"",date2:""}},created:function(){this.getList()},methods:{changeDate:function(){this.date1=this.util.formatDate(new Date(this.date[0]),"yyyy-MM-dd hh:mm:ss"),this.date2=this.util.formatDate(new Date(this.date[1]),"yyyy-MM-dd hh:mm:ss")},Search:function(){this.params.name=this.newsName,this.params.startTime=this.date1,this.params.endTime=this.date2,this.params.visibility=this.view,this.params.status=this.viewStatus,this.getList()},getList:function(){var e=this,t=M()({},this.params,{pageNum:1,pageSize:10});this.$post("/ybapp/news/list",t).then(function(t){if(t.success){e.tableData=t.result.dataList;for(var a=0;a<e.tableData.length;a++){var s=e.util.formatDate(new Date(e.tableData[a].createTime),"yyyy-MM-dd hh:mm:ss");e.tableData[a].createTime=s}}}).catch(function(e){})},handleSizeChange:function(e){},handleCurrentChange:function(e){},addClick:function(){this.$router.push("/home/addNews")},getDetail:function(e){var t=this;this.$post("/ybapp/news/detail",{id:e}).then(function(e){e.success&&(t.detailData=M()({},t.detailData,e.result),"edit"===t.btnState?t.$router.push({path:"/home/addNews",query:{param:t.detailData,formState:"edit"}}):t.$router.push({path:"/home/detailNews",query:{param:t.detailData}}))}).catch(function(e){})},checkTable:function(e){this.btnState="check",this.getDetail(e.id,this.btnState)},editTable:function(e){this.btnState="edit",this.getDetail(e.id,this.btnState)},tableHeaderColor:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"background-color: #ddd;color: black;font-weight: 500;"},deleteTable:function(e){this.tableData.id=e.id,this.dialogVisible=!0},deleteConfirm:function(){var e=this;this.$post("/ybapp/news/delete",{id:this.tableData.id}).then(function(t){t.success&&(e.dialogVisible=!1,e.getList())}).catch(function(e){})}}},Me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[a("div",{staticClass:"com"},[a("el-input",{staticClass:"space in",attrs:{placeholder:"搜索资讯名称"},model:{value:e.newsName,callback:function(t){e.newsName=t},expression:"newsName"}}),e._v(" "),a("div",{staticClass:"space"},[a("span",{staticClass:"demonstration"}),e._v(" "),a("el-date-picker",{attrs:{"unlink-panels":"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),a("el-select",{staticClass:"space",attrs:{placeholder:"请选择可见类型"},model:{value:e.view,callback:function(t){e.view=t},expression:"view"}},e._l(e.optionA,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{staticClass:"space",attrs:{placeholder:"请选择状态"},model:{value:e.viewStatus,callback:function(t){e.viewStatus=t},expression:"viewStatus"}},e._l(e.optionB,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticClass:"space",attrs:{type:"primary"},on:{click:e.Search}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"space",attrs:{type:"primary"},on:{click:e.addClick}},[e._v("新增")])],1)]),e._v(" "),a("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":e.tableHeaderColor}},[a("el-table-column",{attrs:{prop:"name",label:"资讯名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"visibility",label:"可见类型",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",label:"创建人员",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.checkTable(t.row)}}},[e._v("查看")]),e._v(" "),"待发布"===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editTable(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),"已删除"!==t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.deleteTable(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"orange"}}),a("span",[e._v("你确定要删除该咨讯吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteConfirm}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":100,layout:"total, prev, pager, next",total:1e3},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var ze=a("VU/8")(Pe,Me,!1,function(e){a("uz0I")},"data-v-64f9c06c",null).exports,Ue=a("bOdI"),Re=a.n(Ue),Be={data:function(){var e;return e={props:{multiple:!0},limitNum:"6",sizeForm:{unitEdit:[],personEdit:[],photoList:[],name:"",publish:"",visibility:"",desc:"",unitList:[],personList:[],unitList1:[],personList1:[],check:[]},defaultMsg:"",config:{initialFrameWidth:null,initialFrameHeight:350},synopsis:"",editorOption:{placeholder:"请添加资讯"},dialogImageUrl:"",dialogVisible:!1,formLabelWidth:"80px"},Re()(e,"limitNum",3),Re()(e,"formState",""),Re()(e,"pickerOptions",{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}),Re()(e,"value3",""),Re()(e,"btnStatus",!0),Re()(e,"btnType",!0),Re()(e,"btnUnit",!1),Re()(e,"btnPerson",!1),Re()(e,"time",""),Re()(e,"arr1",[]),Re()(e,"arr2",[]),Re()(e,"changeArr",[]),Re()(e,"editState",!1),Re()(e,"editUnit",[]),Re()(e,"editPerson",[]),e},created:function(){this.getGinsengLand(),this.formState=this.$route.query.formState;var e=this.$route.query.param;"edit"===this.formState&&(this.editState=!0,this.sizeForm.photoList=e.photolist,this.sizeForm.name=e.newsSynopsis.name,this.synopsis=e.newsSynopsis.synopsis,this.time=e.newsSynopsis.publishTime,this.sizeForm.id=e.newsSynopsis.id,this.value3=new Date(this.time),"2"==e.visibility?this.btnType=!1:this.btnType=!0,0==this.btnType&&(this.btnUnit=!0,this.btnPerson=!0,e.unitList.length>0&&(this.sizeForm.check.push("1"),this.editUnit=e.unitList),e.personList.length>0&&(this.sizeForm.check.push("2"),this.editPerson=e.personList)),"1"==e.publish?this.sizeForm.publish="1":"2"==e.publish&&(this.sizeForm.publish="2",this.btnStatus=!1),"1"==e.visibility?this.sizeForm.visibility="1":"2"==e.visibility&&(this.sizeForm.visibility="2"))},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},methods:{getArea:function(e){this.getChange(e),this.arr1=this.changeArr,1==this.editState&&this.sizeForm.check.push("1")},getChange:function(e){var t=this;return this.changeArr=[],e.forEach(function(e){var a=!0,s=!1,i=void 0;try{for(var r,n=S()(t.sizeForm.unitList1);!(a=(r=n.next()).done);a=!0){var o=r.value;if(e[0]==o.value){var l=!0,c=!1,u=void 0;try{for(var d,p=S()(o.children);!(l=(d=p.next()).done);l=!0){var m=d.value;if(e[1]==m.value){var h={id:m.value,name:m.label};t.changeArr.push(h);break}}}catch(e){c=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw u}}break}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}}),this.changeArr},getPerson:function(e){this.getChange(e),this.arr2=this.changeArr,1==this.editState&&this.sizeForm.check.push("2")},onEditorBlur:function(){},onEditorFocus:function(e){},onEditorChange:function(){},onSubmit:function(){var e={name:this.sizeForm.name,publishTime:2==this.sizeForm.publish?this.value3:"",synopsis:this.synopsis};"edit"==this.formState&&(e.id=this.sizeForm.id);var t={newsSynopsis:e,photolist:this.sizeForm.photoList,publish:this.sizeForm.publish,visibility:this.sizeForm.visibility,unitList:"edit"==this.formState?this.getChange(this.sizeForm.unitList):this.arr1,personList:"edit"==this.formState?this.getChange(this.sizeForm.personList):this.arr2};this.$post("/ybapp/news/saveNews",t).then(function(e){e.success}).catch(function(e){}),this.$router.push("/home/NewsManagement")},choosePhoto:function(){document.getElementById("photoInput").click()},uploadFile:function(e){var t=this;if(void 0==e.target.files[0])return!1;if(e.target.files[0].size>5242880)return this.$message({message:"图片大小不得大于5M",type:"warning"}),!1;var a=new FormData;a.append("photoFile",e.target.files[0]),this.$axios.post("/ybapp/upload/uploadPhoto",a).then(function(e){t.sizeForm.photoList.push(e.data.result)}).catch(function(e){})},back:function(){this.$router.go(-1)},getGinsengLand:function(){var e=this;this.$post("/ybapp/siteArea/tree",{bussType:1,pageNum:1,pageSize:1e3}).then(function(t){t.success&&(t.result.dataList.map(function(e,t){e.children.map(function(e,t){delete e.children})}),e.sizeForm.unitList1=t.result.dataList,e.sizeForm.personList1=t.result.dataList,1==e.editState&&(e.editUnit.forEach(function(t){var a=!0,s=!1,i=void 0;try{for(var r,n=S()(e.sizeForm.unitList1);!(a=(r=n.next()).done);a=!0){var o=r.value,l=!0,c=!1,u=void 0;try{for(var d,p=S()(o.children);!(l=(d=p.next()).done);l=!0){var m=d.value;if(t.id==m.value){var h=[];h[0]=o.value,h[1]=m.value,e.sizeForm.unitList.push(h)}}}catch(e){c=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw u}}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}}),e.editPerson.forEach(function(t){var a=!0,s=!1,i=void 0;try{for(var r,n=S()(e.sizeForm.personList1);!(a=(r=n.next()).done);a=!0){var o=r.value,l=!0,c=!1,u=void 0;try{for(var d,p=S()(o.children);!(l=(d=p.next()).done);l=!0){var m=d.value;if(t.id==m.value){var h=[];h[0]=o.value,h[1]=m.value,e.sizeForm.personList.push(h)}}}catch(e){c=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw u}}}}catch(e){s=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}})))}).catch(function(e){})},changePublish:function(e){this.btnStatus="1"===e},selectTime:function(){},changeType:function(e){this.btnType="1"===e,"1"===this.sizeForm.visibility&&(this.sizeForm.unitList=[],this.sizeForm.personList=[])},checkUnit:function(e){this.btnUnit=!0===e,!1===e&&(this.sizeForm.unitList=[])},checkPerson:function(e){this.btnPerson=!0===e,!1===e&&(this.sizeForm.personList=[])},deletePhoto:function(e,t){this.sizeForm.photoList.splice(t,1)}}},Oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["edit"==e.formState?a("el-button",{staticClass:"right",attrs:{size:"large"}},[e._v("待发布")]):e._e(),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"资讯名称:"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.sizeForm.name,callback:function(t){e.$set(e.sizeForm,"name",t)},expression:"sizeForm.name"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"资讯图片:"}},[a("p",{staticStyle:{"font-size":"12px",color:"#888"}},[e._v("图片格式为jpg、png，不大于2M的文件；最多可上传5张")]),e._v(" "),a("div",{staticClass:"ListLine"},[a("div",{staticClass:"PhotoBox"},[e._l(e.sizeForm.photoList,function(t,s){return a("div",{key:s,staticClass:"photo"},[a("img",{attrs:{src:t}}),e._v(" "),a("svg-icon",{attrs:{"icon-class":"delete"},on:{click:function(a){return e.deletePhoto(t,s)}}})],1)}),e._v(" "),a("svg-icon",{attrs:{"icon-class":"plusPhoto"},on:{click:function(t){return e.choosePhoto()}}}),e._v(" "),a("input",{staticStyle:{display:"none"},attrs:{accept:"image/jpeg, image/jpg",id:"photoInput",type:"file",name:"file"},on:{change:function(t){return e.uploadFile(t)}}})],2)])]),e._v(" "),a("el-form-item",{attrs:{label:"发布时间:"}},[a("el-radio-group",{attrs:{size:"medium"},on:{change:e.changePublish},model:{value:e.sizeForm.publish,callback:function(t){e.$set(e.sizeForm,"publish",t)},expression:"sizeForm.publish"}},[a("el-radio",{attrs:{label:"1"}},[e._v("立即发布")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("定时发布")]),e._v(" "),0==e.btnStatus?a("span",[a("span",{staticClass:"demonstration"},[e._v("设置默认时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},on:{change:e.selectTime},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1):e._e()],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"可见类型:"}},[a("el-radio-group",{attrs:{size:"medium"},on:{change:e.changeType},model:{value:e.sizeForm.visibility,callback:function(t){e.$set(e.sizeForm,"visibility",t)},expression:"sizeForm.visibility"}},[a("el-radio",{attrs:{label:"1"}},[e._v("全部可见")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("部分可见")])],1)],1),e._v(" "),0==e.btnType?a("el-form-item",{attrs:{label:"可见对象"}},[a("el-checkbox-group",{model:{value:e.sizeForm.check,callback:function(t){e.$set(e.sizeForm,"check",t)},expression:"sizeForm.check"}},[a("el-checkbox",{attrs:{label:"1"},on:{change:e.checkUnit}},[e._v("单位")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"},on:{change:e.checkPerson},model:{value:e.sizeForm.person1,callback:function(t){e.$set(e.sizeForm,"person1",t)},expression:"sizeForm.person1"}},[e._v("个人")])],1),e._v(" "),a("div",[1==e.btnUnit?a("el-cascader",{attrs:{placeholder:"请选择单位",options:e.sizeForm.unitList1,props:e.props,clearable:""},on:{change:e.getArea},model:{value:e.sizeForm.unitList,callback:function(t){e.$set(e.sizeForm,"unitList",t)},expression:"sizeForm.unitList"}}):e._e()],1),e._v(" "),a("div",[1==e.btnPerson?a("el-cascader",{attrs:{placeholder:"请选择个人",options:e.sizeForm.personList1,props:e.props,clearable:""},on:{change:e.getPerson},model:{value:e.sizeForm.personList,callback:function(t){e.$set(e.sizeForm,"personList",t)},expression:"sizeForm.personList"}}):e._e()],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"详细描述:",prop:"words"}},[a("div",{staticClass:"edit_container"},[a("quill-editor",{ref:"myQuillEditor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.synopsis,callback:function(t){e.synopsis=t},expression:"synopsis"}})],1)]),e._v(" "),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var Ee=a("VU/8")(Be,Oe,!1,function(e){a("Oplh")},"data-v-76e6d086",null).exports,Ve={data:function(){return{sizeForm:{name:"1111",photoList:[],author:"",createTime:"",modifyTime:"",publishTime:"",visibility:"",unitList:[],personList:[],synopsis:""},visible:!1}},created:function(){var e=this.$route.query.param;this.sizeForm.name=e.newsSynopsis.name,this.sizeForm.author=e.newsSynopsis.authorName,this.sizeForm.photoList=e.photolist,this.sizeForm.personList=e.personList,this.sizeForm.unitList=e.unitList,this.sizeForm.modifyTime=this.util.formatDate(new Date(e.newsSynopsis.modifyTime),"yyyy-MM-dd hh:mm:ss"),this.sizeForm.createTime=this.util.formatDate(new Date(e.newsSynopsis.createTime),"yyyy-MM-dd hh:mm:ss"),this.sizeForm.publishTime=this.util.formatDate(new Date(e.newsSynopsis.publishTime),"yyyy-MM-dd hh:mm:ss"),"1"==e.visibility?this.sizeForm.visibility="全部可见":"2"==e.visibility&&(this.sizeForm.visibility="部分可见",this.visible="true"),this.sizeForm.synopsis=e.newsSynopsis.synopsis},methods:{back:function(){this.$router.go(-1)}}},qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"check",attrs:{size:"large"}},[e._v("已发布")]),e._v(" "),a("el-form",{attrs:{model:e.sizeForm}},[a("el-form-item",[e._v("资讯名称:\n        "),a("span",{attrs:{name:"sizeForm.name"}},[e._v(e._s(e.sizeForm.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"资讯图片:"}},[a("el-col",{attrs:{name:"sizeForm.photoList"}},e._l(e.sizeForm.photoList,function(e,t){return a("img",{key:t,staticStyle:{width:"300px",height:"300px"},attrs:{src:e,alt:""}})}),0)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人员/时间:"}},[a("span",{attrs:{name:"sizeForm.author"}},[e._v(e._s(e.sizeForm.author)+"/"+e._s(e.sizeForm.createTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人员/时间:"}},[a("span",{attrs:{name:"sizeForm.modifyTime"}},[e._v(e._s(e.sizeForm.modifyTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"发布时间:"}},[a("span",{attrs:{name:"sizeForm.publishTime"}},[e._v(e._s(e.sizeForm.publishTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"可见类型:"}},[a("span",{attrs:{name:"sizeForm.visibility"}},[e._v(e._s(e.sizeForm.visibility))])]),e._v(" "),e.visible?a("el-form-item",{attrs:{label:"可见对象:"}},[a("el-row",[e._v("单位：\n        "),e._l(e.sizeForm.unitList,function(t,s){return a("span",{key:s,staticClass:"object",attrs:{name:"sizeForm.unitList"}},[e._v(e._s(t.name)+",")])})],2),e._v(" "),a("el-row",{staticStyle:{"margin-left":"72px"}},[e._v("个人：\n        "),e._l(e.sizeForm.personList,function(t,s){return a("span",{key:s,staticClass:"object",attrs:{name:"sizeForm.pesonList"}},[e._v(e._s(t.name)+",")])})],2)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"咨讯内容:"}},[a("el-col",[a("div",{attrs:{name:"sizeForm.synopsis"}},[e._v(e._s(e.sizeForm.synopsis))])])],1)],1),e._v(" "),a("el-button",{on:{click:e.back}},[e._v("返回")])],1)},staticRenderFns:[]};var je=a("VU/8")(Ve,qe,!1,function(e){a("ajNO")},"data-v-c33a7a76",null).exports,Ke={data:function(){return{activeName:"first"}},methods:{handleClick:function(e,t){}}},He={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MattersManagement"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"事项配置",name:"first"}},["first"==e.activeName?a("MattersConfig"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"事项分类",name:"second"}},["second"==e.activeName?a("MattersType"):e._e()],1)],1)],1)},staticRenderFns:[]};var Qe=a("VU/8")(Ke,He,!1,function(e){a("THIP")},"data-v-b5f3ec7e",null).exports,Xe={data:function(){return Re()({form:{},areaList:[330100,330199],appBlock:{jumpUrl:"",picUrl:"",sortNumber:0,status:2},pcBlock:{jumpUrl:"",picUrl:"",sortNumber:0,status:2},areaId:0,mattersId:0,sittersAreaId:0,uploadMethod:"",modified:!1,appChecked:!1,pcChecked:!1,formLabelWidth:"120px",options:[],appVisible:!1,pcVisible:!1},"areaId","330199")},created:function(){this.form=JSON.parse(sessionStorage.getItem("MattersConfigItem")),this.form.createTime=this.util.formatDate(new Date(this.form.createTime),"yyyy-MM-dd"),void 0!=this.form.areaId&&(this.modified=!0,this.getAreaDetail()),this.getGinsengLand()},watch:{areaList:function(e){}},methods:{getArea:function(e){this.areaId=e[1]},choosePhoto:function(e){this.uploadMethod=e,document.getElementById("photoInput").click()},uploadFile:function(e){var t=this;if(void 0==e.target.files[0])return!1;if(e.target.files[0].size>5242880)return this.$message({message:"图片大小不得大于5M",type:"warning"}),!1;var a=new FormData;a.append("photoFile",e.target.files[0]),this.$post("/ybapp/upload/uploadPhoto",a).then(function(e){if(!e.success)return e.success?void 0:void t.$message({type:"warning",message:"业务出错"});"app"==t.uploadMethod?t.appBlock.picUrl=e.result:"pc"==t.uploadMethod&&(t.pcBlock.picUrl=e.result)})},save:function(){var e=this,t={};this.appChecked&&(t.appBlock=this.appBlock),this.pcChecked&&(t.pcBlock=this.pcBlock),this.modified&&(t.sittersAreaId=this.form.mattersAreaId),t.areaId=this.areaList[1],t.mattersId=this.form.id,this.$post("/ybapp/siteMattersArea/saveSiteMattersAreaAndBlock",t).then(function(t){t.success?e.$router.go(-1):e.$message({type:"warning",message:t.resultDes})}).catch(function(e){})},cancel:function(){this.$router.go(-1)},getGinsengLand:function(){var e=this;this.$post("/ybapp/siteArea/tree",{bussType:1,pageNum:1,pageSize:1e3}).then(function(t){t.success&&(t.result.dataList.map(function(e,t){e.children.map(function(e,t){delete e.children})}),e.options=t.result.dataList)}).catch(function(e){})},getAreaDetail:function(){var e=this,t={areaId:this.form.areaId,mattersId:this.form.id};this.$post("/ybapp/siteMattersArea/getAreaDetail",t).then(function(t){t.success&&(e.areaName=t.result.areaName,e.areaList[1]=t.result.areaId,null!=t.result.appBlock&&(e.appBlock=t.result.appBlock,e.appChecked=!0,e.appVisible=!0),null!=t.result.pcBlock&&(e.pcBlock=t.result.pcBlock,e.pcChecked=!0,e.pcVisible=!0))})},checkPc:function(e){this.pcVisible=!0===e},checkApp:function(e){this.appVisible=!0===e}}},Ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"NewAreas"},[a("p",{staticClass:"p"},[e._v(e._s(e.form.name))]),e._v(" "),a("div",{staticClass:"baseInfo clearfix"},[a("p",[e._v("基本信息")]),e._v(" "),a("el-form",{attrs:{model:e.form}},[a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"事项ID: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"事项简称: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:"",placeholder:"请输入事项简称"},model:{value:e.form.shortName,callback:function(t){e.$set(e.form,"shortName",t)},expression:"form.shortName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"创建人: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:"",placeholder:"请输入事项简称"},model:{value:e.form.shortName,callback:function(t){e.$set(e.form,"shortName",t)},expression:"form.shortName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"创建日期: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:"",placeholder:"请输入事项简称"},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"所属类别: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:"",placeholder:"请输入事项简称"},model:{value:e.form.iconCategoryName,callback:function(t){e.$set(e.form,"iconCategoryName",t)},expression:"form.iconCategoryName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"所属统筹区: ","label-width":e.formLabelWidth}},[a("el-cascader",{staticStyle:{width:"70%"},attrs:{options:e.options,"show-all-levels":!1},on:{change:e.getArea},model:{value:e.areaList,callback:function(t){e.areaList=t},expression:"areaList"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"86%",float:"left"},attrs:{label:"备注: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"configInfo"},[a("p",[e._v("配置信息")]),e._v(" "),a("el-form",{attrs:{model:e.appBlock}},[a("el-form-item",{staticStyle:{width:"100%",float:"left"},attrs:{label:"掌上办: ","label-width":e.formLabelWidth}},[a("el-checkbox",{attrs:{label:"开通",name:"type"},on:{change:e.checkApp},model:{value:e.appChecked,callback:function(t){e.appChecked=t},expression:"appChecked"}})],1),e._v(" "),e.appVisible?a("div",[a("div",{staticClass:"ListLine"},[a("p",{staticStyle:{"text-indent":"60px",color:"red","margin-bottom":"20px"}},[e._v("图标、图片格式为jpg、jpeg,不大于5M的文件")]),e._v(" "),a("div",{staticClass:"PhotoBox"},[a("svg-icon",{attrs:{"icon-class":"plusPhoto"},on:{click:function(t){return e.choosePhoto("app")}}}),e._v(" "),""!=e.appBlock.picUrl?a("img",{attrs:{src:e.appBlock.picUrl},on:{click:function(t){return e.choosePhoto("app")}}}):e._e(),e._v(" "),a("input",{staticStyle:{display:"none"},attrs:{accept:"image/jpeg, image/jpg",id:"photoInput",type:"file",name:"file"},on:{change:function(t){return e.uploadFile(t)}}})],1)]),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"访问地址: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入访问地址"},model:{value:e.appBlock.jumpUrl,callback:function(t){e.$set(e.appBlock,"jumpUrl",t)},expression:"appBlock.jumpUrl"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"排序: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入排序"},model:{value:e.appBlock.sortNumber,callback:function(t){e.$set(e.appBlock,"sortNumber",t)},expression:"appBlock.sortNumber"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"状态: ","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.appBlock.status,callback:function(t){e.$set(e.appBlock,"status",t)},expression:"appBlock.status"}},[a("el-radio",{attrs:{label:1}},[e._v("生效")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("失效")])],1)],1)],1):e._e()],1),e._v(" "),a("el-form",{attrs:{model:e.pcBlock}},[a("el-form-item",{staticStyle:{width:"100%",float:"left"},attrs:{label:"网上办: ","label-width":e.formLabelWidth}},[a("el-checkbox",{attrs:{label:"开通",name:"type"},on:{change:e.checkPc},model:{value:e.pcChecked,callback:function(t){e.pcChecked=t},expression:"pcChecked"}})],1),e._v(" "),1==e.pcVisible?a("div",[a("div",{staticClass:"ListLine",staticStyle:{"padding-top":"120px"}},[a("p",{staticStyle:{"text-indent":"60px",color:"red","margin-bottom":"20px"}},[e._v("图标、图片格式为jpg、jpeg,不大于5M的文件")]),e._v(" "),a("div",{staticClass:"PhotoBox"},[a("svg-icon",{attrs:{"icon-class":"plusPhoto"},on:{click:function(t){return e.choosePhoto("pc")}}}),e._v(" "),""!=e.pcBlock.picUrl?a("img",{attrs:{src:e.pcBlock.picUrl},on:{click:function(t){return e.choosePhoto("pc")}}}):e._e()],1)]),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"访问地址: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入访问地址"},model:{value:e.pcBlock.jumpUrl,callback:function(t){e.$set(e.pcBlock,"jumpUrl",t)},expression:"pcBlock.jumpUrl"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"排序: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入事项简称"},model:{value:e.pcBlock.sortNumber,callback:function(t){e.$set(e.pcBlock,"sortNumber",t)},expression:"pcBlock.sortNumber"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"状态: ","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.pcBlock.status,callback:function(t){e.$set(e.pcBlock,"status",t)},expression:"pcBlock.status"}},[a("el-radio",{attrs:{label:2}},[e._v("生效")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("失效")])],1)],1)],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v("取消")])],1)])},staticRenderFns:[]};var We=a("VU/8")(Xe,Ze,!1,function(e){a("UyPm")},"data-v-6c41175d",null).exports,Je={data:function(){return{form:{},formLabelWidth:"120px",areaName:"",appBlock:null,pcBlock:null}},created:function(){this.form=JSON.parse(sessionStorage.getItem("MattersConfigItem")),this.form.createTime=this.util.formatDate(new Date(this.form.createTime),"yyyy-MM-dd"),this.getAreaDetail()},methods:{getAreaDetail:function(){var e=this,t={areaId:this.form.areaId,mattersId:this.form.id};this.$post("/ybapp/siteMattersArea/getAreaDetail",t).then(function(t){t.success&&(e.areaName=t.result.areaName,null!=t.result.appBlock&&(e.appBlock=t.result.appBlock),null!=t.result.pcBlock&&(e.pcBlock=t.result.pcBlock))})}}},Ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mattersDetail"},[a("p",{staticClass:"mattersTitle"},[e._v(e._s(e.form.name))]),e._v(" "),a("div",{staticClass:"baseInfo clearfix"},[a("div",{staticClass:"infoTitle"},[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"baseContent"},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"事项ID: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"事项简称: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:""},model:{value:e.form.shortName,callback:function(t){e.$set(e.form,"shortName",t)},expression:"form.shortName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"创建人: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:""},model:{value:e.form.shortName,callback:function(t){e.$set(e.form,"shortName",t)},expression:"form.shortName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"创建日期: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"所属类别: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:""},model:{value:e.form.iconCategoryName,callback:function(t){e.$set(e.form,"iconCategoryName",t)},expression:"form.iconCategoryName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"49%",float:"left"},attrs:{label:"所属统筹区: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"70%"},attrs:{disabled:""},model:{value:e.areaName,callback:function(t){e.areaName=t},expression:"areaName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"86%",float:"left"},attrs:{label:"备注: ","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",disabled:""},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"configInfo"},[a("div",{staticClass:"infoTitle"},[e._v("配置信息")]),e._v(" "),a("div",{staticClass:"configContent"},[null!=e.appBlock?a("div",{staticClass:"configList"},[a("div",{staticClass:"title"},[e._v("掌上办")]),e._v(" "),a("div",{staticClass:"listLine"},[a("div",{staticClass:"block"},[a("span",[e._v("图标")]),e._v(" "),a("img",{attrs:{src:e.appBlock.picUrl}})]),e._v(" "),a("div",{staticClass:"block"},[a("span",[e._v("访问地址：")]),e._v(" "),a("span",[e._v(e._s(e.appBlock.jumpUrl))])]),e._v(" "),a("div",{staticClass:"block"},[a("span",[e._v("排序：")]),e._v(" "),a("span",[e._v(e._s(e.appBlock.sortNumber))])]),e._v(" "),a("div",{staticClass:"block"},[1==e.appBlock.status?a("el-button",{attrs:{type:"danger"}},[e._v("失效")]):e._e(),e._v(" "),2==e.appBlock.status?a("el-button",{attrs:{type:"primary"}},[e._v("生效")]):e._e()],1)])]):e._e(),e._v(" "),null!=e.pcBlock?a("div",{staticClass:"configList"},[a("div",{staticClass:"title"},[e._v("网上办")]),e._v(" "),a("div",{staticClass:"listLine"},[a("div",{staticClass:"block"},[a("span",[e._v("图标")]),e._v(" "),a("img",{attrs:{src:e.pcBlock.picUrl}})]),e._v(" "),a("div",{staticClass:"block"},[a("span",[e._v("访问地址：")]),e._v(" "),a("span",[e._v(e._s(e.pcBlock.jumpUrl))])]),e._v(" "),a("div",{staticClass:"block"},[a("span",[e._v("排序：")]),e._v(" "),a("span",[e._v(e._s(e.pcBlock.sortNumber))])]),e._v(" "),a("div",{staticClass:"block"},[1==e.pcBlock.status?a("el-button",{attrs:{type:"danger"}},[e._v("失效")]):e._e(),e._v(" "),2==e.pcBlock.status?a("el-button",{attrs:{type:"primary"}},[e._v("生效")]):e._e()],1)])]):e._e()])])])},staticRenderFns:[]};var Ge=a("VU/8")(Je,Ye,!1,function(e){a("+VJj")},"data-v-63792cf7",null).exports,et={data:function(){return{parentList:[],childList:[],childId:"",mattersList:[],iconList:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.$post("/ybapp/siteArea/tree",{bussType:1,pageNum:1,pageSize:10}).then(function(t){if(t.success)for(var a=t.result.dataList,s=0;s<a.length;s++)e.parentList=a,e.childList[s]=e.parentList[s].children}).catch(function(e){})},getArea:function(){var e=this;this.$post("/ybapp/siteMattersArea/selectMattersList",{areaId:this.childId}).then(function(t){t.success&&(e.mattersList=t.result,e.$emit("matters",e.mattersList))}).catch(function(e){})},getStatic:function(){var e=this;this.$post("/ybapp/home/selectHomeConfigList",{areaId:this.childId}).then(function(t){if(t.success){var a=t.result;e.$emit("static",a)}}).catch(function(e){})},handleOpen:function(e,t){},handleClose:function(e,t){},handleSubOpen:function(e){this.childId=e.value,this.getArea(),this.getStatic(),this.$emit("clearIcon",this.iconList)}}},tt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sideNav"},[a("el-menu",{staticClass:"el-menu-vertical-demo",on:{open:e.handleOpen,close:e.handleClose}},e._l(e.parentList,function(t,s){return a("el-submenu",{key:s,attrs:{"default-active":e.$route.path,index:s+""}},[a("template",{slot:"title"},[a("span",[e._v(e._s(t.label))])]),e._v(" "),a("el-menu-item-group",e._l(e.childList[s],function(t,s){return a("el-menu-item",{key:t.index,attrs:{index:s+""},on:{click:function(a){return e.handleSubOpen(t)}}},[e._v(e._s(t.label))])}),1)],2)}),1)],1)},staticRenderFns:[]};var at=a("VU/8")(et,tt,!1,function(e){a("RgSJ")},"data-v-811bbb14",null).exports,st={props:{iconList:{type:Array,default:[]}}},it={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"phoneContent"},[s("img",{attrs:{src:a("lCU3"),alt:"首页配置"}}),e._v(" "),s("div",{staticClass:"iconContent"},[e._l(e.iconList,function(t,a){return s("div",{key:a,staticClass:"iconBox"},[s("div",{staticClass:"photoBox"},[t.imgUrl?s("img",{attrs:{src:t.imgUrl,alt:""}}):e._e()]),e._v(" "),s("div",{staticClass:"text"},[e._v(e._s(t.text))])])}),e._v(" "),s("div",{staticClass:"iconBox"},[s("svg-icon",{attrs:{"icon-class":"more"}}),e._v(" "),s("div",{staticClass:"text"},[e._v("更多")])],1)],2)])},staticRenderFns:[]};var rt=a("VU/8")(st,it,!1,function(e){a("G4ct")},"data-v-7d672764",null).exports,nt={props:{matterList:{type:Array,default:[]},unitContent:{type:Array,default:[]},personContent:{type:Array,default:[]}},data:function(){return{contentList:[],chooseIndex:0,radio:1,List:[],statusType:""}},computed:{num:{get:function(){return this.matterList.length>7?7-this.unitContent.length:this.matterList.length-this.unitContent.length},set:function(e){}},num1:{get:function(){return this.matterList.length>7?7-this.personContent.length:this.matterList.length-this.personContent.length},set:function(e){}},picList:function(){var e=[];return this.matterList.forEach(function(t){var a=new Object;a.imgUrl=t.picUrl,a.text=t.mattersName,e.push(a)}),e},optionList:function(){var e=[];return this.matterList.forEach(function(t){e.push(t.mattersName)}),e},picArr:function(){for(var e=[],t=0;t<this.unitContent.length;t++){var a=new Object;a.imgUrl=this.unitContent[t].imgUrl,a.text=this.unitContent[t].text,e.push(a)}return e},picList1:function(){var e=[];return this.matterList.forEach(function(t){var a=new Object;a.imgUrl=t.picUrl,a.text=t.mattersName,e.push(a)}),e},optionList1:function(){var e=[];return this.matterList.forEach(function(t){e.push(t.mattersName)}),e},picArr1:function(){for(var e=[],t=0;t<this.personContent.length;t++){var a=new Object;a.imgUrl=this.personContent[t].imgUrl,a.text=this.personContent[t].text,e.push(a)}return e}},methods:{plusContent:function(){if(this.num<=0)return!1;for(var e=[],t=0;t<this.picArr.length;t++){var a={text:this.picArr[t].text,imgUrl:this.picArr[t].imgUrl};e.push(a)}for(var s=0;s<this.unitContent.length;s++)this.unitContent.pop();this.unitContent.pop();for(var i=0;i<e.length;i++){var r={text:e[i].text,imgUrl:e[i].imgUrl};this.unitContent.push(r)}this.unitContent.push({text:"",imgUrl:""}),this.num--,this.$emit("iconConfig",this.picArr)},plusContent1:function(){if(this.num1<=0)return!1;for(var e=[],t=0;t<this.picArr1.length;t++){var a={text:this.picArr1[t].text,imgUrl:this.picArr1[t].imgUrl};e.push(a)}for(var s=0;s<this.personContent.length;s++)this.personContent.pop();this.personContent.pop();for(var i=0;i<e.length;i++){var r={text:e[i].text,imgUrl:e[i].imgUrl};this.personContent.push(r)}this.personContent.push({imgUrl:"",text:""}),this.num1--,this.$emit("iconConfig",this.picArr1)},submit:function(){var e=this,t={siteHomeConfigList:[]},a=1;"1"==this.radio?(this.statusType=1,this.List=this.picArr):"2"==this.radio&&(this.statusType=2,this.List=this.picArr1),this.List.forEach(function(s){var i=new Object;i.sortNumber=a,a++,e.matterList.forEach(function(t){t.mattersName==s.text&&(i.areaId=t.areaId,i.blockAppId=t.blockAppId,i.mattersId=t.mattersId,i.statusType=e.statusType)}),t.siteHomeConfigList.push(i)}),this.$post("/ybapp/home/saveOrupdateHome",t).then(function(t){t.success&&e.$message({type:"success",message:"提交成功"})}).catch(function(e){})},cancel:function(){this.matterList=[],this.$emit("iconConfig",this.matterList)},selectName:function(e,t){for(var a=this,s=0;s<this.picArr.length;s++)s==t&&e.target.value==this.picArr[s].text||e.target.value==this.picArr[s].text&&(this.picArr[s].text="",this.picArr[s].imgUrl="",this.$forceUpdate());this.picArr[t].text=e.target.value,this.picList.forEach(function(s){e.target.value==s.text&&(a.picArr[t].imgUrl=s.imgUrl)}),this.$forceUpdate(),this.$emit("iconConfig",this.picArr)},selectName1:function(e,t){for(var a=this,s=0;s<this.picArr1.length;s++)s==t&&e.target.value==this.picArr1[s].text||e.target.value==this.picArr1[s].text&&(this.picArr1[s].text="",this.picArr1[s].imgUrl="",this.$forceUpdate());this.picArr1[t].text=e.target.value,this.picList1.forEach(function(s){e.target.value==s.text&&(a.picArr1[t].imgUrl=s.imgUrl)}),this.$forceUpdate(),this.$emit("iconConfig",this.picArr1)}}},ot={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"configContent"},[a("div",{staticClass:"configTitle"},[e._v("功能区")]),e._v(" "),"1"==e.radio?a("div",{staticClass:"addContent"},[e._l(e.picArr,function(t,s){return a("div",{key:s,staticClass:"photoBox"},[a("div",{staticClass:"photo"},[e._v("\n          暂无图片\n          "),t.imgUrl?a("img",{attrs:{src:t.imgUrl}}):e._e()]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"item.text"}],on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"text",a.target.multiple?s:s[0])},function(t){return e.selectName(t,s)}]}},[a("option",{staticStyle:{display:"none"},attrs:{value:"",disabled:"",selected:""}},[e._v("请选择")]),e._v(" "),e._l(e.optionList,function(t,s){return a("option",{key:s},[e._v(e._s(t))])})],2)])}),e._v(" "),a("div",{staticClass:"svgBox"},[a("svg-icon",{attrs:{"icon-class":"plusPhoto"},on:{click:e.plusContent}}),e._v(" "),a("span",[e._v("剩余可添加"+e._s(e.num)+"个")])],1)],2):e._e(),e._v(" "),"2"==e.radio?a("div",{staticClass:"addContent"},[e._l(e.picArr1,function(t,s){return a("div",{key:s,staticClass:"photoBox"},[a("div",{staticClass:"photo"},[e._v("\n          暂无图片\n          "),t.imgUrl?a("img",{attrs:{src:t.imgUrl}}):e._e()]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"item.text"}],on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"text",a.target.multiple?s:s[0])},function(t){return e.selectName1(t,s)}]}},[a("option",{staticStyle:{display:"none"},attrs:{value:"",disabled:"",selected:""}},[e._v("请选择")]),e._v(" "),e._l(e.optionList1,function(t,s){return a("option",{key:s},[e._v(e._s(t))])})],2)])}),e._v(" "),a("div",{staticClass:"svgBox"},[a("svg-icon",{attrs:{"icon-class":"plusPhoto"},on:{click:e.plusContent1}}),e._v(" "),a("span",[e._v("剩余可添加"+e._s(e.num1)+"个")])],1)],2):e._e(),e._v(" "),a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:1}},[e._v("单位")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("个人")])],1),e._v(" "),a("div",{staticClass:"btnContent"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var lt={components:{"side-nav":at,"phone-content":rt,"config-content":a("VU/8")(nt,ot,!1,function(e){a("GnmL")},"data-v-6c9c391c",null).exports},data:function(){return{iconList:[],matterList:[],unitContent:[],personContent:[]}},methods:{changeIcon:function(e){this.iconList=e},getMatter:function(e){this.matterList=e},getStatic:function(e){var t=this;this.unitContent=[],this.personContent=[],e.unitList.forEach(function(e){var a={text:e.mattersName,imgUrl:e.picUrl};t.unitContent.push(a)}),e.personList.forEach(function(e){var a={text:e.mattersName,imgUrl:e.picUrl};t.personContent.push(a)})},clearIcon:function(){this.iconList=[]}}},ct={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"indexPageConfig"},[a("side-nav",{on:{clearIcon:e.clearIcon,matters:e.getMatter,static:e.getStatic}}),e._v(" "),a("phone-content",{staticStyle:{"margin-left":"20px"},attrs:{iconList:e.iconList}}),e._v(" "),a("config-content",{staticStyle:{"margin-left":"20px"},attrs:{unitContent:e.unitContent,personContent:e.personContent,matterList:e.matterList},on:{iconConfig:e.changeIcon}})],1)},staticRenderFns:[]};var ut=a("VU/8")(lt,ct,!1,function(e){a("XprB")},"data-v-48753ad1",null).exports,dt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"indexPageConfig"},[t("iframe",{staticClass:"TaskManagement_iframe",attrs:{src:this.iframeUrl,frameborder:"0"}})])},staticRenderFns:[]};var pt=a("VU/8")({components:{},data:function(){return{iframeUrl:"http://10.85.94.57:8090/#/page/TaskManagement?isHide=true"}},methods:{clearIcon:function(){this.iconList=[]}}},dt,!1,function(e){a("qKU2")},"data-v-1411c32c",null).exports,mt={data:function(){return{defaultUserRules:{logonName:this.$rules("请输入登录名"),password:this.$rules("请输入密码")},defaultUser:{logonName:"xx",password:"xx",id:""},defaultUserDia:!1,uploadData:{isPublic:"1"},imageUrl:"",iconDialog:!1,sysFileList:[],action:"/api/fileUpload/upload",asVisible:!1,sysInfo:{sysName:"",sysAddress:"",sysArea:"",sysModel:"1",isAgency:"1",areaName:"",icon:""},diaTitle:"新增系统",total:"",modelOptions:[{text:"接入模式",value:"1"},{text:"同步模式",value:"2"}],cascaderProps:{value:"id",label:"areaName",checkStrictly:!0},cascaderProps1:{value:"regionCode",label:"orgName",checkStrictly:!0},cascaderOptions:[],cascaderVal:"",cascaderVal1:"",selectId:"",tableData:[],dialogFormRules:{icon:this.$rules("请上传icon"),isAgency:this.$rules("请输入"),sysName:this.$rules("请输入系统名称"),sysAddress:this.$rules("请输入系统地址"),sysArea:this.$rules("请选择统筹区"),sysModel:this.$rules("请选择接入模式")},searchForm:{sysName:"",sysArea:"",sysModel:"",isAgency:""},page:1,size:10}},created:function(){this.init(this.page,this.size),this.getAreaTree()},computed:{tableHeight:function(){return window.innerHeight-230}},methods:{addDefaultUser:function(e){this.defaultUserDia=!1},beforeIconUpload:function(e){var t="image/jpeg"===e.type||"image/png",a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleExceed:function(e,t){this.$message.warning("最多上传一个文件")},hanleIconRemove:function(e,t){this.sysInfo.icon=""},hanleIconPreview:function(e){this.imageUrl=e.url,this.iconDialog=!0},hanleIconSuccess:function(e,t){this.sysInfo.icon=t.response.result.key},getAreaTree:function(){var e=this;this.$get("/sys/org/getAllAreaTreeNodes").then(function(t){if(t.data.success){var a=JSON.parse(D()(t.data.result));!function e(t,a){for(var s=0;s<t.length;s++)t[s].children&&e(t[s].children,t[s]),0!=t[s].type&&(t.splice(s,1),s--);a&&a.children&&0===a.children.length&&delete a.children}(a),e.cascaderOptions=a}})},beforeAdd:function(){this.diaTitle="新增系统",this.sysInfo.sysName="",this.sysInfo.sysAddress="",this.sysInfo.sysArea="",this.sysInfo.sysModel="1",this.sysInfo.isAgency="1",this.sysInfo.areaName="",this.sysInfo.icon="",this.cascaderVal1="",this.sysFileList=[],this.asVisible=!0},addSys:function(){var e=this;this.$refs.ruleFrom.validate(function(t){if(!t)return!1;var a={systemName:e.sysInfo.sysName,areaId:e.sysInfo.sysArea.toString(),systemAddress:e.sysInfo.sysAddress,accessWay:e.sysInfo.sysModel,areaName:e.sysInfo.areaName,isAgency:e.sysInfo.isAgency,icon:e.sysInfo.icon};"编辑系统"==e.diaTitle&&(a.id=e.selectId),e.$post("/manage/updateAndInsert",a).then(function(t){t.success&&(e.asVisible=!1,e.init(e.page,e.size)),e.$mess(t)})})},init:function(e,t){var a=this;this.$post("/manage/list",{pageNum:e,pageSize:t,accessWay:this.searchForm.sysModel,areaId:this.searchForm.sysArea?this.searchForm.sysArea.toString():"",systemName:this.searchForm.sysName,isAgency:this.searchForm.isAgency}).then(function(e){a.tableData=e.result.list,a.total=e.result.count})},deleteClick:function(e){var t=this;this.$post("/manage/delete",{id:e.id}).then(function(e){e.success&&t.init(t.page,t.size)})},editClick:function(e){var t=this;this.selectId=e.id,this.diaTitle="编辑系统",this.$post("/manage/select",{id:e.id}).then(function(e){e.success?(t.sysInfo.sysName=e.result.systemName,t.sysInfo.sysAddress=e.result.systemAddress,t.sysInfo.sysArea=e.result.arrList[e.result.arrList.length-1],t.cascaderVal1=e.result.arrList,"330000"==t.sysInfo.sysArea&&(t.cascaderVal1=["330000"]),t.sysInfo.sysModel=e.result.accessWay,t.sysInfo.areaName=e.result.areaName,t.sysInfo.isAgency=e.result.isAgency,t.sysInfo.icon=e.result.icon,t.sysFileList=[],t.sysInfo.icon&&t.sysFileList.push({url:"http://10.85.94.238:10160/openapiApp/download?key="+e.result.icon}),t.asVisible=!0):t.$mess(e)})},pageInit:function(e,t){this.page=e,this.size=t,this.init(e,t)},onChangeSearchForm:function(e,t){this.searchForm[t]=e},onSearch:function(){this.page=1,this.init(this.page,this.size)},handleChange:function(e){this.searchForm.sysArea=e[e.length-1]},handleChange1:function(e){this.sysInfo.sysArea=e[e.length-1];var t=this.$refs.cascaderArea.getCheckedNodes()[0].pathLabels;this.sysInfo.areaName=t[t.length-1]}},watch:{}},ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm}},[a("el-row",{attrs:{gutter:20}},[a("ep-input",{attrs:{colspan:"5",value:e.searchForm.sysName,placeholder:"请搜索系统名称",isIcon:!0,size:"mini",name:"sysName"},on:{"input-message":e.onChangeSearchForm}}),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-cascader",{attrs:{clearable:"",placeholder:"请选择统筹区","expand-trigger":"hover",options:e.cascaderOptions,size:"mini",props:e.cascaderProps1,"show-all-levels":!1,filterable:""},on:{change:e.handleChange},model:{value:e.cascaderVal,callback:function(t){e.cascaderVal=t},expression:"cascaderVal"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-select",{attrs:{colspan:"4",placeholder:"系统接入模式",size:"mini",name:"sysModel",clearable:""},on:{"select-message":e.onChangeSearchForm},model:{value:e.searchForm.sysModel,callback:function(t){e.$set(e.searchForm,"sysModel",t)},expression:"searchForm.sysModel"}},[a("el-option",{attrs:{label:"统一接入",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"同步模式",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-select",{attrs:{colspan:"4",placeholder:"请选择系统类型",size:"mini",name:"isAgency",clearable:""},on:{"select-message":e.onChangeSearchForm},model:{value:e.searchForm.isAgency,callback:function(t){e.$set(e.searchForm,"isAgency",t)},expression:"searchForm.isAgency"}},[a("el-option",{attrs:{label:"业务经办系统",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"其他系统",value:"0"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:2,offset:0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSearch}},[e._v("查询")])],1)],1),e._v(" "),a("el-col",{attrs:{span:4,offset:1}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.beforeAdd}},[e._v("新增系统")])],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{align:"center",prop:"systemName",label:"系统名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"areaName",label:"统筹区"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"接入模式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("1"==t.row.accessWay?"统一接入":"同步模式"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"channelCode",label:"渠道标识码"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"systemAddress",label:"系统地址"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteClick(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("ep-page",{attrs:{total:e.total},on:{page:e.pageInit}}),e._v(" "),a("el-dialog",{attrs:{title:e.diaTitle,visible:e.asVisible,width:"40%"},on:{"update:visible":function(t){e.asVisible=t}}},[a("el-form",{ref:"ruleFrom",staticClass:"asyForm",attrs:{model:e.sysInfo,"label-width":"100px",rules:e.dialogFormRules}},[a("el-form-item",{attrs:{label:"系统名称:",prop:"sysName"}},[a("el-input",{attrs:{placeholder:"请输入系统名称",autocomplete:"off"},model:{value:e.sysInfo.sysName,callback:function(t){e.$set(e.sysInfo,"sysName",t)},expression:"sysInfo.sysName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统地址:",prop:"sysAddress"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入系统地址",autocomplete:"off"},model:{value:e.sysInfo.sysAddress,callback:function(t){e.$set(e.sysInfo,"sysAddress",t)},expression:"sysInfo.sysAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"统筹区:"}},[a("el-cascader",{ref:"cascaderArea",attrs:{clearable:"","expand-trigger":"hover",options:e.cascaderOptions,props:e.cascaderProps1,"show-all-levels":!1,filterable:""},on:{change:e.handleChange1},model:{value:e.cascaderVal1,callback:function(t){e.cascaderVal1=t},expression:"cascaderVal1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单接入模式:"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.sysInfo.sysModel,callback:function(t){e.$set(e.sysInfo,"sysModel",t)},expression:"sysInfo.sysModel"}},[e._v("统一创建")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.sysInfo.sysModel,callback:function(t){e.$set(e.sysInfo,"sysModel",t)},expression:"sysInfo.sysModel"}},[e._v("同步模式")])],1),e._v(" "),a("el-form-item",{attrs:{label:"系统类型:"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.sysInfo.isAgency,callback:function(t){e.$set(e.sysInfo,"isAgency",t)},expression:"sysInfo.isAgency"}},[e._v("业务经办系统")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.sysInfo.isAgency,callback:function(t){e.$set(e.sysInfo,"isAgency",t)},expression:"sysInfo.isAgency"}},[e._v("其他系统")])],1),e._v(" "),a("el-form-item",{attrs:{label:"系统图标:"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{data:e.uploadData,"list-type":"picture-card",action:e.action,"show-file-list":!0,"on-success":e.hanleIconSuccess,"on-preview":e.hanleIconPreview,"on-remove":e.hanleIconRemove,limit:1,"on-exceed":e.handleExceed,"before-upload":e.beforeIconUpload,"file-list":e.sysFileList}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.iconDialog,appendToBody:""},on:{"update:visible":function(t){e.iconDialog=t}}},[a("img",{attrs:{width:"100%",src:e.imageUrl,alt:""}})])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.asVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addSys}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.sysInfo.sysName+"--系统管理员账号",visible:e.defaultUserDia},on:{"update:visible":function(t){e.defaultUserDia=t}}},[a("el-form",{attrs:{model:e.defaultUser,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号",prop:"logonName"}},[a("el-input",{attrs:{placeholder:e.defaultUser.logonName,readonly:""},model:{value:e.defaultUser.logonName,callback:function(t){e.$set(e.defaultUser,"logonName",t)},expression:"defaultUser.logonName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:e.defaultUser.password,readonly:""},model:{value:e.defaultUser.password,callback:function(t){e.$set(e.defaultUser,"password",t)},expression:"defaultUser.password"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addDefaultUser("userForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ft=a("VU/8")(mt,ht,!1,function(e){a("F1wO")},"data-v-4d2d3cb4",null).exports,gt={data:function(){return{searchForm:{methodName:"",keyWord:"",url:"",operatorName:"",createTimeStart:"",createTimeEnd:""},datePicker:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},tableData:[],pageNum:1,pageSize:10,totalCount:0}},created:function(){this.reTableView()},computed:{tableHeight:function(){return window.innerHeight-230}},methods:{handleCopy:function(e,t){var a=document.createElement("input");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("Copy"),document.body.removeChild(a),this.$message({type:"success",message:"复制成功"})},reTableView:function(e,t){var a=this,s={};for(var i in this.searchForm)this.searchForm[i]&&(s[i]=this.searchForm[i]);this.$post("/sysInnerOperateLog/list",M()({pageNum:e||this.pageNum,pageSize:t||this.pageSize},s)).then(function(e){a.tableData=e.result.dataList,a.totalCount=e.result.totalCount})},pageInit:function(e,t){this.pageNum=e,this.pageSize=t,this.reTableView()},onSearch:function(){this.pageNum=1,this.pageSize=10,this.reTableView()}},watch:{datePicker:{deep:!0,immediate:!0,handler:function(e){e&&0!==e.length?(this.searchForm.createTimeStart=e[0]+" 00:00:00",this.searchForm.createTimeEnd=e[1]+" 23:59:59"):(this.searchForm.createTimeStart="",this.searchForm.createTimeEnd="")}}},filters:{reTime:function(e){function t(e){return("00"+e).substr(e.length)}return e?function(e,a){/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in s)if(new RegExp("("+i+")").test(a)){var r=s[i]+"";a=a.replace(RegExp.$1,1===RegExp.$1.length?r:t(r))}return a}(new Date(e),"yyyy-MM-dd hh:mm:ss"):""},cutOut50:function(e){return e?e.length>130?e.substr(0,130)+"...":e:""}}},vt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-form",{staticClass:"demo-form-inline searchFrom",attrs:{inline:!0,size:"mini",model:e.searchForm,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"方法名/模块名:","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入方法名或模块名"},model:{value:e.searchForm.methodName,callback:function(t){e.$set(e.searchForm,"methodName",t)},expression:"searchForm.methodName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"查询参数/返回结果:","label-width":"140px"}},[a("el-input",{attrs:{placeholder:"请输入查询参数或返回结果"},model:{value:e.searchForm.keyWord,callback:function(t){e.$set(e.searchForm,"keyWord",t)},expression:"searchForm.keyWord"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"URL:","label-width":"40px"}},[a("el-input",{attrs:{placeholder:"请输入URL"},model:{value:e.searchForm.url,callback:function(t){e.$set(e.searchForm,"url",t)},expression:"searchForm.url"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"操作人姓名:","label-width":"90px"}},[a("el-input",{attrs:{placeholder:"请输入操作人姓名"},model:{value:e.searchForm.operatorName,callback:function(t){e.$set(e.searchForm,"operatorName",t)},expression:"searchForm.operatorName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"操作时间:","label-width":"120px"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd",size:"mini"},model:{value:e.datePicker,callback:function(t){e.datePicker=t},expression:"datePicker"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight}},[a("el-table-column",{attrs:{width:"120",align:"center",prop:"systemName",label:"系统名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center",prop:"methodName",label:"方法名",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center",prop:"methodChName",label:"模块名称",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center",prop:"operatorName",label:"操作人",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{width:"160",align:"center",prop:"createTime",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("reTime")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",align:"center",prop:"operatorIp",label:"IP地址"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",align:"center",prop:"url",label:"查询URL"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"operateDetailJson",label:"查询参数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"tooltip",attrs:{effect:"dark",content:"点击复制查询参数",placement:"top"}},[a("span",{staticClass:"copyTarget",on:{click:function(a){return e.handleCopy(t.row.operateDetailJson,t.$index)}}},[e._v(e._s(e._f("cutOut50")(t.row.operateDetailJson)))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"returnValue",label:"返回结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"tooltip",attrs:{effect:"dark",content:"点击复制查询结果",placement:"top"}},[a("span",{staticClass:"copyTarget",on:{click:function(a){return e.handleCopy(t.row.returnValue,t.$index)}}},[e._v(e._s(e._f("cutOut50")(t.row.returnValue)))])])]}}])})],1),e._v(" "),a("ep-page",{attrs:{total:e.totalCount},on:{page:e.pageInit}})],1)},staticRenderFns:[]};var yt=a("VU/8")(gt,vt,!1,function(e){a("N2Zw")},"data-v-5d71a22c",null).exports,bt={name:"auditConfigRule",data:function(){return{loading:!1,searchInfo:{funName:null,funType:null,ruleStruts:null,isBus:null,funLevel:null,auFlag:null,page:1,pageSize:10},pageSum:0,dialogVisible:!1,ruleForm:{id:null,orgId:null,funId:null,funName:null,funType:null,ruleStruts:null,isBus:null,funLevel:null,auFlag:null,isLeading:null},isSelectAll:!1,rules:{funType:[{required:!0,message:"请选择所属系统",trigger:"change"}],ruleStruts:[{required:!0,message:"请选择是否生效",trigger:"change"}],isBus:[{required:!0,message:"请选择是否接入流程",trigger:"change"}],funLevel:[{required:!0,message:"请选择作用域",trigger:"change"}],auFlag:[{required:!0,message:"请选择审核类型",trigger:"change"}],isLeading:[{required:!0,message:"请选择是否以柜面为主",trigger:"change"}]},funTypeArr:[{label:"菜单类型",value:"1"},{label:"统征经办系统",value:"2"},{label:"统征工伤系统",value:"3"},{label:"统征网报系统",value:"4"},{label:"城乡系统",value:"5"},{label:"开发运维一体化平台",value:"6"},{label:"稽核风控",value:"10"}],ruleStrutsArr:[{label:"启动",value:"1"},{label:"停用",value:"2"}],isBusArr:[{label:"是",value:"1"},{label:"否",value:"2"}],funLevelArr:[{label:"省级",value:"1"},{label:"市级",value:"2"}],auFlagArr:[{label:"自动审核",value:"0"},{label:"手动审核",value:"1"}],tableData:[]}},mounted:function(){this.getTableDate()},methods:{handleSizeChange:function(e){this.loading=!0,this.searchInfo.pageSize=e,this.getTableDate()},handleCurrentChange:function(e){document.getElementById("go").scrollIntoView(),this.loading=!0,window.scrollBy(0,-10),this.searchInfo.page=e,this.getTableDate()},search:function(){this.searchInfo.page=1,this.getTableDate()},resetSearchCondition:function(){this.searchInfo={funName:null,funType:null,ruleStruts:null,isBus:null,funLevel:null,auFlag:null,page:1,pageSize:10},this.getTableDate()},getTableDate:function(){var e=this;this.$get("/sys/auditconfigrule/getAuditConfigRuleDTOListPage",this.searchInfo).then(function(t){t.data.success?(e.tableData=t.data.result.dataList,e.pageSum=t.data.result.totalCount,e.loading=!1):e.$message({type:"error",message:t.data.resultDes})}).catch(function(e){})},selectSys:function(e){e.length===this.funTypeArr.length?this.isSelectAll=!0:this.isSelectAll=!1},selectAll:function(e){var t=this;this.ruleForm.funType=[],e?this.funTypeArr.forEach(function(e){t.ruleForm.funType.push(e.value)}):this.ruleForm.funType=[]},editRule:function(e){this.dialogVisible=!0,this.getDetail(e)},getDetail:function(e){var t=this,a={id:e.id};this.$get("/sys/auditconfigrule/getAuditConfigRuleInfo",a).then(function(e){e.data.success?(r()(e.data.result).forEach(function(a){a in t.ruleForm&&(t.ruleForm[a]=e.data.result[a])}),t.ruleForm.ruleStruts="1"==e.data.result.ruleStruts,t.ruleForm.isBus="1"==e.data.result.isBus,t.ruleForm.isLeading="0"==e.data.result.isLeading):t.$message({type:"error",message:e.data.resultDes})}).catch(function(e){})},confirmRule:function(){var e=this;this.$refs.ruleForm.validate(function(t){var a={};r()(e.ruleForm).forEach(function(t){a[t]=e.ruleForm[t]}),a.ruleStruts=!0===e.ruleForm.ruleStruts?"1":"2",a.isBus=!0===e.ruleForm.isBus?"1":"2",a.isLeading=!0===e.ruleForm.isLeading?"0":"1",e.$post("/sys/auditconfigrule/updAuditConfigRuleInfo",a).then(function(t){t.success?(e.dialogVisible=!1,e.getTableDate(),e.$message({type:"success",message:"修改规则成功"})):e.$message({type:"error",message:t.resultDes})}).catch(function(e){})})},handleClose:function(){this.isSelectAll=!1,this.ruleForm={id:null,orgId:null,funId:null,funName:null,funType:null,ruleStruts:null,isBus:null,funLevel:null,auFlag:null,isLeading:null},this.$refs.ruleForm.resetFields()}}},_t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"table-content",attrs:{id:"go"}},[a("el-form",{staticClass:"demo-form-inline searchFrom",attrs:{inline:!0,size:"mini",model:e.searchInfo,"label-width":"130px"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"事项名称"}},[a("el-input",{attrs:{clearable:"",size:"mini",placeholder:"请输入事项名称"},model:{value:e.searchInfo.funName,callback:function(t){e.$set(e.searchInfo,"funName",t)},expression:"searchInfo.funName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"所属系统"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"mini",placeholder:"请选择所属系统"},model:{value:e.searchInfo.funType,callback:function(t){e.$set(e.searchInfo,"funType",t)},expression:"searchInfo.funType"}},e._l(e.funTypeArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"规则状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"mini",placeholder:"请选择规则状态"},model:{value:e.searchInfo.ruleStruts,callback:function(t){e.$set(e.searchInfo,"ruleStruts",t)},expression:"searchInfo.ruleStruts"}},e._l(e.ruleStrutsArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"是否接入流程"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"mini",placeholder:"请选择是否接入流程"},model:{value:e.searchInfo.isBus,callback:function(t){e.$set(e.searchInfo,"isBus",t)},expression:"searchInfo.isBus"}},e._l(e.isBusArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"作用域"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"mini",placeholder:"请选择作用域"},model:{value:e.searchInfo.funLevel,callback:function(t){e.$set(e.searchInfo,"funLevel",t)},expression:"searchInfo.funLevel"}},e._l(e.funLevelArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"审核类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"mini",placeholder:"请选择审核类型"},model:{value:e.searchInfo.auFlag,callback:function(t){e.$set(e.searchInfo,"auFlag",t)},expression:"searchInfo.auFlag"}},e._l(e.auFlagArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5,offset:3}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.search()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.resetSearchCondition()}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"tableDiv"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"customer-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#F2F2F2",textAlign:"left",border:0}}},[a("el-table-column",{attrs:{prop:"funName",label:"事项名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"funType",label:"所属系统"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("funType")(t.row.funType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150px",prop:"ruleStruts",label:"规则状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("ruleStruts")(t.row.ruleStruts)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150px",prop:"isBus",label:"是否接入流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("isBus")(t.row.isBus)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"funLevel",label:"作用域"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("funLevel")(t.row.funLevel)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"地市区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.areaName?t.row.areaName:"一"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"auFlag",label:"审核类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("auFlag")(t.row.auFlag)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"isLeading",label:"是否以柜面为准"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("isLeading")(t.row.isLeading)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editRule(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px"},attrs:{"current-page":e.searchInfo.page,"page-sizes":[10,20],"page-size":e.searchInfo.pageSize,layout:"prev, pager, next, jumper, sizes",total:e.pageSum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"规则编辑",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"事项名称：",prop:"funName"}},[a("span",[e._v(e._s(e.ruleForm.funName))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属系统：",prop:"funType"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择所属系统"},model:{value:e.ruleForm.funType,callback:function(t){e.$set(e.ruleForm,"funType",t)},expression:"ruleForm.funType"}},e._l(e.funTypeArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否生效：",prop:"ruleStruts"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.ruleForm.ruleStruts,callback:function(t){e.$set(e.ruleForm,"ruleStruts",t)},expression:"ruleForm.ruleStruts"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否接入流程：",prop:"isBus"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.ruleForm.isBus,callback:function(t){e.$set(e.ruleForm,"isBus",t)},expression:"ruleForm.isBus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"作用域：",prop:"funLevel"}},[a("el-radio-group",{model:{value:e.ruleForm.funLevel,callback:function(t){e.$set(e.ruleForm,"funLevel",t)},expression:"ruleForm.funLevel"}},e._l(e.funLevelArr,function(t){return a("el-radio",{key:t.value,attrs:{label:t.value,value:t.label}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"审核类型：",prop:"auFlag"}},[a("el-radio-group",{model:{value:e.ruleForm.auFlag,callback:function(t){e.$set(e.ruleForm,"auFlag",t)},expression:"ruleForm.auFlag"}},e._l(e.auFlagArr,function(t){return a("el-radio",{key:t.value,attrs:{label:t.value,value:t.label}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否以柜面为准：",prop:"isLeading"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.ruleForm.isLeading,callback:function(t){e.$set(e.ruleForm,"isLeading",t)},expression:"ruleForm.isLeading"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmRule}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var wt=a("VU/8")(bt,_t,!1,function(e){a("Nj4j")},"data-v-09c6f708",null).exports,Ct={name:"MessageList",data:function(){return{src:""}},mounted:function(){this.confirmUrl()},methods:{confirmUrl:function(){var e=window.location.href;e.includes("sysbasebk.insigma.com")?this.src="http://sysbasebk.insigma.com:10781/#/MessageList?onlyPage=true":e.includes("10.85.94.57")&&(this.src="http://10.85.94.57:10781/#/MessageList?onlyPage=true")}}},kt={render:function(){var e=this.$createElement;return(this._self._c||e)("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:this.src,frameborder:"0"}})},staticRenderFns:[]};var xt=a("VU/8")(Ct,kt,!1,function(e){a("pr/F")},"data-v-92466184",null).exports,It=d.a.prototype.push;d.a.prototype.push=function(e,t,a){return t||a?It.call(this,e,t,a):It.call(this,e).catch(function(e){return e})},n.default.use(d.a);var Ft=new d.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:h,meta:{title:"登录"}},{path:"/home",name:"home",component:x,children:[{path:"/home",redirect:"/home/sys/function/queryTree"},{path:"/home/sys/org/queryTree",name:"organize",component:A,meta:{title:"组织管理"}},{path:"/home/MattersManagement",name:"MattersManagement",component:Qe,meta:{title:"事项配置"}},{path:"/home/NewAreas",name:"NewAreas",component:We,meta:{title:"咨询管理"}},{path:"/home/MattersDetail",name:"MattersDetail",component:Ge,meta:{title:"事项配置"}},{path:"/home/NewsManagement",name:"NewsManagement",component:ze,meta:{title:"咨询管理"}},{path:"/home/indexPageConfig",name:"indexPageConfig",component:ut,meta:{title:"首页配置"}},{path:"/home/AddNews",name:"AddNews",component:Ee,meta:{title:"新增咨询"}},{path:"/home/detailNews",name:"detailNews",component:je,meta:{title:"咨询详情"}},{path:"/home/sys/config",name:"ExamineConfig",component:ae,meta:{title:"审核配置"}},{path:"/home/examineSee",name:"ExamineSee",component:ue,meta:{title:"查看审核页面"}},{path:"/home/sys/business/queryTable",name:"ExamineCenter",component:re,meta:{title:"审核中心"}},{path:"/home/sys/operateLog/queryLogList",name:"SysJournal",component:X,meta:{title:"操作日志管理"}},{path:"/home/sys/code/queryTable",name:"SysCode",component:K,meta:{title:"代码维护"}},{path:"/home/sys/function/queryTree",name:"SysMenu",component:J,meta:{title:"菜单管理"}},{path:"/home/onlineAdmin",name:"OnlineAdmin",component:we,meta:{title:"网报管理"}},{path:"/home/selfHelp",name:"selfHelp",component:Fe,meta:{title:"自助管理"}},{path:"/home/upload",name:"upload",component:Ae,meta:{title:"上传文件"}},{path:"/home/sys/user/queryTable",name:"SettingUp",component:V,meta:{title:"用户管理"}},{path:"/home/sys/role/queryTable",name:"Role",component:B,meta:{title:"角色管理"}},{path:"/home/TaskManagement",name:"TaskManagement",component:pt,meta:{title:"批处理任务管理"}},{path:"/home/sys/sysSetting",name:"sysSetting",component:ft,meta:{title:"系统管理"}},{path:"/home/methodsOperationLog",name:"methodsOperationLog",component:yt,meta:{title:"操作日志"}},{path:"/home/auditConfigRule",name:"auditConfigRule",component:wt,meta:{title:"事项规则总览"}},{path:"/home/MessageList",name:"MessageList",component:xt,meta:{title:"通知中心"}}]}]}),Tt=a("NYxO"),St={state:{userName:"",passWord:""},mutations:{SET_USERNAME:function(e,t){e.userName=t},SET_PASSWORD:function(e,t){e.passWord=t}},actions:{setUserName:function(e,t){return(0,e.commit)("SET_USERNAME",t)},setPassWord:function(e,t){return(0,e.commit)("SET_PASSWORD",t)}}},Nt={userName:function(e){return e.state.userName},passWord:function(e){return e.state.passWord}};n.default.use(Tt.a);var Dt=new Tt.a.Store({modules:{state:St},getters:Nt}),Lt=a("xrTZ"),$t=a("Av7u"),At=a.n($t),Pt=a("//Fk"),Mt=a.n(Pt);De.a.defaults.timeout=5e5,De.a.defaults.header="Access-Control-Allow-Origin",De.a.defaults.baseURL="/api";var zt=void 0;De.a.interceptors.request.use(function(e){var t=e.url.split("/").pop();return"-1"==t.indexOf("save")&&"-1"==t.indexOf("add")&&"-1"==t.indexOf("manualAssign")&&"-1"==t.indexOf("check")&&"-1"==t.indexOf("reject")||(zt=o.Loading.service({lock:!0,text:"努力加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})),"/static/menuData.json"==e.url&&(e.baseURL="",e.url="/static/menuData.json"),e},function(e){return Object(o.Message)({message:"系统异常",type:"warning"}),zt&&zt.close(),Mt.a.reject(e)}),De.a.interceptors.response.use(function(e){return zt&&zt.close(),e.hasOwnProperty("data")&&e.data.hasOwnProperty("result")&&null!=e.data.result&&e.data.result.hasOwnProperty("opseno")&&e.data.result.opseno&&"0"!=e.data.result.opseno&&n.default.prototype.$creatHtml(e.data.result.opseno),"string"==typeof e.data&&"权限不足"==e.data.trim()&&-1==e.request.responseURL.indexOf("getAllAreaTreeNodes")&&Object(o.Message)({message:"权限不足",type:"warning"}),e},function(e){return zt&&zt.close(),Object(o.Message)({message:"系统异常",type:"warning"}),Mt.a.reject(e)});var Ut={props:{id:[String,Number],url:String,parmeId:{default:"userId",type:String},info:{default:"删除",type:String},init:{default:!1,type:Boolean}},methods:{open:function(){var e=this;this.$confirm("是否确认"+this.info,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$get(e.url,Re()({},e.parmeId,e.id)).then(function(t){t.data.success&&(e.$message({type:"success",message:t.data.resultDes}),e.init&&e.$emit("init")),t.data.success||e.$message({type:"error",message:t.data.resultDes})})}).catch(function(){e.$message({type:"info",message:"已取消"})})}}},Rt={render:function(){var e=this.$createElement;return(this._self._c||e)("span",{on:{click:this.open}},[this._t("default")],2)},staticRenderFns:[]};var Bt=a("VU/8")(Ut,Rt,!1,function(e){a("Lnvs")},"data-v-4b0fbbd3",null).exports,Ot={props:{value:{type:String,default:""},isIcon:{type:Boolean,default:!1},colspan:{type:String,default:"24"},labelWidth:{type:String,default:"100"},label:{type:String,default:""},offset:{type:String|Number,default:0},size:{type:String,default:"medium"},placeholder:{type:String,default:""},eleDisabled:{type:Boolean,default:!1},p:{type:String,default:""},type:String,maxlength:"",property:{type:Object,default:function(){return{value:"",p:""}}},name:{type:String,default:""},datas:{type:Object,default:null},isChange:{type:Boolean,default:!1},isClick:{type:Boolean,default:!1},isBlur:{type:Boolean,default:!1},isFocus:{type:Boolean,default:!1},isRed:{type:Boolean,default:!1},isCodeType:{type:Boolean,default:!1}},watch:{value:function(e,t){this.inputvalue=e}},created:function(){},data:function(){return{inputvalue:this.value}},computed:{codeTypes:function(){return this.$store.getters.codeTypes}},mounted:function(){document.getElementById("input"+this.name).style.color=this.isRed?"red":""},methods:{onClick:function(){if(this.isClick){this.$emit("isClick",!0);var e={path:this.$route.path+"/doQuery/"+this.name,params:M()({path:this.$route.path},this.datas)};this.$store.dispatch("SET_COMMONPOST",e)}},onChange:function(e){this.$emit("input-message",e,this.name)},onBlur:function(){if(this.isBlur){var e={path:this.$route.path+"/blur/"+this.name,params:M()({path:this.$route.path},this.datas)};this.$store.dispatch("SET_COMMONPOST",e)}},onFocus:function(){if(this.isFocus){var e={path:this.$route.path+"/focus/"+this.name,params:M()({path:this.$route.path},this.datas)};this.$store.dispatch("SET_COMMONPOST",e)}}}},Et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{attrs:{span:Number(e.colspan),offset:Number(e.offset)}},[a("el-form-item",{attrs:{prop:e.name,label:e.label,title:""!=e.label?e.label:e.placeholder}},[a("el-input",{attrs:{disabled:e.eleDisabled,name:e.name,type:e.type,placeholder:e.placeholder,maxlength:Number(e.maxlength),id:"input"+e.name,size:e.size},on:{change:function(t){return e.onChange(e.inputvalue)},blur:e.onBlur,focus:e.onFocus},model:{value:e.inputvalue,callback:function(t){e.inputvalue="string"==typeof t?t.trim():t},expression:"inputvalue"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.isIcon,expression:"isIcon"}],staticClass:"el-icon-search",attrs:{slot:"suffix"},on:{click:e.onClick},slot:"suffix"})])],1)],1)},staticRenderFns:[]};var Vt=a("VU/8")(Ot,Et,!1,function(e){a("6Cmp")},"data-v-1ab50b92",null).exports,qt={props:{ishide:{type:Boolean,default:!0},selectKey:{type:String,default:"id"},size:{type:String,default:"medium"},selectLable:{type:String,default:"title"},value:{type:String,default:""},clearable:{type:Boolean,default:!0},eleDisabled:{type:Boolean,default:!1},optDisabled:{type:Number,default:0},p:{type:String,default:"R"},colspan:{type:String,default:"24"},labelWidth:{type:String,default:"140"},labelTitle:{type:String,default:""},placeholder:{type:String,default:""},codetype:{type:String,default:""},property:{type:String,default:""},datas:{type:Object,default:null},name:{type:String,default:""},isChange:{type:Boolean,default:!1},isClick:{type:Boolean,default:!1},isBlur:{type:Boolean,default:!1},isFocus:{type:Boolean,default:!1},isPage:{type:Boolean,default:!1},isPageFilter:{type:Boolean,default:!1},SelectFilterData:{type:String,default:""},pageData:{type:String,default:"formData"},api:{type:String,default:""},isRed:{type:Boolean,default:!1},isCodeType:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},selectClick:{type:Boolean,default:!1},options:{type:Array,default:function(){return[]}}},data:function(){return{selectoptions:[],show:!1,text:"",selectList:[],selValue:"",time:null,a:"",id:""}},created:function(){this.selValue=this.value,0==this.options.length&&(this.selectoptions=z[this.name])},computed:{},watch:{value:function(e,t){this.selValue=e},options:{handler:function(e){return this.selectoptions=e,e},deep:!0}},mounted:function(){},methods:{selectData:function(){},onChange:function(e){this.selValue=e,this.$emit("select-message",e,this.name)}}},jt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{attrs:{span:Number(e.colspan)}},[e.ishide?a("el-form-item",{attrs:{prop:e.name,label:e.labelTitle,title:e.labelTitle}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.eleDisabled,name:e.name,clearable:e.clearable,filterable:"",placeholder:e.placeholder,size:e.size},on:{change:e.onChange,"visible-change":e.selectData},model:{value:e.selValue,callback:function(t){e.selValue=t},expression:"selValue"}},e._l(e.selectoptions,function(t,s){return a("el-option",{key:s,attrs:{label:t[""+e.selectLable],disabled:t.disabled,value:t[""+e.selectKey]}})}),1)],1):e._e()],1)},staticRenderFns:[]};var Kt=a("VU/8")(qt,jt,!1,function(e){a("sNol")},"data-v-50caa127",null).exports,Ht={props:{total:{default:0,type:Number|String}},data:function(){return{currentPage:1,size:10,page:1}},methods:{handleSizeChange:function(e){this.size=e,this.$emit("page",this.page,this.size)},handleCurrentChange:function(e){this.page=e,this.$emit("page",this.page,this.size)}}},Qt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page"},[t("el-pagination",{attrs:{"current-page":this.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:Number(this.total)},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},staticRenderFns:[]};var Xt=a("VU/8")(Ht,Qt,!1,function(e){a("qwhZ")},"data-v-1a92a916",null).exports,Zt={data:function(){return{id:333,itemId:"",totalcount:1,msgFormSon:"",activeNames:0,collapseList:[],currentPage4:1,dialogFormVisible:!1,form:{name:"",shortName:"",iconCategoryId:""},formLabelWidth:"120px",isDisabled:!0,mattersTypeList:[],mattersConfigList:[],formData:{pageNum:1,pageSize:10}}},watch:{form:{handler:function(e){""!=e.name&&""!=e.shortName&&""!=e.iconCategoryId?this.isDisabled=!1:this.isDisabled=!0},deep:!0},formData:{handler:function(e){},deep:!0}},created:function(){this.getmattersConfigList()},methods:{changeCollapse:function(){var e=this;if(""!=this.activeNames){this.collapseList=[];var t={mattersId:this.activeNames};this.$post("/ybapp/siteMattersArea/selectAreaList",t).then(function(t){t.success?e.collapseList=t.result:e.$message({type:"warning",message:t.resultDes})}).catch(function(e){})}},addMatters:function(){this.form={},this.dialogFormVisible=!0,this.getmattersTypeList()},handleSizeChange:function(e){this.formData.pageSize=e,this.getmattersConfigList()},handleCurrentChange:function(e){this.formData.pageNum=e,this.getmattersConfigList()},handleClick:function(e,t){},getMsgFormSerachComproent:function(e){},handleChange:function(e){},add:function(e){sessionStorage.setItem("MattersConfigItem",D()(e)),this.$router.push("/home/NewAreas")},edit:function(e){this.form.name=e.name,this.form.shortName=e.shortName,this.form.iconCategoryId=e.iconCategoryId,this.form.id=e.id,this.dialogFormVisible=!0,this.getmattersTypeList()},lookInfomation:function(e,t){e.areaId=t,sessionStorage.setItem("MattersConfigItem",D()(e)),this.$router.push("/home/MattersDetail")},changeConfig:function(e,t,a){e.areaId=t,e.mattersAreaId=a,sessionStorage.setItem("MattersConfigItem",D()(e)),this.$router.push("/home/NewAreas")},submit:function(){var e=this;this.dialogFormVisible=!1;var t=this.form;this.$post("/ybapp/pageLayout/saveSiteMatters",t).then(function(t){t.success&&(e.$message({message:"恭喜你，添加成功",type:"success"}),e.getmattersConfigList())}).catch(function(e){})},getmattersConfigList:function(){var e=this,t=this.formData;this.$post("/ybapp/pageLayout/getSiteMattersLikeList",t).then(function(t){t.success&&(e.totalcount=t.result.totalCount,e.mattersConfigList=t.result.dataList)}).catch(function(e){})},getmattersTypeList:function(){var e=this;this.$post("/ybapp/pageLayout/getSiteIconCategoryList",{bussType:1}).then(function(t){t.success&&(e.mattersTypeList=t.result.dataList)}).catch(function(e){})}}},Wt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MattersConfig"},[a("div",{staticClass:"clearfix"},[a("SearchComponent",{staticClass:"SearchComponent",attrs:{plc:"搜索事项名称/事项简称"},on:{SearchComponent:e.getMsgFormSerachComproent}}),e._v(" "),a("el-button",{staticClass:"addMatters",attrs:{type:"primary"},on:{click:e.addMatters}},[e._v("新增事项")])],1),e._v(" "),a("div",{staticClass:"info"},[e._m(0),e._v(" "),a("el-collapse",{attrs:{accordion:""},on:{change:e.changeCollapse},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.mattersConfigList,function(t){return a("el-collapse-item",{key:t.id,attrs:{name:t.id}},[a("template",{staticClass:"infoMationTemplate",slot:"title"},[a("span",{staticStyle:{width:"30%",height:"30px","text-align":"center"}},[a("p",{staticClass:"typeName1",staticStyle:{height:"12px","line-height":"12px"}},[e._v(e._s(t.name))]),e._v(" "),a("p",{staticClass:"typeName2",staticStyle:{height:"12px","line-height":"20px"}},[e._v(e._s(t.shortName))])]),e._v(" "),a("span",{staticStyle:{width:"10%",height:"25px","text-align":"center","line-height":"25px"}},[e._v(e._s(t.iconCategoryName))]),e._v(" "),a("span",{staticStyle:{width:"10%",height:"25px","text-align":"center","line-height":"25px"}},[e._v("殷宇佳")]),e._v(" "),a("span",{staticStyle:{width:"48%",height:"25px","text-align":"center","line-height":"25px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return a.stopPropagation(),e.add(t)}}},[e._v("新增区域")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){return a.stopPropagation(),e.edit(t)}}},[e._v("编辑")])],1)]),e._v(" "),a("div",{staticClass:"infoChildren"},[a("div",{staticClass:"infoChildrenHeader"},[a("span",{staticStyle:{width:"30%",height:"25px"}},[e._v("事项名称")]),e._v(" "),a("span",{staticStyle:{width:"40%",height:"25px"}},[e._v("所属分类")]),e._v(" "),a("span",{staticStyle:{width:"28%",height:"25px"}},[e._v("操作")])]),e._v(" "),e._l(e.collapseList,function(s,i){return a("div",{key:i,staticClass:"infoChildrenInfoMation"},[a("span",{staticStyle:{width:"30%",height:"25px"}},[e._v(e._s(s.areaName))]),e._v(" "),a("span",{staticStyle:{width:"40%",height:"25px"}},[e._v(e._s(s.status))]),e._v(" "),a("span",{staticStyle:{width:"28%",height:"25px"}},[a("i",{staticStyle:{color:"blue"},on:{click:function(a){return a.stopPropagation(),e.lookInfomation(t,s.areaId)}}},[e._v("查看详情")]),e._v(" |\n                                "),a("i",{staticStyle:{color:"blue"},on:{click:function(a){return a.stopPropagation(),e.changeConfig(t,s.areaId,s.mattersAreaId)}}},[e._v("修改配置")])])])}),e._v(" "),0==e.collapseList.length?a("div",{staticClass:"infoChildrenInfoMation"},[a("span",{staticStyle:{width:"100%",height:"25px"}},[e._v("暂无数据")])]):e._e()],2)],2)}),1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage4,layout:"total, prev, pager, next, jumper",total:e.totalcount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增事项",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"事项名称","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"89%"},attrs:{placeholder:"请输入事项名称",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"事项简称","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"89%"},attrs:{placeholder:"请输入事项简称",autocomplete:"off"},model:{value:e.form.shortName,callback:function(t){e.$set(e.form,"shortName",t)},expression:"form.shortName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"事项分类","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"89%"},attrs:{placeholder:"请选择事项分类"},model:{value:e.form.iconCategoryId,callback:function(t){e.$set(e.form,"iconCategoryId",t)},expression:"form.iconCategoryId"}},e._l(e.mattersTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"infoHeader"},[t("span",{staticStyle:{width:"30%",height:"25px"}},[this._v("事项名称")]),this._v(" "),t("span",{staticStyle:{width:"10%",height:"25px"}},[this._v("所属分类")]),this._v(" "),t("span",{staticStyle:{width:"10%",height:"25px"}},[this._v("创建人")]),this._v(" "),t("span",{staticStyle:{width:"48%",height:"25px"}},[this._v("操作")])])}]};var Jt=a("VU/8")(Zt,Wt,!1,function(e){a("DJf4")},"data-v-4da4b8c9",null).exports,Yt={data:function(){return{list:[],form:{name:"",count:""},isDisabled:!0,formLabelWidth:"120px",dialogFormVisible:!1,activeName:"first",msgFormSon:"",activeNames:["1"],currentPage4:4,id:""}},created:function(){this.getList()},watch:{form:{handler:function(e){""!=e.name&&""!=e.count?this.isDisabled=!1:this.isDisabled=!0},deep:!0}},methods:{addType:function(){this.form={},this.dialogFormVisible=!0},submit:function(){var e=this,t={bussType:1,name:this.form.name,sortNo:Number(this.form.count)};""!=this.id&&null!=this.id&&void 0!=this.id?t.id=this.id:delete t.id,this.$post("/ybapp/pageLayout/saveSiteIconCategory",t).then(function(t){t.success&&(e.dialogFormVisible=!1,e.getList())}).catch(function(e){})},getList:function(){var e=this;this.$post("/ybapp/pageLayout/getSiteIconCategoryList",{bussType:1}).then(function(t){t.success&&(e.list=t.result.dataList)}).catch(function(e){})},handleClick:function(e,t){},getMsgFormSerachComproent:function(e){},handleChange:function(e){},add:function(e){},edit:function(e){this.form.name=e.name,this.form.count=e.sortNo,this.id=e.id,this.dialogFormVisible=!0},remove:function(e,t){var a=this;this.$post("/ybapp/pageLayout/deleteSiteIconCategory",{id:t}).then(function(e){e.success&&a.getList()}).catch(function(e){})},lookInfomation:function(e){},changeConfig:function(e){}}},Gt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MattersConfig"},[a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"addMatters",attrs:{type:"primary"},on:{click:e.addType}},[e._v("添加分类")])],1),e._v(" "),a("div",{staticClass:"info"},[e._m(0),e._v(" "),a("div",e._l(e.list,function(t){return a("div",{key:t.index,staticClass:"infoMationTemplate"},[a("span",{staticStyle:{width:"30%",height:"25px","text-align":"center"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{width:"20%",height:"25px","text-align":"center"}},[e._v(e._s(t.sortNo))]),e._v(" "),a("span",{staticStyle:{width:"20%",height:"25px","text-align":"center"}},[e._v(e._s(t.mattersCount))]),e._v(" "),a("span",{staticStyle:{width:"28%",height:"25px","text-align":"center"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return a.stopPropagation(),e.add(t)}}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){return a.stopPropagation(),e.edit(t)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return a.stopPropagation(),e.remove(a,t.id)}}},[e._v("删除")])],1)])}),0)]),e._v(" "),a("el-dialog",{attrs:{title:"增加分类",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"分类名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入分类名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类序号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入分类序号"},model:{value:e.form.count,callback:function(t){e.$set(e.form,"count",t)},expression:"form.count"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"infoHeader"},[t("span",{staticStyle:{width:"30%",height:"25px"}},[this._v("分类名称")]),this._v(" "),t("span",{staticStyle:{width:"20%",height:"25px"}},[this._v("分类序号")]),this._v(" "),t("span",{staticStyle:{width:"20%",height:"25px"}},[this._v("事项数量")]),this._v(" "),t("span",{staticStyle:{width:"28%",height:"25px"}},[this._v("操作")])])}]};var ea=a("VU/8")(Yt,Gt,!1,function(e){a("e7An")},"data-v-1d2b5f17",null).exports,ta={props:{plc:{type:String,required:!0}},data:function(){return{show:!0,message:""}},methods:{click:function(){this.$emit("SearchComponent",this.message)}}},aa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"SearchInputBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"InputContent",attrs:{placeholder:e.plc},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),a("svg-icon",{staticClass:"SearchBtn",attrs:{"icon-class":"search"},on:{click:e.click}})],1)},staticRenderFns:[]};var sa=a("VU/8")(ta,aa,!1,function(e){a("DJ+y")},"data-v-0abf2395",null).exports;function ia(e){return{1:"正常",2:"锁定",3:"注销"}[e]}function ra(e){return{1:"超级管理员",2:"系统管理员",3:"机构管理员",4:"业务操作员"}[e]}function na(e){return{1:"自主签领",2:"手动指派",3:"系统轮循",4:"系统随机",5:"规则分派"}[e]}function oa(e){return{1:"菜单类型",2:"统征经办系统",3:"统征工伤系统",4:"统征网报系统",5:"城乡系统",6:"开发运维一体化平台",10:"稽核风控"}[e]}function la(e){return{1:"参保征缴",2:"工伤待遇"}[e]}function ca(e){return{1:"启动",2:"停用"}[e]}function ua(e){return{0:"自动审核",1:"手动审核"}[e]}function da(e){return{0:"是",1:"否"}[e]}function pa(e){var t=new Date(e),a=t.getFullYear(),s=t.getMonth()+1,i=t.getDate(),r=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return t=a+"-"+(s=s<10?"0"+s:s)+"-"+(i=i<10?"0"+i:i)+" "+r+":"+n+":"+o}function ma(e){return{1:"身份证",2:"军官证",3:"户口本",4:"护照",5:"其他"}[e]}function ha(e){return{1:"生效",0:"失效"}[e]}function fa(e){return{1:"统征基础系统",2:"统征经办系统",3:"统征工伤系统",4:"统征网报系统"}[e]}function ga(e){return{1:"可维护",0:"不可维护"}[e]}function va(e){return{1:"有效",0:"无效"}[e]}function ya(e){return{1:"生效",2:"失效"}[e]}function ba(e){return{1:"是",2:"否"}[e]}function _a(e){return{1:"是",2:"否"}[e]}function wa(e){return e.replace(/\-/g,"")}function Ca(e){return{1:"柜面",2:"网上申报",3:"自助机",4:"App"}[e]}function ka(e){return{0:"全省",1:"杭州市",2:"宁波市",3:"温州市",4:"嘉兴市",5:"湖州",6:"绍兴市",7:"金华市",8:"衢州市",9:"舟山市",A:"台州市",B:"丽水市",Z:"省本级"}[e]}function xa(e){return{A:"参保征缴",I:"养老待遇",L:"工伤"}[e]}function Ia(e){return{0:"待审核",1:"已通过",2:"已驳回",3:"已撤销"}[e]}function Fa(e){return{0:"待审核",1:"通过",2:"驳回"}[e]}function Ta(e){return{1:"省级",2:"市级",3:"区级"}[e]}function Sa(e){return("00"+e).substr(e.length)}var Na={reTime:function(e,t){function a(e){return("00"+e).substr(e.length)}return e?(t=t||"yyyy-MM-dd hh:mm:ss",function(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in s)if(new RegExp("("+i+")").test(t)){var r=s[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:a(r))}return t}(new Date(e),t)):""},formatDate:function(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var s in a)if(new RegExp("("+s+")").test(t)){var i=a[s]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?i:Sa(i))}return t},DateToNumber:function(e){return e.replace(/-/g,"")},NumberToDate:function(e){var t=e.toString();return t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8)}},Da={name:"SvgIcon",props:{iconClass:{type:String,required:!0},className:{type:String,default:""}},computed:{iconName:function(){return"#icon-"+this.iconClass},svgClass:function(){return this.className?"svg-icon "+this.className:"svg-icon"}}},La={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({class:this.svgClass,attrs:{"aria-hidden":"true"}},this.$listeners),[t("use",{attrs:{"xlink:href":this.iconName}})])},staticRenderFns:[]};var $a=a("VU/8")(Da,La,!1,function(e){a("VvWp")},"data-v-35a2a642",null).exports;n.default.component("svg-icon",$a);var Aa,Pa=a("90Fk");(Aa=Pa).keys().map(Aa);var Ma=a("G0J2"),za=a.n(Ma);a("3f40"),a("4qOc"),a("+cgv");n.default.prototype.util=Na,n.default.config.productionTip=!1,n.default.use(l.a),n.default.use(za.a),n.default.prototype.$crypto=At.a,n.default.prototype.$post=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Mt.a(function(a,s){De.a.post(e,t).then(function(e){a(e.data)},function(e){s(e)})})},n.default.prototype.$axios=De.a,n.default.prototype.$get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Mt.a(function(a,s){De.a.get(e,{params:t}).then(function(e){a(e)}).catch(function(e){s(e)})})},n.default.prototype.$delete=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Mt.a(function(a,s){De.a.delete(e,{data:t}).then(function(e){a(e)}).catch(function(e){s(e)})})},n.default.prototype.$patch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Mt.a(function(a,s){De.a.patch(e,{params:t}).then(function(e){a(e)}).catch(function(e){s(e)})})},n.default.prototype.$bussType="2",n.default.prototype.$Base64=Lt.Base64,n.default.prototype.$api="/api",n.default.prototype.$rules=function(e,t){return[{required:!0,message:e,trigger:"blur"},{max:t,message:"最多 "+t+" 个字符",trigger:"blur"}]},n.default.prototype.$rulesMax=function(e){return[{max:e,message:"最多 "+e+" 个字符",trigger:"blur"}]},n.default.prototype.$mess=function(e){e.success&&this.$message({type:"success",message:e.resultDes}),e.success||this.$message({type:"error",message:e.resultDes})},n.default.prototype.$sysCreatHtml=function(e,t){var a={logId:e,htmlText:Lt.Base64.encode(t.el),version:1,cssUrl:t.linkHref};this.$post("/sys/snapshot/upload",a).then(function(e){e.success})},n.default.prototype.$creatHtml=function(e){var t,a={},s=document.querySelector(".el-main"),i=document.querySelectorAll("input"),r=document.querySelectorAll("textarea"),n=document.querySelectorAll("link");t=n.length>0?n[0].href:"http://10.85.94.238:10540/openapiApp/download?key=bizamt/rdm/1562901848299M87.css";for(var o=0;o<i.length;o++)i[o].setAttribute("data-test",i[o].value);for(var l=0;l<r.length;l++)r[l].setAttribute("data-test",r[l].value);a.el='<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0"><title></title><link href="'+t+'" rel="stylesheet"></head>\n            <body><div style="position: fixed;width:100%;height:100%;z-index: 9999;"></div><div id="app"><section class="el-container" ><section  class="el-container is-vertical">\n            <div  class="ep-tabs"><main class="el-main">'+s.innerHTML+"</main></div></section></section>\n            </div></body></html>";var c={logId:e,htmlText:Lt.Base64.encode(a.el),version:1,cssUrl:t};this.$post("/snapshot/upload",c).then(function(e){e.success})},n.default.component("EpDelete",Bt),n.default.component("EpInput",Vt),n.default.component("EpSelect",Kt),n.default.component("EpPage",Xt),n.default.component("EpUpload",Ae),n.default.component("MattersConfig",Jt),n.default.component("MattersType",ea),n.default.component("SearchComponent",sa),r()(s).forEach(function(e){n.default.filter(e,s[e])}),Ft.beforeEach(function(e,t,a){e.meta.title&&(document.title=e.meta.title),a()}),new n.default({el:"#app",router:Ft,store:Dt,components:{App:u},template:"<App/>"})},NOdP:function(e,t){},Nj4j:function(e,t){},Oplh:function(e,t){},P66V:function(e,t){},RgSJ:function(e,t){},T12x:function(e,t){},TDFD:function(e,t){},THIP:function(e,t){},UyPm:function(e,t){},VbHD:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAyKADAAQAAAABAAAAyAAAAACbWz2VAAAPwElEQVR4Ae2de4wV1R3H98XibgVhXdbS2qCQltS+KcWqywK7IIZ0I7WUKrGp6UtRa6NtLRbQpdiiuGD/UGnSEFJiqqWP1GJXXgsLu8Gk2T5joxJNW2pqC0Rb2Aosy9LvD/aGveu99/zuzJw598x8J7l79875nXN+v8+Z77zOmTNlZVxIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARIgARKmkB5SXuXIue6uro+Pzg4WJMn5Neam5s78qRxtUUCVRbLZtHFEWgvLy9vyJNlO9ZTIHng2FxdYbNwlk0CvhOgQHxvQfpvlQAFYhUvC/edAAXiewvSf6sEKBCreFm47wQoEN9bkP5bJZAogezZs+cCq7RYuIpAR0fHaJWhB0aJEUhnZ+ck8H5BOtw84J5YF7GTGldTU9ON7+VJCDIRAhFxVFRUdKFBppw5c2YTReJm0xRxoOYd+HwCnweTIBLvBTJMHJehUWSppEjOgYjz7whxZKoWkazI/PDx22uB5BBHpg0okgyJGL7ziCNT82qfReKtQAqII9MwFEmGhMVvgzgyNXsrEm8FUllZuQD0L8u0QJ7vsyLZvXv3kjzpXB2CQHd393gMsOxEEXLNYVqWbN26tdZkVGrp3gpk9uzZG3Ct8Q0F0Eo04mZeuCtIFWEiR46BgYHtaINpimwvY4fW0tra+pbCtqRMvBWIUMQzEuu1IuGFe3TbnfK0KlOhiGNOU1PT65kVPn17LRABTZHEu7mlSRxC1nuBSBAUiVCwv6RNHEI0EQKRQCgSoWBvSaM4hGZiBCLBUCRCIfolreIQkokSiAREkQiF6JY0i0MoJk4gEhRFIhTCL2kXhxBMpEAkMIpEKARfKI5z7BIrEAmPIgkmEIrjPLdEC4QiOd/Q2v8ojmxSiRcIRZLd4IV+URxvp5MKgVAkb2/4kWsojpFEzv1OjUAkXLkmwcDFe3OjyForo4C/1NbWFhsf1De1qqqqLtcHni3K8s7CD3CZAx8+rij6xdOnT8/ydWyVIr4sk1ROXo3h7/dgg1iXRWLYD6Ttx4Z6XWNj47FhqxP/L44it0AkGxF/vh2D1wMPgzRgKgUioPKJJK3iyGw8BUSSOnEIk9QKRIIfKZK0i0OYyAKR3IivJ/GplN9YUikOCTzVAhEAGZFQHELj/DJMJK/4/DzH+Yj4X2ACEMmSnp6eMYELSGhGiGTRrl27LkloeAyLBEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABEiABNwTKMnh7kPv8mhzj4cexEhgG975ckeM9amqKjmB7N+/v+bkyZMvw/v3qCKgUVIInEEgM+bMmdNbSgHle/bYmY8Qx7dROcXhrAWcVSw763ZnteepuKSOIDt27HjXqFGjDsDXd+Txl6sTTgCTRlyP2Wd+XSphltQRpLq6ejXAUBylsnU48AOPPq/t7e0d5aDqnFWWjEDwaOeHsff4Qk4vuTJNBKYeO3bsq6UScMkIBPNQPQIomVk0SoUP/XBDoG3nzp0Xuak6u9aq7J9ufmFygOtw9Li2UO1IH8Th9158p2oyt0JMfE2rqKhYjXZsKOB/PXaY9yF9WQGbWJKcX6Rv2bKlcsKECX9EtB8sFDGAPoWLtyWFbJjmBwH0c92N9lxfyFvsDPsxxekVLS0trxays53m/BQL4vgygiwoDqSfBrDv2obB8uMhAHFsQHseLFQbbKoxH5fzNncqEJxaXQhIDxQCJWmAuREdSC+Z7JjuBwG05QkIQO5YFlxgc1NnZ+fVBY0sJzoVCGKTTsGJhhhPQCAPGmyY7BmBw4cPb4LLpp1eOa5X2iEUZ5cCzgSCPcO7AehuU7tCHE/MmjXrHyY7pvtFYPHixafh8SqF11ft3bt3ocLOiokzgeD88vuIyNQp2IehJw9biZyFOieAwYk/hRN/UDjSjps51Qq7yE2cCARz4X5kcHDwZlM0OHqsnz9//iGTHdP9JID2xdnTmZUm72Ezub6+/jaTnY10JwIBmHZ8THW/CTCP2giaZZYOAdy6/w282WvyCNtL27Zt2+pMdlGnmzbSqOsrwz3wVhQ611QwgKzB3Y7/mOyYnggCKxRRjB89erR0Hsa6xCoQ6RTEUWGNIsLXMR7ncYUdTRJAADvCHoSx3RQKdpp34ebOFJNdlOmxCgTnkbfC+Q+YAgCI1a2trW+Z7JieHALYcS5HNPLQVN4FNtW47fu9vAYWEmITiLygBhv+/YoY/nbo0KGNCjuaJIgArkV+h3B+qQhpMW7yXKOwi8QkNoGcOnXqO/BY87ailbhH3h9JdCzEKwIYeyXbyIDBaexny2PrPIxFIBhScimCussQuCT/BZ1CP1HY0SSBBObOnXsAYT2pCO2TuNnzGYVdaJNYBAJxPIzzx1qFtyva2toGFXY0SSgB9I+1IbSTpvBkm+ro6Bhtsgubbl0gOCJ8DEHLa4VNSy96Vp8xGTE92QQwvP3viPBHpiixw51cW1t7u8kubLp1gSAQTadgGeyWYa9Q8C5G2GCZ3w8C/f39MtLX+GActpmVeFT7YptRWRUIzhM/jSCaTQFAGPtwF6PTZMf0dBCQ4UXYbh5TRDset33l9rC1xZpAhmameEjpufNHK5V+0iwmAthprsXnDVN1EMgdOI1/r8kuaLo1gRw9enQp9gLvUzj2DK49nlfY0SRFBGSYEbafgo/lCg7YVOMaV0aGW1msCAS3dcdB/ZpRmoMI0PhEoZXIWWjJE8C1yA/g5L8Vji7CNteosCvaxIpA4IWcF9abvIGIZCKGP5nsmJ5OArgW+R92oNqjg5XOw8gFgvPBy9GcX1M06SkcGnn0UIBKs8mRI0d+iPj/qmBwJW4KLVbYFWUSuUCw0ctoXU0HzkbXU7oURYrGTgjIsCMcRbRzEqyJuvMwUoFgENmVoKhR8QnYxToq00nrstJICOAo8mMU9KKisMtramo0Zy+Kos6ZRCoQXFPI9PXlitofw12K1xR2NCGBMpngAUeRNiWK5bhgN17/Kssqi0wgOP/7LCrV3Enow90JmYeXCwmoCWCH+jPsgH+vyDAONponFBVFlUUjEJlxAgrXnjK1cyIGVdvQaBgBiEOGIWk3/NsxBEXTBzeshtz/RnIEwZOCd6J4TW/mkePHj3MihtxtwbUGAuhQfg4mXQYzSR6Fya/lZlHoJbRAuru7x0Pd8qCLZnlowYIFRzWGtCGBPASMHdCSD2c0N+C0f2aeMtSrQwtkYGBAHqM1jqiEiP7Z19e3Qe0ZDUkgB4GhCR7kSKJZQncehhIIzvMmw8ulGk/RP7KKEzFoSNHGRACP5i7DEcL4YB1sZqDjWvMsUt4qQwkE04euRcmaTsFXxo4duymvF0wggSII4NHcP2MU7881WSCStfJqcY1tLpvAAsH53VUo8IZchY5cBycfmD59+qmR6/mbBIISwKm9XIsMKPJfeuLEicCdh4EEgg1eOgO1nYIv7Nu372lFIDQhATUBmeAB17WbNRlgtwKXA5dobEfaBBIIjh6fg0iuHllYrt9yh4sTMeQiw3VhCWAqqVUowzjBA2zG4HJA24eS5VbRAhmahl41eAzi+C3e7fFsVo38QQIREZg3b95BFCWjfTXLbTiKXKExHG5TtEDwTsEvogDt/KiciGE4bf4fOQEMW5LnRfoUBVfhKHKfwi7LpCrrl+7HO3VmZztrfoGBY1pzn+wO4n78R31yGO0ge1rNSGufwsr4ekHmH8O3etvNlBNEIJm8mu/xGiMPbTR3T0oqLJzuTsR1Y1Lbwxrrok+xrHniUcHY2C6SVzl45LIMvYj95TM+8cnnKwWSj0yB9djYquvq6iYVMCm5JIg6ktGtJReYZYcokICAMVrU+J6TgEVHng13by6GqBsiLzgFBVIgwRu5MXjWeHNCzE3x1pic2iiQ4G05N3jWeHPi6NESb43JqY0CCdiW2OimYZKKqQGzx5Zt6GZCLO/SiC2oGCuiQELAxoXvzSGyx5K1oaHhWlRU9P3/WJzzoBIKJFwjLUUH3IXhirCe+5vWa0hwBRRIuMaVJylvDVeEvdzyskucCjbbqyH5JVMgIdsYp1n3Yzj/xJDFRJ4dI6jxTFGFcXb0yCtOWIEUSMgGxR56LB7eWReymMizNzU13QnfZkRecMoKpEAiaHAcRW7CtcgtERQVSRF4DvtD8En78qJI6kxqIRRIRC2LDfLxobmJIyoxWDHy5ByOHL9C7sDPYQerOZm5KJCI2hUbZS1E8iz23u+PqMiii8HM5mPRa94BXyYXnZkZchKgQHJiCbyyHhtnz9CEFoELCZJRjhx4LfIe1D8tSH7myU2AAsnNJfBabKB1+OzANcmNgQspMiPqmo6n5Z6nOIoEpzC3/cCUwoVEmkjn4VO4JmnGJGffwrPT/7URJYQh7fd1fGTicM38ZDbcSHSZPIJYbF5ck3wF1wQvyR2uoY05sto6OzubUVgvPjL9EsURGdnsgngEyeZh45eMg5JZJVfg2mQdToWenjlz5ptBKpIZZTCT/qcgvHuQ/5ogZTBPcQQokOJ4hbGegmuEJ9Cp+CiOJs/h/52Yr7gLgjmACSDyPuOOI8Uk9Ig3wr4F39fjm4/OhmmFIvNSIEUCi8BcTocW4iiwEOIow3c/BPMq1v0LH5m+RsQyBusbIIbJ+P/sYEj8lufK8ZNLnAQokDhp56gLG301VkvfSVb/CcWQA5aDVbxIdwCdVfpDgALxp63oqQMCFIgD6KzSHwIUiD9tRU8dEKBAHEBnlf4QoED8aSt66oAABeIAOqv0hwAF4k9b0VMHBCgQB9BZpT8EKBB/2oqeOiBAgTiAzir9IUCB+NNW9NQBAQrEAXRW6Q8BCsSftqKnDghQIA6gs0p/CFAg/rQVPXVAgAJxAJ1V+kOAAvGnreipAwIUiAPorNIfAhSIP21FTx0QoEAcQGeV/hCgQPxpK3rqgAAF4gA6q/SHAAXiT1vRUwcEKBAH0FmlPwQoEH/aip46IECBOIDOKv0hQIH401b01AEBCsQBdFbpDwEKxJ+2oqcOCFAgDqCzSn8IUCD+tBU9dUCg6Bfo4K2tm/FmpB4HvrJKEghFAK+8eyNUAcxMAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRAAiRQegT+D8ALkTEJPyktAAAAAElFTkSuQmCC"},VvWp:function(e,t){},XprB:function(e,t){},ajNO:function(e,t){},e7An:function(e,t){},gZ6Q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Wc9H"),i=a.n(s),r=a("IaZV"),n=a.n(r),o=new i.a({id:"icon-more",use:"icon-more-usage",viewBox:"0 0 120 120",content:'<symbol viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-more">\n    \x3c!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>icon/面性/更多</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="icon-more_icon/面性/更多" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="icon-more_gengduo-6" transform="translate(6.000000, 6.000000)" fill="#0284FD" fill-rule="nonzero">\n            <path d="M22.9384463,0.0981042215 C9.79183543,1.23921925 2.3087e-06,12.8156905 2.3087e-06,25.9969809 L2.3087e-06,26.4667332 C2.3087e-06,39.6722169 10.6638354,50.0014648 23.8165018,50.0014648 L46.3512421,50.0014648 C47.4219309,50.0014648 48.448767,49.9045238 49.2058583,49.1483379 C49.9629496,48.3921521 50.0288086,47.366544 50.0288086,46.2971357 L50.0288086,25.1643298 C50.0288086,10.5233799 37.8694274,-1.19825093 22.9384463,0.0981042215 Z M83.8048524,0.00133121183 C69.8912046,0.00133121183 59.0071412,11.2673224 59.0071411,25.1643298 L59.0071411,46.2971357 C59.0071411,47.366544 59.0350342,48.3921521 59.7921255,49.148338 C60.5492168,49.9045238 61.576053,50.0089722 62.6467418,50.0089722 L83.8048524,50.0089722 C97.7205188,50.0089722 109,39.0613372 109,25.1643298 C109,11.2673224 97.7205188,0.0013310937 83.8048524,0.00133121183 Z M2.30870005e-06,83.8470796 C-0.00605324673,69.8230577 11.9011873,59.0092163 25.9420018,59.0092163 L46.3572977,59.0092163 C48.5857421,59.0092163 50.0089111,60.4703495 50.0089111,64.8049738 L50.0089111,83.0890244 C50.0089111,97.1130463 39.2238533,109.006046 25.1830388,108.999998 C11.2774651,108.993949 0.00605786413,97.7360227 2.30870005e-06,83.8470796 Z M82.9712042,59.0049133 C96.8424633,59.0049134 108.74163,69.5125776 108.993944,83.3652307 C109.252315,97.4779612 97.8759447,108.999998 83.8048524,108.999998 C69.8912045,108.999998 59.0028229,97.7340065 59.0028229,83.8369992 L59.0028229,62.7041932 C59.0028228,61.6347849 59.0370527,60.6091768 59.794144,59.852991 C60.5512353,59.0968051 61.5780714,59.0049133 62.6487602,59.0049133 L82.9712042,59.0049133 Z" id="icon-more_Shape" />\n        </g>\n        <rect id="icon-more_Rectangle-6" fill="#0284FD" x="29" y="29" width="27" height="27" rx="2" />\n        <rect id="icon-more_Rectangle-6-Copy" fill="#0284FD" x="65" y="30" width="26" height="26" rx="2" />\n        <rect id="icon-more_Rectangle-6-Copy-2" fill="#0284FD" x="65" y="65" width="26" height="26" rx="2" />\n        <rect id="icon-more_Rectangle-6-Copy-3" fill="#0284FD" x="28" y="65" width="28" height="28" rx="2" />\n    </g>\n</symbol>'});n.a.add(o);t.default=o},hD4a:function(e,t){},lCU3:function(e,t,a){e.exports=a.p+"static/img/indexSketch.a308515.png"},m0iu:function(e,t){},nMyW:function(e,t){},"nO/G":function(e,t){},"pr/F":function(e,t){},qKU2:function(e,t){},qwhZ:function(e,t){},sNol:function(e,t){},sr8W:function(e,t){},tvR6:function(e,t){},unKG:function(e,t){},uz0I:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1ae66fbbf0390fc0ce42.js.map?version=2020-10-30__11:12